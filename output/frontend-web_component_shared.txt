{
  "metadata": {
    "codebase": "frontend-web",
    "category": "component_shared",
    "generated_at": "2025-11-28T09:26:42.003387",
    "total_files": 10,
    "total_lines": 1537,
    "total_bytes": 43995
  },
  "files": [
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\api-error-dialog.tsx",
      "relative_path": "components/shared/api-error-dialog.tsx",
      "filename": "api-error-dialog.tsx",
      "size_bytes": 7345,
      "lines": 281,
      "last_modified": "2025-11-28T09:21:56.252474",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useTranslations } from \"next-intl\";\nimport { ShieldAlert, AlertTriangle } from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { getAuthUser, getRoleBasedRedirectPath } from \"@/lib/auth\";\n\n/**\n * API Error Dialog Component\n *\n * Displays a modal dialog for critical API errors, particularly 403 Forbidden responses.\n *\n * Use Cases:\n * - 403 Forbidden: User attempts critical action without permission (create/update/delete)\n * - Other critical errors: Server errors, validation failures that require user acknowledgment\n *\n * Strategy:\n * - Non-critical actions (GET requests): Show toast notification only\n * - Critical actions (POST/PUT/DELETE): Show this dialog for better visibility\n *\n * @example\n * // Usage with mutation error handling\n * const { mutate } = useCreateSlot();\n * const [errorDialog, setErrorDialog] = useState({ open: false, message: '' });\n *\n * const handleSubmit = async (values) => {\n *   try {\n *     await mutate(values);\n *   } catch (error) {\n *     if (error.response?.status === 403) {\n *       setErrorDialog({\n *         open: true,\n *         message: error.response.data.message || 'Forbidden'\n *       });\n *     }\n *   }\n * };\n *\n * <ApiErrorDialog\n *   open={errorDialog.open}\n *   onOpenChange={(open) => setErrorDialog({ ...errorDialog, open })}\n *   error={errorDialog.message}\n *   errorType=\"forbidden\"\n * />\n */\n\nexport interface ApiErrorDialogProps {\n  /**\n   * Controls dialog visibility\n   */\n  open: boolean;\n\n  /**\n   * Callback when dialog open state changes\n   */\n  onOpenChange: (open: boolean) => void;\n\n  /**\n   * Error message to display\n   */\n  error?: string;\n\n  /**\n   * Type of error for customized UI\n   * - forbidden: 403 permission errors\n   * - error: Generic server errors\n   * - validation: Client-side or server validation errors\n   * Default: \"error\"\n   */\n  errorType?: \"forbidden\" | \"error\" | \"validation\";\n\n  /**\n   * Custom title override (optional)\n   */\n  title?: string;\n\n  /**\n   * Show \"Go to Dashboard\" button for forbidden errors\n   * Default: true for forbidden type\n   */\n  showDashboardButton?: boolean;\n\n  /**\n   * Custom action button text\n   */\n  actionText?: string;\n\n  /**\n   * Custom action handler\n   * If not provided, default behavior:\n   * - Forbidden: Navigate to dashboard\n   * - Other errors: Close dialog\n   */\n  onAction?: () => void;\n}\n\nexport function ApiErrorDialog({\n  open,\n  onOpenChange,\n  error,\n  errorType = \"error\",\n  title,\n  showDashboardButton,\n  actionText,\n  onAction,\n}: ApiErrorDialogProps) {\n  const router = useRouter();\n  const t = useTranslations(\"permission\");\n  const tCommon = useTranslations(\"common\");\n\n  const isForbidden = errorType === \"forbidden\";\n  const showDashboard = showDashboardButton ?? isForbidden;\n\n  const getIcon = () => {\n    switch (errorType) {\n      case \"forbidden\":\n        return <ShieldAlert className=\"h-6 w-6 text-destructive\" />;\n      case \"validation\":\n        return <AlertTriangle className=\"h-6 w-6 text-yellow-600\" />;\n      default:\n        return <AlertTriangle className=\"h-6 w-6 text-destructive\" />;\n    }\n  };\n\n  const getTitle = () => {\n    if (title) return title;\n\n    switch (errorType) {\n      case \"forbidden\":\n        return t(\"access_denied\");\n      case \"validation\":\n        return \"Validation Error\";\n      default:\n        return tCommon(\"error\");\n    }\n  };\n\n  const getDescription = () => {\n    if (error) return error;\n\n    switch (errorType) {\n      case \"forbidden\":\n        return t(\"insufficient_permissions\");\n      case \"validation\":\n        return \"Please check your input and try again.\";\n      default:\n        return \"An unexpected error occurred. Please try again.\";\n    }\n  };\n\n  const handleAction = () => {\n    if (onAction) {\n      onAction();\n    } else if (showDashboard && isForbidden) {\n      // Navigate to user's dashboard\n      const user = getAuthUser();\n      if (user) {\n        const dashboardPath = getRoleBasedRedirectPath(user.roles);\n        router.push(dashboardPath);\n      }\n      onOpenChange(false);\n    } else {\n      // Just close dialog\n      onOpenChange(false);\n    }\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent className=\"max-w-md\">\n        <AlertDialogHeader>\n          <div className=\"flex items-center gap-3\">\n            {getIcon()}\n            <AlertDialogTitle>{getTitle()}</AlertDialogTitle>\n          </div>\n          <AlertDialogDescription className=\"pt-2 text-base\">\n            {getDescription()}\n          </AlertDialogDescription>\n\n          {isForbidden && (\n            <div className=\"mt-3 rounded-lg border border-muted bg-muted/30 p-3 text-sm text-muted-foreground\">\n              {t(\"contact_admin\")}\n            </div>\n          )}\n        </AlertDialogHeader>\n\n        <AlertDialogFooter className=\"gap-2 sm:gap-2\">\n          {showDashboard ? (\n            <>\n              <AlertDialogCancel onClick={() => onOpenChange(false)}>\n                {tCommon(\"close\")}\n              </AlertDialogCancel>\n              <AlertDialogAction onClick={handleAction}>\n                {actionText || \"Go to Dashboard\"}\n              </AlertDialogAction>\n            </>\n          ) : (\n            <AlertDialogAction onClick={handleAction}>\n              {actionText || tCommon(\"close\")}\n            </AlertDialogAction>\n          )}\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n\n/**\n * Hook to manage API error dialog state\n *\n * @example\n * function MyComponent() {\n *   const { showError, errorDialog, ErrorDialog } = useApiErrorDialog();\n *\n *   const handleCreate = async () => {\n *     try {\n *       await createMutation();\n *     } catch (error) {\n *       if (error.response?.status === 403) {\n *         showError(error.response.data.message, 'forbidden');\n *       }\n *     }\n *   };\n *\n *   return (\n *     <div>\n *       <button onClick={handleCreate}>Create</button>\n *       <ErrorDialog />\n *     </div>\n *   );\n * }\n */\nexport function useApiErrorDialog() {\n  const [errorState, setErrorState] = React.useState<{\n    open: boolean;\n    error?: string;\n    errorType?: \"forbidden\" | \"error\" | \"validation\";\n  }>({\n    open: false,\n  });\n\n  const showError = (\n    error: string,\n    errorType: \"forbidden\" | \"error\" | \"validation\" = \"error\"\n  ) => {\n    setErrorState({ open: true, error, errorType });\n  };\n\n  const hideError = () => {\n    setErrorState({ open: false });\n  };\n\n  const ErrorDialog = () => (\n    <ApiErrorDialog\n      open={errorState.open}\n      onOpenChange={(open) => setErrorState({ ...errorState, open })}\n      error={errorState.error}\n      errorType={errorState.errorType}\n    />\n  );\n\n  return {\n    showError,\n    hideError,\n    errorDialog: errorState,\n    ErrorDialog,\n  };\n}\n\n// Import React for hook usage\nimport React from \"react\";\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\change-password-dialog.tsx",
      "relative_path": "components/shared/change-password-dialog.tsx",
      "filename": "change-password-dialog.tsx",
      "size_bytes": 8282,
      "lines": 248,
      "last_modified": "2025-11-28T09:21:56.252978",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Lock, Eye, EyeOff, Loader2 } from \"lucide-react\";\nimport { useUpdatePassword } from \"@/hooks/api/useUsers\";\nimport { UpdatePasswordPayload } from \"@/types\";\n\ninterface ChangePasswordDialogProps {\n  userId: number;\n}\n\nexport function ChangePasswordDialog({ userId }: ChangePasswordDialogProps) {\n  const [open, setOpen] = useState(false);\n  const [showPasswords, setShowPasswords] = useState({\n    old: false,\n    new: false,\n    confirm: false,\n  });\n  const [formData, setFormData] = useState<UpdatePasswordPayload>({\n    oldPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n  });\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const updatePasswordMutation = useUpdatePassword();\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.oldPassword) {\n      newErrors.oldPassword = \"Current password is required\";\n    }\n\n    if (!formData.newPassword) {\n      newErrors.newPassword = \"New password is required\";\n    } else if (formData.newPassword.length < 6) {\n      newErrors.newPassword = \"Password must be at least 6 characters\";\n    }\n\n    if (!formData.confirmPassword) {\n      newErrors.confirmPassword = \"Please confirm your new password\";\n    } else if (formData.newPassword !== formData.confirmPassword) {\n      newErrors.confirmPassword = \"Passwords don't match\";\n    }\n\n    if (formData.oldPassword === formData.newPassword) {\n      newErrors.newPassword = \"New password must be different from current password\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await updatePasswordMutation.mutateAsync({\n        userId,\n        payload: formData,\n      });\n\n      // Reset form and close dialog on success\n      setFormData({\n        oldPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\",\n      });\n      setErrors({});\n      setOpen(false);\n    } catch (error: any) {\n      // Handle 401 error (incorrect old password)\n      const status = error.response?.status || error.status;\n      if (status === 401) {\n        setErrors({\n          oldPassword: \"Current password is incorrect. Please try again.\",\n        });\n      } else {\n        // Other errors are handled by the mutation's onError callback\n        console.error(\"Password update failed:\", error);\n      }\n    }\n  };\n\n  const handleCancel = () => {\n    setFormData({\n      oldPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    });\n    setErrors({});\n    setOpen(false);\n  };\n\n  const togglePasswordVisibility = (field: keyof typeof showPasswords) => {\n    setShowPasswords(prev => ({\n      ...prev,\n      [field]: !prev[field],\n    }));\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" className=\"w-full\">\n          <Lock className=\"h-4 w-4 mr-2\" />\n          Change Password\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Change Password</DialogTitle>\n          <DialogDescription>\n            Enter your current password and choose a new password.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"oldPassword\">Current Password</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"oldPassword\"\n                type={showPasswords.old ? \"text\" : \"password\"}\n                value={formData.oldPassword}\n                onChange={(e) => setFormData(prev => ({ ...prev, oldPassword: e.target.value }))}\n                className={errors.oldPassword ? \"border-destructive\" : \"\"}\n                placeholder=\"Enter current password\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => togglePasswordVisibility(\"old\")}\n              >\n                {showPasswords.old ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            {errors.oldPassword && (\n              <p className=\"text-sm text-destructive\">{errors.oldPassword}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"newPassword\">New Password</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"newPassword\"\n                type={showPasswords.new ? \"text\" : \"password\"}\n                value={formData.newPassword}\n                onChange={(e) => setFormData(prev => ({ ...prev, newPassword: e.target.value }))}\n                className={errors.newPassword ? \"border-destructive\" : \"\"}\n                placeholder=\"Enter new password\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => togglePasswordVisibility(\"new\")}\n              >\n                {showPasswords.new ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            {errors.newPassword && (\n              <p className=\"text-sm text-destructive\">{errors.newPassword}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"confirmPassword\"\n                type={showPasswords.confirm ? \"text\" : \"password\"}\n                value={formData.confirmPassword}\n                onChange={(e) => setFormData(prev => ({ ...prev, confirmPassword: e.target.value }))}\n                className={errors.confirmPassword ? \"border-destructive\" : \"\"}\n                placeholder=\"Confirm new password\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => togglePasswordVisibility(\"confirm\")}\n              >\n                {showPasswords.confirm ? (\n                  <EyeOff className=\"h-4 w-4\" />\n                ) : (\n                  <Eye className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            {errors.confirmPassword && (\n              <p className=\"text-sm text-destructive\">{errors.confirmPassword}</p>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleCancel}\n              disabled={updatePasswordMutation.isPending}\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={updatePasswordMutation.isPending}\n            >\n              {updatePasswordMutation.isPending && (\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n              )}\n              Update Password\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\filter-bar.tsx",
      "relative_path": "components/shared/filter-bar.tsx",
      "filename": "filter-bar.tsx",
      "size_bytes": 7039,
      "lines": 258,
      "last_modified": "2025-11-28T09:21:56.252978",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { ReactNode } from \"react\";\n\n/**\n * Generic Filter Bar Component\n *\n * Flexible filter bar that adapts to different filtering needs.\n * Supports search input, status filters, sort controls, and custom filters.\n *\n * @example\n * ```tsx\n * <FilterBar\n *   searchPlaceholder=\"Search slots...\"\n *   searchValue={search}\n *   onSearchChange={setSearch}\n *   filters={[\n *     <StatusFilter value={status} onChange={setStatus} />,\n *     <SemesterFilter value={semester} onChange={setSemester} />\n *   ]}\n *   actions={<Button>Create New</Button>}\n * />\n * ```\n */\n\ninterface FilterBarProps {\n  // Search\n  searchPlaceholder?: string;\n  searchValue?: string;\n  onSearchChange?: (value: string) => void;\n  searchClassName?: string;\n\n  // Custom filters (render your own filter components)\n  filters?: ReactNode[];\n\n  // Actions (e.g., Create button)\n  actions?: ReactNode;\n\n  // Layout\n  className?: string;\n}\n\nexport function FilterBar({\n  searchPlaceholder = \"Search...\",\n  searchValue,\n  onSearchChange,\n  searchClassName = \"w-full sm:max-w-[240px] md:max-w-sm\",\n  filters = [],\n  actions,\n  className,\n}: FilterBarProps) {\n  return (\n    <div\n      className={`flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between ${className}`}\n    >\n      {/* Search and Filters */}\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:flex-wrap lg:flex-1\">\n        {/* Search Input (optional) */}\n        {onSearchChange && (\n          <Input\n            placeholder={searchPlaceholder}\n            value={searchValue}\n            onChange={(e) => onSearchChange(e.target.value)}\n            className={searchClassName}\n            autoComplete=\"off\"\n          />\n        )}\n\n        {/* Custom filters */}\n        {filters.map((filter, index) => (\n          <div key={index}>{filter}</div>\n        ))}\n      </div>\n\n      {/* Actions (optional) */}\n      {actions && <div className=\"flex gap-2\">{actions}</div>}\n    </div>\n  );\n}\n\n/**\n * Reusable Status Filter Component\n *\n * Common filter for active/inactive status across entities.\n */\ninterface StatusFilterProps {\n  value: boolean | undefined;\n  onChange: (value: boolean | undefined) => void;\n  label?: string;\n  disabled?: boolean;\n}\n\nexport function StatusFilter({\n  value,\n  onChange,\n  label = \"Status\",\n  disabled = false,\n}: StatusFilterProps) {\n  const handleChange = (val: string) => {\n    if (val === \"all\") {\n      onChange(undefined);\n    } else {\n      onChange(val === \"true\");\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-2 rounded-md border h-10 px-3 bg-background w-full sm:w-auto\">\n      <span className=\"text-sm text-muted-foreground whitespace-nowrap\">\n        {label}:\n      </span>\n      <Select\n        value={value === undefined ? \"all\" : value ? \"true\" : \"false\"}\n        onValueChange={handleChange}\n        disabled={disabled}\n      >\n        <SelectTrigger className=\"w-full sm:w-[140px] h-full border-0 shadow-none focus:ring-0 px-0\">\n          <SelectValue placeholder=\"Select...\" />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"all\">All</SelectItem>\n          <SelectItem value=\"true\">Active</SelectItem>\n          <SelectItem value=\"false\">Inactive</SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n\n/**\n * Reusable Sort Control Component\n *\n * Generic sort by field + direction control.\n */\ninterface SortOption {\n  value: string;\n  label: string;\n}\n\ninterface SortControlProps {\n  sortByOptions: SortOption[];\n  sortBy: string;\n  sortOrder: \"asc\" | \"desc\";\n  onSortByChange: (value: string) => void;\n  onSortOrderChange: (value: \"asc\" | \"desc\") => void;\n  disabled?: boolean;\n}\n\nexport function SortControl({\n  sortByOptions,\n  sortBy,\n  sortOrder,\n  onSortByChange,\n  onSortOrderChange,\n  disabled = false,\n}: SortControlProps) {\n  return (\n    <div className=\"flex items-center gap-2 rounded-md border h-10 px-3 bg-background w-full sm:w-auto\">\n      <span className=\"text-sm text-muted-foreground whitespace-nowrap\">\n        Sort:\n      </span>\n      <Select value={sortBy} onValueChange={onSortByChange} disabled={disabled}>\n        <SelectTrigger className=\"w-full sm:w-[120px] h-full border-0 shadow-none focus:ring-0 px-0\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          {sortByOptions.map((option) => (\n            <SelectItem key={option.value} value={option.value}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n\n      <Select\n        value={sortOrder}\n        onValueChange={onSortOrderChange}\n        disabled={disabled}\n      >\n        <SelectTrigger className=\"w-full sm:w-[100px] h-full border-0 shadow-none focus:ring-0 px-0\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"asc\">A → Z</SelectItem>\n          <SelectItem value=\"desc\">Z → A</SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n\n/**\n * Generic Select Filter Component\n *\n * Reusable for any entity filter (e.g., Semester, Subject, Room, etc.)\n */\ninterface SelectFilterProps<T extends string | number> {\n  label: string;\n  value: T | undefined | \"all\";\n  options: Array<{ value: T; label: string }>;\n  onChange: (value: T | undefined) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport function SelectFilter<T extends string | number>({\n  label,\n  value,\n  options,\n  onChange,\n  placeholder = \"Select...\",\n  disabled = false,\n  className = \"w-full sm:w-[180px]\",\n}: SelectFilterProps<T>) {\n  const handleChange = (val: string) => {\n    if (val === \"all\") {\n      onChange(undefined);\n    } else {\n      onChange(val as T);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-2 rounded-md border h-10 px-3 bg-background w-full sm:w-auto\">\n      <span className=\"text-sm text-muted-foreground whitespace-nowrap\">\n        {label}:\n      </span>\n      <Select\n        value={value === undefined ? \"all\" : String(value)}\n        onValueChange={handleChange}\n        disabled={disabled}\n      >\n        <SelectTrigger\n          className={`${className} h-full border-0 shadow-none focus:ring-0 px-0`}\n        >\n          <SelectValue placeholder={placeholder} />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"all\">All</SelectItem>\n          {options.map((option) => (\n            <SelectItem key={String(option.value)} value={String(option.value)}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\generic-data-table.tsx",
      "relative_path": "components/shared/generic-data-table.tsx",
      "filename": "generic-data-table.tsx",
      "size_bytes": 4470,
      "lines": 152,
      "last_modified": "2025-11-28T09:21:56.252978",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  getSortedRowModel,\n  SortingState,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport { useState } from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\n/**\n * Generic Data Table Component\n *\n * Reusable table component that can be used across Admin, Lecturer, and Supervisor roles.\n * Supports sorting, loading states, and empty states.\n *\n * @example\n * ```tsx\n * <GenericDataTable\n *   columns={slotColumns}\n *   data={slots}\n *   isLoading={isLoading}\n *   emptyMessage=\"No slots found\"\n * />\n * ```\n */\n\ninterface GenericDataTableProps<TData> {\n  columns: ColumnDef<TData>[];\n  data: TData[];\n  isLoading?: boolean;\n  emptyMessage?: string;\n  minWidth?: string;\n  fixedRowCount?: number; // For fixed-height table (fills empty rows)\n}\n\nexport function GenericDataTable<TData>({\n  columns,\n  data,\n  isLoading = false,\n  emptyMessage = \"No data available\",\n  minWidth = \"900px\",\n  fixedRowCount,\n}: GenericDataTableProps<TData>) {\n  const [sorting, setSorting] = useState<SortingState>([]);\n\n  const table = useReactTable({\n    data,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    onSortingChange: setSorting,\n    state: {\n      sorting,\n    },\n  });\n\n  return (\n    <div className=\"rounded-md border bg-background overflow-x-auto\">\n      <Table style={{ minWidth }}>\n        <TableHeader>\n          {table.getHeaderGroups().map((headerGroup) => (\n            <TableRow key={headerGroup.id}>\n              {headerGroup.headers.map((header) => (\n                <TableHead key={header.id} className=\"whitespace-nowrap\">\n                  {header.isPlaceholder\n                    ? null\n                    : flexRender(\n                        header.column.columnDef.header,\n                        header.getContext()\n                      )}\n                </TableHead>\n              ))}\n            </TableRow>\n          ))}\n        </TableHeader>\n        <TableBody>\n          {isLoading ? (\n            // Loading state - show skeleton rows\n            <TableRow>\n              <TableCell\n                colSpan={columns.length}\n                className=\"h-64 text-center text-muted-foreground\"\n              >\n                <div className=\"flex flex-col items-center justify-center gap-2\">\n                  <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent\" />\n                  <p>Loading...</p>\n                </div>\n              </TableCell>\n            </TableRow>\n          ) : table.getRowModel().rows?.length ? (\n            // Data rows\n            <>\n              {table.getRowModel().rows.map((row) => (\n                <TableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && \"selected\"}\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell key={cell.id}>\n                      {flexRender(\n                        cell.column.columnDef.cell,\n                        cell.getContext()\n                      )}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))}\n              {/* Fill empty rows for fixed height table */}\n              {fixedRowCount &&\n                Array.from({\n                  length: Math.max(0, fixedRowCount - data.length),\n                }).map((_, index) => (\n                  <TableRow\n                    key={`empty-${index}`}\n                    className=\"hover:bg-transparent\"\n                  >\n                    <TableCell\n                      colSpan={columns.length}\n                      className=\"h-[57px] text-muted-foreground/30\"\n                    >\n                      &nbsp;\n                    </TableCell>\n                  </TableRow>\n                ))}\n            </>\n          ) : (\n            // Empty state\n            <TableRow>\n              <TableCell\n                colSpan={columns.length}\n                className=\"h-64 text-center text-muted-foreground\"\n              >\n                {emptyMessage}\n              </TableCell>\n            </TableRow>\n          )}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\generic-pagination.tsx",
      "relative_path": "components/shared/generic-pagination.tsx",
      "filename": "generic-pagination.tsx",
      "size_bytes": 4773,
      "lines": 164,
      "last_modified": "2025-11-28T09:21:56.252978",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "import {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\n/**\n * Generic Pagination Component\n *\n * Reusable pagination component for data tables.\n * Supports intelligent page number display with ellipsis.\n *\n * @example\n * ```tsx\n * <GenericPagination\n *   currentPage={1}\n *   totalPages={10}\n *   onPageChange={(page) => setPage(page)}\n * />\n * ```\n */\n\ninterface GenericPaginationProps {\n  currentPage: number;\n  totalPages: number;\n  totalItems?: number;\n  pageSize?: number;\n  onPageChange: (page: number) => void;\n  disabled?: boolean;\n  showInfo?: boolean; // Show \"Showing X-Y of Z items\"\n}\n\nexport function GenericPagination({\n  currentPage,\n  totalPages,\n  totalItems,\n  pageSize,\n  onPageChange,\n  disabled = false,\n  showInfo = false,\n}: GenericPaginationProps) {\n  const generatePageNumbers = () => {\n    const pages: (number | \"ellipsis\")[] = [];\n\n    if (totalPages <= 7) {\n      // Show all pages if 7 or fewer\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // Smart pagination with ellipsis\n      if (currentPage <= 4) {\n        // Near the start: [1] [2] [3] [4] [5] ... [last]\n        for (let i = 1; i <= 5; i++) {\n          pages.push(i);\n        }\n        pages.push(\"ellipsis\");\n        pages.push(totalPages);\n      } else if (currentPage >= totalPages - 3) {\n        // Near the end: [1] ... [last-4] [last-3] [last-2] [last-1] [last]\n        pages.push(1);\n        pages.push(\"ellipsis\");\n        for (let i = totalPages - 4; i <= totalPages; i++) {\n          pages.push(i);\n        }\n      } else {\n        // In the middle: [1] ... [current-1] [current] [current+1] ... [last]\n        pages.push(1);\n        pages.push(\"ellipsis\");\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) {\n          pages.push(i);\n        }\n        pages.push(\"ellipsis\");\n        pages.push(totalPages);\n      }\n    }\n\n    return pages;\n  };\n\n  const pageNumbers = generatePageNumbers();\n\n  // Calculate item range for info text\n  const getItemRange = () => {\n    if (!totalItems || !pageSize) return null;\n    const start = (currentPage - 1) * pageSize + 1;\n    const end = Math.min(currentPage * pageSize, totalItems);\n    return { start, end };\n  };\n\n  const itemRange = showInfo ? getItemRange() : null;\n\n  return (\n    <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n      {/* Info text (optional) */}\n      {showInfo && itemRange && totalItems && (\n        <div className=\"text-sm text-muted-foreground\">\n          Showing <span className=\"font-medium\">{itemRange.start}</span> to{\" \"}\n          <span className=\"font-medium\">{itemRange.end}</span> of{\" \"}\n          <span className=\"font-medium\">{totalItems}</span> items\n        </div>\n      )}\n\n      {/* Pagination controls */}\n      <Pagination>\n        <PaginationContent>\n          <PaginationItem>\n            <PaginationPrevious\n              onClick={() =>\n                !disabled && currentPage > 1 && onPageChange(currentPage - 1)\n              }\n              className={\n                disabled || currentPage === 1\n                  ? \"pointer-events-none opacity-50\"\n                  : \"cursor-pointer\"\n              }\n            />\n          </PaginationItem>\n\n          {pageNumbers.map((page, index) =>\n            page === \"ellipsis\" ? (\n              <PaginationItem key={`ellipsis-${index}`}>\n                <PaginationEllipsis />\n              </PaginationItem>\n            ) : (\n              <PaginationItem key={page}>\n                <PaginationLink\n                  onClick={() => !disabled && onPageChange(page)}\n                  isActive={currentPage === page}\n                  className={\n                    disabled\n                      ? \"pointer-events-none opacity-50\"\n                      : \"cursor-pointer\"\n                  }\n                >\n                  {page}\n                </PaginationLink>\n              </PaginationItem>\n            )\n          )}\n\n          <PaginationItem>\n            <PaginationNext\n              onClick={() =>\n                !disabled &&\n                currentPage < totalPages &&\n                onPageChange(currentPage + 1)\n              }\n              className={\n                disabled || currentPage >= totalPages\n                  ? \"pointer-events-none opacity-50\"\n                  : \"cursor-pointer\"\n              }\n            />\n          </PaginationItem>\n        </PaginationContent>\n      </Pagination>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\language-switcher.tsx",
      "relative_path": "components/shared/language-switcher.tsx",
      "filename": "language-switcher.tsx",
      "size_bytes": 1269,
      "lines": 44,
      "last_modified": "2025-11-28T09:21:56.253984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "'use client';\n\nimport { useLocale } from 'next-intl';\nimport { useTransition } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Languages } from 'lucide-react';\n\nexport function LanguageSwitcher() {\n  const locale = useLocale();\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n\n  const switchLocale = (newLocale: string) => {\n    // Set cookie for locale persistence\n    document.cookie = `NEXT_LOCALE=${newLocale}; path=/; max-age=31536000`; // 1 year\n\n    // Refresh to apply new locale\n    startTransition(() => {\n      router.refresh();\n    });\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Languages className=\"h-4 w-4 text-muted-foreground\" />\n      <Select value={locale} onValueChange={switchLocale} disabled={isPending}>\n        <SelectTrigger className=\"w-[140px] h-9\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"en\">English</SelectItem>\n          <SelectItem value=\"vi\">Tiếng Việt</SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\mobile-sidebar.tsx",
      "relative_path": "components/shared/mobile-sidebar.tsx",
      "filename": "mobile-sidebar.tsx",
      "size_bytes": 4772,
      "lines": 157,
      "last_modified": "2025-11-28T09:21:56.253984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useTranslations } from 'next-intl';\nimport { cn } from \"@/lib/utils\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useSidebar } from \"./sidebar-context\";\nimport { RoleMenuConfig, MenuSection, MenuItem } from \"@/types/navigation\";\n\ninterface MobileSidebarProps {\n  menuConfig: RoleMenuConfig;\n}\n\nexport function MobileSidebar({ menuConfig }: MobileSidebarProps) {\n  const { isOpen, close } = useSidebar();\n  const pathname = usePathname();\n  const t = useTranslations('menu.roles');\n\n  const getRoleLabel = (role: string) => {\n    switch (role) {\n      case \"data-operator\":\n        return t('data_operator');\n      case \"lecturer\":\n        return t('lecturer');\n      case \"supervisor\":\n        return t('supervisor');\n      default:\n        return t('portal');\n    }\n  };\n\n  return (\n    <Sheet open={isOpen} onOpenChange={(open) => !open && close()}>\n      <SheetContent side=\"left\" className=\"w-80 p-0\">\n        {/* Header */}\n        <SheetHeader className=\"border-b p-7\">\n          <SheetTitle className=\"sr-only\">Navigation Menu</SheetTitle>\n          <SheetDescription className=\"sr-only\">\n            Main navigation menu for {menuConfig.role}\n          </SheetDescription>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex h-8 w-8 items-center justify-center rounded-md bg-primary text-primary-foreground\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"h-4 w-4\"\n              >\n                <rect width=\"7\" height=\"7\" x=\"3\" y=\"3\" rx=\"1\" />\n                <rect width=\"7\" height=\"7\" x=\"14\" y=\"3\" rx=\"1\" />\n                <rect width=\"7\" height=\"7\" x=\"14\" y=\"14\" rx=\"1\" />\n                <rect width=\"7\" height=\"7\" x=\"3\" y=\"14\" rx=\"1\" />\n              </svg>\n            </div>\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-semibold\">FUACS</span>\n              <span className=\"text-xs text-muted-foreground\">\n                {getRoleLabel(menuConfig.role)}\n              </span>\n            </div>\n          </div>\n        </SheetHeader>\n\n        {/* Navigation Menu */}\n        <ScrollArea className=\"h-[calc(100vh-64px)] px-3 py-4\">\n          <nav className=\"space-y-6\">\n            {menuConfig.sections.map((section) => (\n              <SidebarSection\n                key={section.id}\n                section={section}\n                pathname={pathname}\n                onNavigate={close}\n              />\n            ))}\n          </nav>\n        </ScrollArea>\n      </SheetContent>\n    </Sheet>\n  );\n}\n\ninterface SidebarSectionProps {\n  section: MenuSection;\n  pathname: string;\n  onNavigate: () => void;\n}\n\nfunction SidebarSection({\n  section,\n  pathname,\n  onNavigate,\n}: SidebarSectionProps) {\n  const t = useTranslations('menu.sections');\n\n  return (\n    <div className=\"space-y-1\">\n      <h3 className=\"px-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground\">\n        {t(section.id)}\n      </h3>\n      <div className=\"space-y-0.5\">\n        {section.items.map((item) => (\n          <SidebarMenuItem\n            key={item.id}\n            item={item}\n            pathname={pathname}\n            onNavigate={onNavigate}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface SidebarMenuItemProps {\n  item: MenuItem;\n  pathname: string;\n  onNavigate: () => void;\n}\n\nfunction SidebarMenuItem({ item, pathname, onNavigate }: SidebarMenuItemProps) {\n  const isActive = pathname === item.href;\n  const Icon = item.icon;\n  const t = useTranslations('menu.items');\n\n  return (\n    <Link\n      href={item.href}\n      onClick={onNavigate}\n      className={cn(\n        \"flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors\",\n        \"hover:bg-accent hover:text-accent-foreground\",\n        isActive && \"bg-accent text-accent-foreground\"\n      )}\n    >\n      <Icon className=\"h-4 w-4 shrink-0\" />\n      <span className=\"flex-1\">{t(item.id)}</span>\n      {item.badge !== undefined && (\n        <Badge variant=\"destructive\" className=\"h-5 px-1.5 text-xs\">\n          {item.badge}\n        </Badge>\n      )}\n    </Link>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\page-header-context.tsx",
      "relative_path": "components/shared/page-header-context.tsx",
      "filename": "page-header-context.tsx",
      "size_bytes": 1984,
      "lines": 81,
      "last_modified": "2025-11-28T09:21:56.253984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useState,\n  ReactNode,\n  useCallback,\n} from \"react\";\n\ninterface PageHeaderContextType {\n  title: string;\n  subtitle?: string;\n  breadcrumbs?: Array<{ label: string; href?: string }>;\n  actions?: ReactNode;\n  setPageHeader: (config: {\n    title: string;\n    subtitle?: string;\n    breadcrumbs?: Array<{ label: string; href?: string }>;\n    actions?: ReactNode;\n  }) => void;\n  clearPageHeader: () => void;\n}\n\nconst PageHeaderContext = createContext<PageHeaderContextType | undefined>(\n  undefined\n);\n\nexport function PageHeaderProvider({ children }: { children: ReactNode }) {\n  const [title, setTitle] = useState(\"Dashboard\");\n  const [subtitle, setSubtitle] = useState<string | undefined>();\n  const [breadcrumbs, setBreadcrumbs] = useState<\n    Array<{ label: string; href?: string }> | undefined\n  >();\n  const [actions, setActions] = useState<ReactNode>();\n\n  const setPageHeader = useCallback(\n    (config: {\n      title: string;\n      subtitle?: string;\n      breadcrumbs?: Array<{ label: string; href?: string }>;\n      actions?: ReactNode;\n    }) => {\n      setTitle(config.title);\n      setSubtitle(config.subtitle);\n      setBreadcrumbs(config.breadcrumbs);\n      setActions(config.actions);\n    },\n    []\n  );\n\n  const clearPageHeader = useCallback(() => {\n    setTitle(\"Dashboard\");\n    setSubtitle(undefined);\n    setBreadcrumbs(undefined);\n    setActions(undefined);\n  }, []);\n\n  return (\n    <PageHeaderContext.Provider\n      value={{\n        title,\n        subtitle,\n        breadcrumbs,\n        actions,\n        setPageHeader,\n        clearPageHeader,\n      }}\n    >\n      {children}\n    </PageHeaderContext.Provider>\n  );\n}\n\nexport function usePageHeader() {\n  const context = useContext(PageHeaderContext);\n  if (!context) {\n    throw new Error(\"usePageHeader must be used within PageHeaderProvider\");\n  }\n  return context;\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\role-switcher.tsx",
      "relative_path": "components/shared/role-switcher.tsx",
      "filename": "role-switcher.tsx",
      "size_bytes": 2479,
      "lines": 83,
      "last_modified": "2025-11-28T09:21:56.253984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { RotateCcw, User, GraduationCap, Shield, Settings } from \"lucide-react\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\nimport { getRoleBasedRedirectPath } from \"@/lib/auth\";\n\nconst ROLE_ICONS = {\n  LECTURER: GraduationCap,\n  SUPERVISOR: Shield,\n  STUDENT: User,\n  DATA_OPERATOR: Settings,\n} as const;\n\nconst ROLE_LABELS = {\n  LECTURER: \"Lecturer\",\n  SUPERVISOR: \"Supervisor\",\n  STUDENT: \"Student\",\n  DATA_OPERATOR: \"Data Operator\",\n} as const;\n\nexport function RoleSwitcher() {\n  const { user } = useCurrentUser();\n  const router = useRouter();\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Only show if user has more than one role\n  if (!user || !user.roles || user.roles.length <= 1) {\n    return null;\n  }\n\n  const handleRoleSwitch = (role: string) => {\n    const redirectPath = getRoleBasedRedirectPath([role]);\n    setIsOpen(false);\n    router.push(redirectPath);\n  };\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-8 w-8 rounded-md hover:bg-accent\"\n          title=\"Switch Role\"\n        >\n          <RotateCcw className=\"h-4 w-4\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\" className=\"w-48\">\n        <DropdownMenuLabel className=\"text-xs font-medium text-muted-foreground\">\n          Switch to Role\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        {user.roles.map((role) => {\n          const Icon = ROLE_ICONS[role as keyof typeof ROLE_ICONS] || User;\n          const label = ROLE_LABELS[role as keyof typeof ROLE_LABELS] || role;\n\n          return (\n            <DropdownMenuItem\n              key={role}\n              onClick={() => handleRoleSwitch(role)}\n              className=\"flex items-center gap-2 cursor-pointer\"\n            >\n              <Icon className=\"h-4 w-4\" />\n              <span>{label}</span>\n            </DropdownMenuItem>\n          );\n        })}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\shared\\sidebar-context.tsx",
      "relative_path": "components/shared/sidebar-context.tsx",
      "filename": "sidebar-context.tsx",
      "size_bytes": 1582,
      "lines": 69,
      "last_modified": "2025-11-28T09:21:56.253984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  ReactNode,\n} from \"react\";\n\ninterface SidebarContextType {\n  isOpen: boolean;\n  toggle: () => void;\n  open: () => void;\n  close: () => void;\n  isMobile: boolean;\n}\n\nconst SidebarContext = createContext<SidebarContextType | undefined>(undefined);\n\nexport function SidebarProvider({ children }: { children: ReactNode }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    // Check if window is mobile on mount and resize\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 1024);\n    };\n\n    // Check on mount\n    checkMobile();\n\n    // Add resize listener\n    window.addEventListener(\"resize\", checkMobile);\n\n    // Cleanup\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // Auto-close sidebar when switching from mobile to desktop\n  useEffect(() => {\n    if (!isMobile && isOpen) {\n      setIsOpen(false);\n    }\n  }, [isMobile, isOpen]);\n\n  return (\n    <SidebarContext.Provider\n      value={{\n        isOpen,\n        toggle: () => setIsOpen(!isOpen),\n        open: () => setIsOpen(true),\n        close: () => setIsOpen(false),\n        isMobile,\n      }}\n    >\n      {children}\n    </SidebarContext.Provider>\n  );\n}\n\nexport function useSidebar() {\n  const context = useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within SidebarProvider\");\n  }\n  return context;\n}\n"
    }
  ]
}