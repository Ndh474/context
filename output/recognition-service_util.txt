{
  "metadata": {
    "codebase": "recognition-service",
    "category": "util",
    "generated_at": "2025-11-24T20:05:17.527879",
    "total_files": 2,
    "total_lines": 55,
    "total_bytes": 1539
  },
  "files": [
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\recognition-service\\src\\recognition_service\\utils\\__init__.py",
      "relative_path": "src/recognition_service/utils/__init__.py",
      "filename": "__init__.py",
      "size_bytes": 626,
      "lines": 20,
      "last_modified": "2025-11-07T00:58:43.150816",
      "encoding": "utf-8",
      "language": "python",
      "content": "\"\"\"\nUtility modules for face recognition service\n\"\"\"\nfrom datetime import datetime\nimport pytz\n\n\ndef get_utc_timestamp_for_java() -> str:\n    \"\"\"\n    Generate UTC timestamp in ISO 8601 format compatible with Java backend.\n\n    Java backend expects format without fractional seconds based on\n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss'Z'\") annotation.\n\n    Returns:\n        str: Timestamp in format \"2025-11-06T17:51:01Z\" (no milliseconds)\n    \"\"\"\n    now = datetime.now(pytz.UTC)\n    # Format without fractional seconds to match Java @JsonFormat pattern\n    return now.strftime('%Y-%m-%dT%H:%M:%SZ')\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\recognition-service\\src\\recognition_service\\utils\\similarity.py",
      "relative_path": "src/recognition_service/utils/similarity.py",
      "filename": "similarity.py",
      "size_bytes": 913,
      "lines": 35,
      "last_modified": "2025-10-28T12:06:40.522749",
      "encoding": "utf-8",
      "language": "python",
      "content": "\"\"\"\nSimilarity Calculation Utilities\n\"\"\"\n\nimport numpy as np\n\n\ndef cosine_similarity(vec1: np.ndarray, vec2: np.ndarray) -> float:\n    \"\"\"\n    Calculate cosine similarity between two vectors.\n\n    Formula: cos(θ) = (A · B) / (||A|| * ||B||)\n\n    Args:\n        vec1: First embedding vector (numpy array)\n        vec2: Second embedding vector (numpy array)\n\n    Returns:\n        float: Similarity score (0.0 - 1.0), higher = more similar\n\n    Example:\n        >>> vec1 = np.array([1.0, 2.0, 3.0])\n        >>> vec2 = np.array([1.0, 2.0, 3.5])\n        >>> similarity = cosine_similarity(vec1, vec2)\n        >>> print(similarity)  # ~0.998\n    \"\"\"\n    dot_product = np.dot(vec1, vec2)\n    norm1 = np.linalg.norm(vec1)\n    norm2 = np.linalg.norm(vec2)\n\n    if norm1 == 0 or norm2 == 0:\n        return 0.0\n\n    similarity = dot_product / (norm1 * norm2)\n    return float(similarity)\n"
    }
  ]
}