{
  "metadata": {
    "codebase": "frontend-web",
    "category": "component_supervisor",
    "generated_at": "2025-11-28T09:26:42.005899",
    "total_files": 20,
    "total_lines": 3408,
    "total_bytes": 117813
  },
  "files": [
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\exam-slot-info.tsx",
      "relative_path": "components/supervisor/reports/exam-slot-info.tsx",
      "filename": "exam-slot-info.tsx",
      "size_bytes": 4186,
      "lines": 116,
      "last_modified": "2025-11-28T09:21:56.255985",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, Clock, MapPin, User } from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\n\ninterface ExamSlotInfoProps {\n  slotDetail: {\n    slotId: number;\n    title: string;\n    description: string;\n    startTime: string;\n    endTime: string;\n    room: {\n      id: number;\n      name: string;\n      location: string;\n    };\n    staff: {\n      id: number;\n      username: string;\n      email: string;\n      fullName: string;\n    };\n    sessionStatus: \"NOT_STARTED\" | \"SCHEDULED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"CANCELLED\";\n  };\n}\n\nexport function ExamSlotInfo({ slotDetail }: ExamSlotInfoProps) {\n  const t = useTranslations('supervisor.reports_slots.slot_info');\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"COMPLETED\":\n        return <Badge className=\"bg-green-100 text-green-800 hover:bg-green-100\">Completed</Badge>;\n      case \"IN_PROGRESS\":\n        return <Badge className=\"bg-blue-100 text-blue-800 hover:bg-blue-100\">In Progress</Badge>;\n      case \"SCHEDULED\":\n        return <Badge className=\"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\">Scheduled</Badge>;\n      case \"CANCELLED\":\n        return <Badge className=\"bg-red-100 text-red-800 hover:bg-red-100\">Cancelled</Badge>;\n      default:\n        return <Badge variant=\"outline\">{status}</Badge>;\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"text-xl\">{slotDetail.title}</CardTitle>\n            {slotDetail.description && (\n              <p className=\"text-sm text-muted-foreground mt-1\">{slotDetail.description}</p>\n            )}\n          </div>\n          {getStatusBadge(slotDetail.sessionStatus)}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Date & Time */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3\">\n              <Calendar className=\"h-5 w-5 text-muted-foreground\" />\n              <div>\n                <p className=\"font-medium\">{t(\"date\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {format(parseISO(slotDetail.startTime), 'EEEE, MMMM dd, yyyy')}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <Clock className=\"h-5 w-5 text-muted-foreground\" />\n              <div>\n                <p className=\"font-medium\">{t(\"time\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {format(parseISO(slotDetail.startTime), 'HH:mm')} - {format(parseISO(slotDetail.endTime), 'HH:mm')}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Location & Staff */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3\">\n              <MapPin className=\"h-5 w-5 text-muted-foreground\" />\n              <div>\n                <p className=\"font-medium\">{t(\"room\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {slotDetail.room.name}\n                  {slotDetail.room.location && (\n                    <span className=\"block text-xs\">{slotDetail.room.location}</span>\n                  )}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <User className=\"h-5 w-5 text-muted-foreground\" />\n              <div>\n                <p className=\"font-medium\">{t(\"supervisor\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {slotDetail.staff?.fullName || \"N/A\"} ({slotDetail.staff?.username || \"N/A\"})\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\exam-slot-statistics.tsx",
      "relative_path": "components/supervisor/reports/exam-slot-statistics.tsx",
      "filename": "exam-slot-statistics.tsx",
      "size_bytes": 4743,
      "lines": 134,
      "last_modified": "2025-11-28T09:21:56.256985",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Users,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  BarChart3,\n} from \"lucide-react\";\n\ninterface ExamSlotStatisticsProps {\n  statistics: {\n    totalStudents: number;\n    presentCount: number;\n    absentCount: number;\n    lateCount: number;\n  };\n}\n\nexport function ExamSlotStatistics({ statistics }: ExamSlotStatisticsProps) {\n  const t = useTranslations('supervisor.reports_slots.statistics');\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <BarChart3 className=\"h-5 w-5\" />\n          {t(\"title\")}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Total Count */}\n        <div className=\"text-center p-4 bg-muted/50 rounded-lg\">\n          <Users className=\"h-8 w-8 mx-auto mb-2 text-blue-500\" />\n          <p className=\"text-3xl font-bold\">{statistics.totalStudents}</p>\n          <p className=\"text-sm text-muted-foreground\">{t(\"total_students\")}</p>\n        </div>\n\n        {/* Attendance Breakdown */}\n        <div className=\"space-y-3\">\n          <h4 className=\"font-medium text-sm\">{t(\"attendance_breakdown\")}</h4>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                <span className=\"text-sm\">{t(\"present\")}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-medium\">{statistics.presentCount}</span>\n                <span className=\"text-xs text-muted-foreground\">\n                  (\n                  {(\n                    (statistics.presentCount / statistics.totalStudents) *\n                    100\n                  ).toFixed(1)}\n                  %)\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <XCircle className=\"h-4 w-4 text-red-500\" />\n                <span className=\"text-sm\">{t(\"absent\")}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-medium\">{statistics.absentCount}</span>\n                <span className=\"text-xs text-muted-foreground\">\n                  (\n                  {(\n                    (statistics.absentCount / statistics.totalStudents) *\n                    100\n                  ).toFixed(1)}\n                  %)\n                </span>\n              </div>\n            </div>\n\n            {statistics.lateCount > 0 && (\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"h-4 w-4 text-orange-500\" />\n                  <span className=\"text-sm\">{t(\"late\")}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"font-medium\">{statistics.lateCount}</span>\n                  <span className=\"text-xs text-muted-foreground\">\n                    (\n                    {(\n                      (statistics.lateCount / statistics.totalStudents) *\n                      100\n                    ).toFixed(1)}\n                    %)\n                  </span>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Attendance Rate */}\n        <div className=\"pt-3 border-t\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <BarChart3 className=\"h-4 w-4 text-blue-500\" />\n              <span className=\"text-sm font-medium\">{t(\"attendance_rate\")}</span>\n            </div>\n            <span className=\"text-lg font-bold text-blue-600\">\n              {(\n                (statistics.presentCount / statistics.totalStudents) *\n                100\n              ).toFixed(1)}\n              %\n            </span>\n          </div>\n\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n            <div\n              className=\"bg-blue-500 h-2 rounded-full\"\n              style={{\n                width: `${\n                  (statistics.presentCount / statistics.totalStudents) * 100\n                }%`,\n              }}\n            />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\exam-students-list.tsx",
      "relative_path": "components/supervisor/reports/exam-students-list.tsx",
      "filename": "exam-students-list.tsx",
      "size_bytes": 13582,
      "lines": 366,
      "last_modified": "2025-11-28T09:21:56.256985",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { \n  Users, \n  Search, \n  Filter,\n  CheckCircle, \n  XCircle, \n  AlertCircle,\n  MessageSquare,\n  Eye,\n  User,\n  Download\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\nimport { exportExamSlotToExcel, exportStudentListToExcel } from \"@/lib/excel-utils\";\n\ninterface ExamStudentsListProps {\n  students: Array<{\n    studentId: number;\n    rollNumber: string;\n    fullName: string;\n    subjectCode: string;\n    subjectName: string;\n    attendanceId: number;\n    status: \"present\" | \"absent\" | \"late\";\n    method: string;\n    recordedAt: string;\n    checkInTime?: string;\n    remark?: string;\n  }>;\n  subjects: Array<{\n    id: number;\n    name: string;\n    code: string;\n  }>;\n  slotId: number;\n  examSlotData?: {\n    slotId: number;\n    title: string;\n    description: string;\n    startTime: string;\n    endTime: string;\n    room: {\n      id: number;\n      name: string;\n      location: string;\n    };\n    staff: {\n      id: number;\n      username: string;\n      email: string;\n      fullName: string;\n    };\n    sessionStatus: \"NOT_STARTED\" | \"IN_PROGRESS\" | \"COMPLETED\" | \"CANCELLED\";\n    subjects: Array<{\n      id: number;\n      name: string;\n      code: string;\n    }>;\n    students: Array<{\n      studentId: number;\n      rollNumber: string;\n      fullName: string;\n      subjectCode: string;\n      subjectName: string;\n      attendanceId: number;\n      status: \"present\" | \"absent\" | \"late\";\n      method: string;\n      recordedAt: string;\n      checkInTime?: string;\n      remark?: string;\n    }>;\n    statistics: {\n      totalStudents: number;\n      presentCount: number;\n      absentCount: number;\n      lateCount: number;\n    };\n  };\n}\n\nexport function ExamStudentsList({ students, subjects, slotId, examSlotData }: ExamStudentsListProps) {\n  const t = useTranslations('supervisor.reports_slots.students');\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"present\" | \"absent\" | \"late\">(\"all\");\n  const [selectedStudent, setSelectedStudent] = useState<typeof students[0] | null>(null);\n\n  const handleExportExcel = () => {\n    if (examSlotData) {\n      // Export full exam slot data with complete information\n      const fullExamData = {\n        ...examSlotData,\n        subjects,\n        students: filteredStudents\n      };\n      exportExamSlotToExcel(fullExamData);\n    } else {\n      // Fallback to student list only if exam data is not available\n      const examInfo = {\n        slotId,\n        title: `Exam Slot ${slotId}`,\n        date: new Date().toISOString().split('T')[0]\n      };\n      exportStudentListToExcel(filteredStudents, examInfo);\n    }\n  };\n\n  // Filter students\n  const filteredStudents = students.filter(student => {\n    const matchesSearch = \n      student.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.rollNumber.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesStatus = statusFilter === \"all\" || \n      student.status === statusFilter;\n\n    return matchesSearch && matchesStatus;\n  });\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"present\":\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case \"absent\":\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case \"late\":\n        return <AlertCircle className=\"h-4 w-4 text-orange-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"present\":\n        return <Badge className=\"bg-green-100 text-green-800 hover:bg-green-100\">Present</Badge>;\n      case \"absent\":\n        return <Badge className=\"bg-red-100 text-red-800 hover:bg-red-100\">Absent</Badge>;\n      case \"late\":\n        return <Badge className=\"bg-orange-100 text-orange-800 hover:bg-orange-100\">Late</Badge>;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Users className=\"h-5 w-5\" />\n            {t(\"title\", { count: filteredStudents.length })}\n          </CardTitle>\n          <Button onClick={handleExportExcel} variant=\"outline\" size=\"sm\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            {examSlotData ? t(\"export_full_report\") : t(\"export_students\")}\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Filters */}\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          <div className=\"flex-1\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder={t(\"search_placeholder\")}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          <Select value={statusFilter} onValueChange={(value: any) => setStatusFilter(value)}>\n            <SelectTrigger className=\"w-full sm:w-48\">\n              <Filter className=\"h-4 w-4 mr-2\" />\n              <SelectValue placeholder={t(\"filter_by_status\")} />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">{t(\"all_students\")}</SelectItem>\n              <SelectItem value=\"present\">Present</SelectItem>\n              <SelectItem value=\"absent\">Absent</SelectItem>\n              <SelectItem value=\"late\">Late</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Students List */}\n        <div className=\"space-y-3\">\n          {filteredStudents.map((student) => (\n            <div\n              key={student.studentId}\n              className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors\"\n            >\n              <div className=\"flex items-center gap-4 flex-1\">\n                <div className=\"flex items-center gap-2\">\n                  {getStatusIcon(student.status)}\n                  <User className=\"h-4 w-4 text-muted-foreground\" />\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <h4 className=\"font-medium truncate\">{student.fullName}</h4>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {student.subjectCode}\n                    </Badge>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                    <span>{student.rollNumber}</span>\n                    <span>â€¢</span>\n                    <span className=\"truncate\">{student.subjectName}</span>\n                  </div>\n                  \n                  {/* Method */}\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {student.method}\n                    </Badge>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                {/* Remark indicator */}\n                {student.remark && (\n                  <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                    <MessageSquare className=\"h-3 w-3\" />\n                  </div>\n                )}\n                \n                {/* Recorded time */}\n                {student.recordedAt && (\n                  <span className=\"text-xs text-muted-foreground\">\n                    {format(parseISO(student.recordedAt), 'HH:mm')}\n                  </span>\n                )}\n                \n                {/* Check-in time */}\n                {student.checkInTime && (\n                  <span className=\"text-xs text-muted-foreground\">\n                    Check-in: {format(parseISO(student.checkInTime), 'HH:mm')}\n                  </span>\n                )}\n                \n                {/* Status badge */}\n                {getStatusBadge(student.status)}\n                \n                {/* View details button */}\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={() => setSelectedStudent(student)}\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-2xl\">\n                    <DialogHeader>\n                      <DialogTitle>{t(\"student_details\", { name: student.fullName })}</DialogTitle>\n                    </DialogHeader>\n\n                    {selectedStudent && (\n                      <div className=\"space-y-6\">\n                        {/* Student Info */}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div>\n                            <label className=\"text-sm font-medium\">{t(\"roll_number\")}</label>\n                            <p className=\"text-sm text-muted-foreground\">{selectedStudent.rollNumber}</p>\n                          </div>\n                          <div>\n                            <label className=\"text-sm font-medium\">{t(\"subject\")}</label>\n                            <p className=\"text-sm text-muted-foreground\">\n                              {selectedStudent.subjectName} ({selectedStudent.subjectCode})\n                            </p>\n                          </div>\n                          <div>\n                            <label className=\"text-sm font-medium\">{t(\"method\")}</label>\n                            <p className=\"text-sm text-muted-foreground\">{selectedStudent.method}</p>\n                          </div>\n                          <div>\n                            <label className=\"text-sm font-medium\">{t(\"attendance_id\")}</label>\n                            <p className=\"text-sm text-muted-foreground\">{selectedStudent.attendanceId}</p>\n                          </div>\n                        </div>\n\n                        {/* Attendance */}\n                        <div>\n                          <label className=\"text-sm font-medium mb-2 block\">{t(\"attendance_status\")}</label>\n                          <div className=\"flex items-center gap-2\">\n                            {getStatusIcon(selectedStudent.status)}\n                            {getStatusBadge(selectedStudent.status)}\n                            {selectedStudent.recordedAt && (\n                              <span className=\"text-sm text-muted-foreground\">\n                                {t(\"recorded_at\", { date: format(parseISO(selectedStudent.recordedAt), 'MMM dd, yyyy HH:mm') })}\n                              </span>\n                            )}\n                          </div>\n                          {selectedStudent.checkInTime && (\n                            <p className=\"text-sm text-muted-foreground mt-1\">\n                              {t(\"check_in_time\", { date: format(parseISO(selectedStudent.checkInTime), 'MMM dd, yyyy HH:mm') })}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Remark */}\n                        {selectedStudent.remark && (\n                          <div>\n                            <label className=\"text-sm font-medium mb-2 block\">\n                              {t(\"remark\")}\n                            </label>\n                            <div className=\"p-3 border rounded-lg\">\n                              <p className=\"text-sm\">{selectedStudent.remark}</p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </DialogContent>\n                </Dialog>\n              </div>\n            </div>\n          ))}\n          \n          {filteredStudents.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>{t(\"empty_state\")}</p>\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        {filteredStudents.length > 0 && (\n          <div className=\"text-sm text-muted-foreground pt-4 border-t\">\n            {t(\"showing_count\", { filtered: filteredStudents.length, total: students.length })}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\exam-subjects-list.tsx",
      "relative_path": "components/supervisor/reports/exam-subjects-list.tsx",
      "filename": "exam-subjects-list.tsx",
      "size_bytes": 1904,
      "lines": 59,
      "last_modified": "2025-11-28T09:21:56.256985",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { BookOpen, Users } from \"lucide-react\";\n\ninterface ExamSubjectsListProps {\n  subjects: Array<{\n    id: number;\n    name: string;\n    code: string;\n    participantCount: number;\n  }>;\n}\n\nexport function ExamSubjectsList({ subjects }: ExamSubjectsListProps) {\n  const t = useTranslations('supervisor.reports_slots.subjects');\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <BookOpen className=\"h-5 w-5\" />\n          {t(\"title\", { count: subjects.length })}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {subjects.map((subject) => (\n            <div\n              key={subject.id}\n              className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors\"\n            >\n              <div className=\"flex-1\">\n                <h4 className=\"font-medium\">{subject.name}</h4>\n                <p className=\"text-sm text-muted-foreground\">{subject.code}</p>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4 text-muted-foreground\" />\n                <Badge variant=\"outline\">\n                  {subject.participantCount} {t(\"students\")}\n                </Badge>\n              </div>\n            </div>\n          ))}\n\n          {subjects.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <BookOpen className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>{t(\"empty_state\")}</p>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\multi-slot-export-dialog.tsx",
      "relative_path": "components/supervisor/reports/multi-slot-export-dialog.tsx",
      "filename": "multi-slot-export-dialog.tsx",
      "size_bytes": 11998,
      "lines": 292,
      "last_modified": "2025-11-28T09:21:56.256985",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Loader2, Download } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useTranslations } from \"next-intl\";\nimport { format } from \"date-fns\";\nimport { parseVietnamTime, getVietnamNow } from \"@/lib/timezone-utils\";\nimport { useGetSlots } from \"@/hooks/api/useSlots\";\nimport { useGetSemesters } from \"@/hooks/api/useSemesters\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\nimport api from \"@/lib/api-axios\";\nimport { exportMultiSlotsToExcel } from \"@/lib/export-utils/multi-slot-export\";\n\ninterface MultiSlotExportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function MultiSlotExportDialog({ open, onOpenChange }: MultiSlotExportDialogProps) {\n  const t = useTranslations('export_dialog');\n  const tExport = useTranslations('supervisor.reports_slots.export');\n  const [selectedSemester, setSelectedSemester] = useState<number | undefined>();\n  const [selectedSlots, setSelectedSlots] = useState<number[]>([]);\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState({ current: 0, total: 0 });\n  const { user } = useCurrentUser();\n\n  // Fetch semesters\n  const { data: semestersData, isLoading: semestersLoading } = useGetSemesters({\n    pageSize: 100\n  });\n\n  const semesters = useMemo(() => semestersData?.items || [], [semestersData]);\n\n  // Check if semester is current (based on date range)\n  const isCurrentSemester = (semester: any) => {\n    if (!semester.startDate || !semester.endDate) return false;\n    const now = getVietnamNow();\n    const start = parseVietnamTime(semester.startDate + \"T00:00:00\");\n    const end = parseVietnamTime(semester.endDate + \"T23:59:59\");\n    return now >= start && now <= end;\n  };\n\n  // Auto-select current semester when dialog opens\n  useEffect(() => {\n    if (open && semesters.length > 0 && !selectedSemester) {\n      const currentSemester = semesters.find(s => isCurrentSemester(s));\n      if (currentSemester) {\n        setSelectedSemester(currentSemester.id);\n      }\n    }\n  }, [open, semesters, selectedSemester]);\n\n  // Reset selected slots when semester changes\n  useEffect(() => {\n    setSelectedSlots([]);\n  }, [selectedSemester]);\n\n  // Fetch FINAL_EXAM slots\n  const { data: slotsResponse, isLoading: slotsLoading } = useGetSlots({\n    staffUserId: user?.userId,\n    slotCategories: [\"FINAL_EXAM\"],\n    semesterId: selectedSemester,\n    isActive: true,\n    page: 1,\n    pageSize: 100\n  });\n\n  const slots = slotsResponse?.items || [];\n\n  // Handle checkbox toggle\n  const handleToggleSlot = (slotId: number) => {\n    setSelectedSlots(prev => {\n      if (prev.includes(slotId)) {\n        return prev.filter(id => id !== slotId);\n      } else {\n        return [...prev, slotId];\n      }\n    });\n  };\n\n  // Handle export\n  const handleExport = async () => {\n    if (selectedSlots.length === 0) {\n      toast.error(t('error_no_selection'));\n      return;\n    }\n\n    setIsExporting(true);\n    setExportProgress({ current: 0, total: selectedSlots.length });\n\n    try {\n      const results = await Promise.allSettled(\n        selectedSlots.map(async (slotId) => {\n          try {\n            const data = await api.get(`/exam-slots/${slotId}/attendance-report`);\n            setExportProgress(prev => ({ ...prev, current: prev.current + 1 }));\n            return data;\n          } catch (err) {\n            setExportProgress(prev => ({ ...prev, current: prev.current + 1 }));\n            throw err;\n          }\n        })\n      );\n\n      const successfulData = results\n        .filter((r): r is PromiseFulfilledResult<any> => r.status === 'fulfilled')\n        .map(r => r.value);\n\n      const failures = results.filter(r => r.status === 'rejected');\n\n      if (failures.length > 0 && successfulData.length > 0) {\n        toast.warning(t('warning_partial_failure', { count: failures.length, success: successfulData.length }));\n      }\n\n      if (successfulData.length > 0) {\n        try {\n          exportMultiSlotsToExcel(successfulData);\n          toast.success(t('success_export', { count: successfulData.length }));\n          onOpenChange(false);\n          setSelectedSlots([]);\n        } catch (exportError: any) {\n          toast.error(`Export error: ${exportError.message || 'Failed to generate Excel file'}`);\n        }\n      } else {\n        toast.error(t('error_export_failed') + ' No data available from API.');\n      }\n    } catch (error: any) {\n      toast.error(t('error_export_failed') + ` ${error.message || ''}`);\n    } finally {\n      setIsExporting(false);\n      setExportProgress({ current: 0, total: 0 });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-5xl max-h-[85vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{t('title_multi_slot')}</DialogTitle>\n          <DialogDescription>\n            {t('description_slot')}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Semester Select */}\n          <div className=\"space-y-2\">\n            <Label>{t('semester')}</Label>\n            <Select\n              value={selectedSemester?.toString()}\n              onValueChange={(value) => setSelectedSemester(parseInt(value))}\n              disabled={semestersLoading}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t('select_semester')} />\n              </SelectTrigger>\n              <SelectContent>\n                {semesters.map(semester => (\n                  <SelectItem key={semester.id} value={semester.id.toString()}>\n                    {semester.name} {isCurrentSemester(semester) && tExport(\"current\")}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Slot List */}\n          {selectedSemester && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <Label>{t('slot_list', { count: slots.length })}</Label>\n                <span className=\"text-sm text-muted-foreground\">\n                  Selected: {selectedSlots.length}\n                </span>\n              </div>\n\n              {slotsLoading ? (\n                <Card>\n                  <CardHeader className=\"py-8 text-center\">\n                    <Loader2 className=\"h-6 w-6 animate-spin mx-auto text-muted-foreground\" />\n                    <p className=\"text-sm text-muted-foreground mt-2\">{t('loading_slots')}</p>\n                  </CardHeader>\n                </Card>\n              ) : slots.length === 0 ? (\n                <Card>\n                  <CardHeader className=\"py-8 text-center text-muted-foreground\">\n                    {t('no_slots')}\n                  </CardHeader>\n                </Card>\n              ) : (\n                <div className=\"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto p-1\">\n                  {slots.map(slot => (\n                    <Card\n                      key={slot.id}\n                      className={`cursor-pointer transition-colors ${\n                        selectedSlots.includes(slot.id) ? 'border-primary bg-primary/5' : 'hover:border-primary/50'\n                      }`}\n                      onClick={() => handleToggleSlot(slot.id)}\n                    >\n                      <CardHeader className=\"p-3\">\n                        <div className=\"flex items-center space-x-3\">\n                          <Checkbox\n                            checked={selectedSlots.includes(slot.id)}\n                            onCheckedChange={() => handleToggleSlot(slot.id)}\n                            onClick={(e) => e.stopPropagation()}\n                          />\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center justify-between gap-2\">\n                              <CardTitle className=\"text-sm font-semibold truncate\">\n                                {slot.title || tExport(\"default_title\")}\n                              </CardTitle>\n                              <Badge variant=\"destructive\" className=\"text-xs shrink-0\">\n                                FINAL_EXAM\n                              </Badge>\n                            </div>\n                            <div className=\"text-xs text-muted-foreground mt-1 space-y-0.5\">\n                              <div>\n                                <span className=\"font-medium\">{tExport(\"date_label\")}</span> {format(parseVietnamTime(slot.startTime), 'dd/MM/yyyy')}\n                              </div>\n                              <div>\n                                <span className=\"font-medium\">{tExport(\"time_label\")}</span> {format(parseVietnamTime(slot.startTime), 'HH:mm')} - {format(parseVietnamTime(slot.endTime), 'HH:mm')}\n                              </div>\n                              {slot.subjects && slot.subjects.length > 0 && (\n                                <div>\n                                  <span className=\"font-medium\">{tExport(\"subject_label\")}</span> {slot.subjects.map(s => s.code).join(', ')}\n                                </div>\n                              )}\n                              {slot.totalStudent !== undefined && (\n                                <div>\n                                  <span className=\"font-medium\">{tExport(\"students_label\")}</span> {slot.totalStudent}\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </CardHeader>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Export Progress */}\n          {isExporting && (\n            <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-md\">\n              <div className=\"flex items-center space-x-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin text-blue-600\" />\n                <span className=\"text-sm text-blue-800\">\n                  {t('loading_data', { current: exportProgress.current, total: exportProgress.total })}\n                </span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isExporting}>\n            {t('cancel')}\n          </Button>\n          <Button\n            onClick={handleExport}\n            disabled={selectedSlots.length === 0 || isExporting}\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n          >\n            {isExporting ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                {t('exporting')}\n              </>\n            ) : (\n              <>\n                <Download className=\"mr-2 h-4 w-4\" />\n                {selectedSlots.length > 0 ? t('export_with_count', { count: selectedSlots.length }) : t('export_button')}\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-accordion-item.tsx",
      "relative_path": "components/supervisor/reports/slot-accordion-item.tsx",
      "filename": "slot-accordion-item.tsx",
      "size_bytes": 5940,
      "lines": 160,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { Slot } from \"@/types\";\nimport { SlotAttendanceTable } from \"./slot-attendance-table\";\nimport { SlotStatsSummary } from \"./slot-stats-summary\";\nimport { formatVietnamTime } from \"@/lib/timezone-utils\";\n\ninterface SlotAccordionItemProps {\n  slot: Slot;\n  attendanceData?: {\n    slotId: number;\n    title: string;\n    subjects: Array<{ id: number; code: string; name: string }>;\n    students: any[];\n    statistics: {\n      totalStudents: number;\n      presentCount: number;\n      absentCount: number;\n      lateCount: number;\n    };\n  };\n  isLoadingAttendance?: boolean;\n  onExpand: (slotId: number, isExpanded: boolean) => void;\n}\n\nexport function SlotAccordionItem({\n  slot,\n  attendanceData,\n  isLoadingAttendance,\n  onExpand,\n}: SlotAccordionItemProps) {\n  const t = useTranslations('supervisor.reports_slots.accordion');\n  const startTime = formatVietnamTime(new Date(slot.startTime), \"HH:mm:ss\");\n  const endTime = formatVietnamTime(new Date(slot.endTime), \"HH:mm:ss\");\n  const date = formatVietnamTime(new Date(slot.startTime), \"dd/MM/yyyy\");\n\n  // Get subjects (from slot.subjects or slot.class.subject)\n  const subjects = slot.subjects || (slot.class?.subject ? [slot.class.subject] : []);\n\n  return (\n    <AccordionItem value={slot.id.toString()} className=\"border rounded-lg bg-card\">\n      <AccordionTrigger\n        className=\"px-4 hover:no-underline\"\n        onClick={(e) => {\n          // Check if accordion is expanding or collapsing\n          const target = e.currentTarget;\n          const isExpanding = target.getAttribute(\"data-state\") !== \"open\";\n          onExpand(slot.id, isExpanding);\n        }}\n      >\n        <div className=\"flex flex-col items-start gap-2 w-full pr-4\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <h3 className=\"font-semibold text-left truncate max-w-[300px] cursor-default\">\n                  {slot.title || t(\"default_title\")}\n                </h3>\n              </TooltipTrigger>\n              <TooltipContent side=\"top\" className=\"max-w-[400px]\">\n                <p className=\"break-words\">{slot.title || t(\"default_title\")}</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n\n          <div className=\"flex flex-wrap items-center gap-3 text-sm text-muted-foreground\">\n            <span>\n              <span className=\"font-medium\">{t(\"time_label\")}</span> {startTime} - {endTime} {date}\n            </span>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Badge variant=\"secondary\">{slot.totalStudent || 0} {t(\"students\")}</Badge>\n            {slot.slotCategory && (\n              <Badge variant=\"outline\">{slot.slotCategory}</Badge>\n            )}\n          </div>\n        </div>\n      </AccordionTrigger>\n\n      <AccordionContent className=\"px-4 pb-4 space-y-4\">\n        {/* Slot Information */}\n        <div className=\"space-y-2 border-b pb-3\">\n          <h4 className=\"text-sm font-semibold\">{t(\"slot_info\")}</h4>\n          <div className=\"space-y-2 text-sm\">\n            <div>\n              <span className=\"text-muted-foreground\">{t(\"room_label\")}</span>{\" \"}\n              <span className=\"font-medium\">\n                {slot.room?.name || t(\"na\")}\n                {slot.room?.location && ` (${slot.room.location})`}\n              </span>\n            </div>\n            {subjects.length > 0 && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-muted-foreground\">{t(\"subject_label\")}</span>\n                <div className=\"flex gap-1 flex-wrap\">\n                  {subjects.map((subject) => (\n                    <TooltipProvider key={subject.id}>\n                      <Tooltip>\n                        <TooltipTrigger asChild>\n                          <Badge\n                            variant=\"outline\"\n                            className=\"text-xs cursor-help\"\n                          >\n                            {subject.code}\n                          </Badge>\n                        </TooltipTrigger>\n                        <TooltipContent side=\"right\">\n                          <p>{subject.name}</p>\n                        </TooltipContent>\n                      </Tooltip>\n                    </TooltipProvider>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Attendance Statistics */}\n        {attendanceData && (\n          <>\n            <SlotStatsSummary statistics={attendanceData.statistics} />\n\n            {/* Attendance Table */}\n            <div>\n              <h4 className=\"text-sm font-semibold mb-3\">{t(\"attendance_records\")}</h4>\n              <SlotAttendanceTable\n                students={attendanceData.students}\n                slotId={attendanceData.slotId}\n                isLoading={isLoadingAttendance}\n              />\n            </div>\n          </>\n        )}\n\n        {isLoadingAttendance && !attendanceData && (\n          <div className=\"text-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto\"></div>\n            <p className=\"text-muted-foreground mt-2\">{t(\"loading_attendance\")}</p>\n          </div>\n        )}\n\n        {!isLoadingAttendance && !attendanceData && (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            {t(\"no_attendance_data\")}\n          </div>\n        )}\n      </AccordionContent>\n    </AccordionItem>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-accordion-list.tsx",
      "relative_path": "components/supervisor/reports/slot-accordion-list.tsx",
      "filename": "slot-accordion-list.tsx",
      "size_bytes": 1978,
      "lines": 75,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Accordion } from \"@/components/ui/accordion\";\nimport { SlotAccordionItem } from \"./slot-accordion-item\";\nimport { Slot } from \"@/types\";\n\ninterface SlotAccordionListProps {\n  slots: Slot[];\n  expandedSlots: Set<number>;\n  attendanceData: any[]; // Array of useQueries results\n  onSlotExpand: (slotId: number, isExpanded: boolean) => void;\n  isLoading?: boolean;\n}\n\nexport function SlotAccordionList({\n  slots,\n  attendanceData,\n  onSlotExpand,\n  isLoading,\n}: SlotAccordionListProps) {\n  const t = useTranslations('supervisor.reports_slots.accordion');\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3\">\n        {Array.from({ length: 3 }).map((_, i) => (\n          <div\n            key={i}\n            className=\"h-24 bg-muted animate-pulse rounded-lg\"\n          />\n        ))}\n      </div>\n    );\n  }\n\n  if (slots.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-muted-foreground text-lg\">\n          {t(\"empty_state\")}\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold\">\n          {t(\"heading\", { count: slots.length })}\n        </h3>\n      </div>\n\n      <Accordion type=\"multiple\" className=\"space-y-2\">\n        {slots.map((slot) => {\n          // Find attendance data for this slot\n          const attendanceQuery = attendanceData.find(\n            (q) => q.data?.slotId === slot.id\n          );\n\n          return (\n            <SlotAccordionItem\n              key={slot.id}\n              slot={slot}\n              attendanceData={attendanceQuery?.data}\n              isLoadingAttendance={attendanceQuery?.isLoading}\n              onExpand={onSlotExpand}\n            />\n          );\n        })}\n      </Accordion>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-attendance-table.tsx",
      "relative_path": "components/supervisor/reports/slot-attendance-table.tsx",
      "filename": "slot-attendance-table.tsx",
      "size_bytes": 12362,
      "lines": 400,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  flexRender,\n  ColumnDef,\n  SortingState,\n} from \"@tanstack/react-table\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { formatVietnamTime } from \"@/lib/timezone-utils\";\nimport { Eye, Search } from \"lucide-react\";\nimport { EvidenceViewerDialog } from \"@/components/admin/slots/evidence-viewer-dialog\";\n\ninterface StudentAttendanceInfo {\n  studentId: number;\n  rollNumber: string;\n  fullName: string;\n  photoUrl?: string;\n  subjectCode: string;\n  subjectName: string;\n  attendanceId?: number | null;\n  status: \"present\" | \"absent\" | \"not_yet\" | null;\n  method?: string | null;\n  recordedAt?: string | null;\n  checkInTime?: string | null;\n  checkOutTime?: string | null;\n  evidence?: {\n    id: number;\n    imageUrl: string;\n    createdAt: string;\n  } | null;\n  remark?: string | null;\n}\n\ninterface SlotAttendanceTableProps {\n  students: StudentAttendanceInfo[];\n  slotId: number;\n  isLoading?: boolean;\n}\n\nexport function SlotAttendanceTable({\n  students,\n  slotId,\n  isLoading,\n}: SlotAttendanceTableProps) {\n  const t = useTranslations('supervisor.reports_slots.attendance_table');\n  const [sorting, setSorting] = useState<SortingState>([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [evidenceDialogOpen, setEvidenceDialogOpen] = useState(false);\n  const [viewStudentUserId, setViewStudentUserId] = useState<number>(0);\n\n  // Filter students based on search query and status\n  const filteredStudents = useMemo(() => {\n    let filtered = students;\n\n    // Filter by search query (roll number or full name)\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase().trim();\n      filtered = filtered.filter(\n        (student) =>\n          student.rollNumber.toLowerCase().includes(query) ||\n          student.fullName.toLowerCase().includes(query)\n      );\n    }\n\n    // Filter by status\n    if (statusFilter !== \"all\") {\n      filtered = filtered.filter((student) => {\n        if (statusFilter === \"not_yet\") {\n          // Not yet means status is null, undefined, empty, or explicitly \"not_yet\"\n          return !student.status || student.status.toLowerCase() === \"not_yet\";\n        }\n        // For other statuses, match exactly (case-insensitive)\n        return student.status?.toLowerCase() === statusFilter.toLowerCase();\n      });\n    }\n\n    return filtered;\n  }, [students, searchQuery, statusFilter]);\n\n  const getStatusBadge = (status: string | null) => {\n    // Backend returns lowercase status: \"present\", \"absent\", \"not_yet\"\n    const normalizedStatus = status?.toLowerCase();\n\n    switch (normalizedStatus) {\n      case \"present\":\n        return (\n          <Badge variant=\"default\" className=\"bg-green-500 hover:bg-green-600\">\n            Present\n          </Badge>\n        );\n      case \"absent\":\n        return <Badge variant=\"destructive\">Absent</Badge>;\n      case \"not_yet\":\n        return (\n          <Badge variant=\"outline\" className=\"text-muted-foreground\">\n            Not Yet\n          </Badge>\n        );\n      default:\n        // null or undefined\n        return (\n          <Badge variant=\"outline\" className=\"text-muted-foreground\">\n            Not Yet\n          </Badge>\n        );\n    }\n  };\n\n  const columns: ColumnDef<StudentAttendanceInfo>[] = useMemo(\n    () => [\n      {\n        id: \"id\",\n        header: () => <div className=\"text-center\">{t(\"column_id\")}</div>,\n        cell: ({ row }) => (\n          <div className=\"text-center\">\n            <span className=\"font-medium\">{row.index + 1}</span>\n          </div>\n        ),\n      },\n      {\n        accessorKey: \"rollNumber\",\n        header: () => <div className=\"text-center\">{t(\"column_roll_number\")}</div>,\n        cell: ({ row }) => (\n          <div className=\"text-center\">\n            <span className=\"font-medium\">{row.getValue(\"rollNumber\")}</span>\n          </div>\n        ),\n      },\n      {\n        accessorKey: \"fullName\",\n        header: () => <div className=\"text-center\">{t(\"column_full_name\")}</div>,\n        cell: ({ row }) => (\n          <div className=\"text-center\">{row.getValue(\"fullName\")}</div>\n        ),\n      },\n      {\n        id: \"subject\",\n        header: () => <div className=\"text-center\">{t(\"column_subject\")}</div>,\n        cell: ({ row }) => {\n          const subjectCode = row.original.subjectCode;\n          const subjectName = row.original.subjectName;\n          return (\n            <div className=\"flex justify-center\">\n              <TooltipProvider>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Badge variant=\"outline\" className=\"text-xs cursor-help\">\n                      {subjectCode}\n                    </Badge>\n                  </TooltipTrigger>\n                  <TooltipContent side=\"right\">\n                    <p>{subjectName}</p>\n                  </TooltipContent>\n                </Tooltip>\n              </TooltipProvider>\n            </div>\n          );\n        },\n      },\n      {\n        accessorKey: \"status\",\n        header: () => <div className=\"text-center\">{t(\"column_status\")}</div>,\n        cell: ({ row }) => (\n          <div className=\"flex justify-center\">\n            {getStatusBadge(row.getValue(\"status\"))}\n          </div>\n        ),\n      },\n      {\n        id: \"checkInTime\",\n        header: () => <div className=\"text-center\">{t(\"column_check_in_time\")}</div>,\n        cell: ({ row }) => {\n          const checkInTime = row.original.checkInTime;\n          if (!checkInTime) {\n            return (\n              <div className=\"text-center\">\n                <span className=\"text-muted-foreground\">-</span>\n              </div>\n            );\n          }\n          try {\n            return (\n              <div className=\"text-center\">\n                {formatVietnamTime(new Date(checkInTime), \"HH:mm:ss\")}\n              </div>\n            );\n          } catch {\n            return (\n              <div className=\"text-center\">\n                <span className=\"text-muted-foreground\">-</span>\n              </div>\n            );\n          }\n        },\n      },\n      {\n        id: \"evidence\",\n        header: () => <div className=\"text-center\">{t(\"column_evidence\")}</div>,\n        cell: ({ row }) => {\n          const evidence = row.original.evidence;\n\n          if (!evidence?.imageUrl) {\n            return (\n              <div className=\"text-center\">\n                <span className=\"text-muted-foreground\">-</span>\n              </div>\n            );\n          }\n          return (\n            <div className=\"flex justify-center\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => {\n                  setViewStudentUserId(row.original.studentId);\n                  setEvidenceDialogOpen(true);\n                }}\n              >\n                <Eye className=\"h-4 w-4 mr-1\" />\n                {t(\"view\")}\n              </Button>\n            </div>\n          );\n        },\n      },\n      {\n        accessorKey: \"remark\",\n        header: () => <div className=\"text-center\">{t(\"column_remark\")}</div>,\n        cell: ({ row }) => {\n          const remark = row.getValue(\"remark\") as string | null;\n          if (!remark) {\n            return (\n              <div className=\"text-center\">\n                <span className=\"text-muted-foreground\">-</span>\n              </div>\n            );\n          }\n\n          // Truncate long remarks\n          const maxLength = 50;\n          const truncated = remark.length > maxLength\n            ? remark.substring(0, maxLength) + \"...\"\n            : remark;\n\n          return (\n            <div className=\"text-center\">\n              <TooltipProvider>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <span className=\"text-sm italic cursor-help\">{truncated}</span>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"max-w-md\">\n                    <p className=\"text-sm\">{remark}</p>\n                  </TooltipContent>\n                </Tooltip>\n              </TooltipProvider>\n            </div>\n          );\n        },\n      },\n    ],\n    [t]\n  );\n\n  const table = useReactTable({\n    data: filteredStudents,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    onSortingChange: setSorting,\n    state: {\n      sorting,\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3\">\n        {Array.from({ length: 5 }).map((_, i) => (\n          <div\n            key={i}\n            className=\"h-12 bg-muted animate-pulse rounded\"\n          />\n        ))}\n      </div>\n    );\n  }\n\n  if (students.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-muted-foreground\">\n        {t(\"empty_state\")}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-3 mb-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder={t(\"search_placeholder\")}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-full sm:w-[180px]\">\n            <SelectValue placeholder={t(\"filter_by_status\")} />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">{t(\"all_status\")}</SelectItem>\n            <SelectItem value=\"present\">Present</SelectItem>\n            <SelectItem value=\"absent\">Absent</SelectItem>\n            <SelectItem value=\"not_yet\">Not Yet</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {filteredStudents.length === 0 ? (\n        <div className=\"text-center py-8 text-muted-foreground border rounded-md\">\n          {t(\"no_match\")}\n        </div>\n      ) : (\n        <div className=\"rounded-md border\">\n          <Table>\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? null\n                      : flexRender(\n                          header.column.columnDef.header,\n                          header.getContext()\n                        )}\n                  </TableHead>\n                ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {table.getRowModel().rows.map((row) => (\n              <TableRow key={row.id}>\n                {row.getVisibleCells().map((cell) => (\n                  <TableCell key={cell.id}>\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        </div>\n      )}\n\n      {/* Evidence Viewer Dialog */}\n      <EvidenceViewerDialog\n        open={evidenceDialogOpen}\n        onOpenChange={setEvidenceDialogOpen}\n        slotId={slotId}\n        studentUserId={viewStudentUserId}\n        attendanceType=\"EXAM\"\n      />\n    </>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-detail-container.tsx",
      "relative_path": "components/supervisor/reports/slot-detail-container.tsx",
      "filename": "slot-detail-container.tsx",
      "size_bytes": 4762,
      "lines": 148,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  AlertCircle,\n  Download,\n  ArrowLeft\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { ExamSlotInfo } from \"@/components/supervisor/reports/exam-slot-info\";\nimport { ExamSubjectsList } from \"@/components/supervisor/reports/exam-subjects-list\";\nimport { ExamStudentsList } from \"@/components/supervisor/reports/exam-students-list\";\nimport { ExamSlotStatistics } from \"@/components/supervisor/reports/exam-slot-statistics\";\n\nimport { exportExamSlotToExcel } from \"@/lib/excel-utils\";\nimport { useExamSlotDetail } from \"@/hooks/api/useExamSlotDetail\";\n\n\n\ninterface SupervisorSlotDetailContainerProps {\n  slotId: number;\n}\n\nexport function SupervisorSlotDetailContainer({ slotId }: SupervisorSlotDetailContainerProps) {\n  const t = useTranslations('supervisor.reports_slots.detail');\n  const router = useRouter();\n  \n  // Use API hook to fetch exam slot detail\n  const { \n    data: slotDetail, \n    isLoading: loading, \n    error: queryError,\n    refetch: refetchSlotDetail\n  } = useExamSlotDetail(slotId);\n\n  const error = queryError?.message || null;\n\n\n\n  const handleBack = () => {\n    router.push(\"/supervisor/reports/slots\");\n  };\n\n  const handleExportReport = () => {\n    if (!slotDetail) return;\n    \n    try {\n      exportExamSlotToExcel(slotDetail);\n    } catch (error) {\n      console.error(\"Failed to export report:\", error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-6 space-y-6\">\n        <div className=\"flex items-center gap-4\">\n          <Skeleton className=\"h-10 w-20\" />\n          <Skeleton className=\"h-8 w-64\" />\n        </div>\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            <Skeleton className=\"h-48 w-full\" />\n            <Skeleton className=\"h-64 w-full\" />\n          </div>\n          <div className=\"space-y-6\">\n            <Skeleton className=\"h-32 w-full\" />\n            <Skeleton className=\"h-48 w-full\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !slotDetail) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <Button variant=\"outline\" onClick={handleBack}>\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            {t(\"back_to_slots\")}\n          </Button>\n        </div>\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <AlertCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">{t(\"failed_to_load\")}</h3>\n            <p className=\"text-muted-foreground mb-4\">{error}</p>\n            <Button onClick={() => refetchSlotDetail()}>{t(\"try_again\")}</Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      {/* Header Actions */}\n      <div className=\"flex items-center justify-between\">\n        <Button variant=\"outline\" onClick={handleBack}>\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          {t(\"back_to_slots\")}\n        </Button>\n\n        <Button onClick={handleExportReport} disabled={!slotDetail}>\n          <Download className=\"h-4 w-4 mr-2\" />\n          {t(\"export_report\")}\n        </Button>\n      </div>\n\n\n\n      {/* Main Content */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Column - Main Content */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Slot Information */}\n          <ExamSlotInfo slotDetail={slotDetail} />\n          \n          {/* Students List */}\n          <ExamStudentsList \n            students={slotDetail.students}\n            subjects={slotDetail.subjects}\n            slotId={slotId}\n            examSlotData={slotDetail as any}\n          />\n        </div>\n\n        {/* Right Column - Sidebar */}\n        <div className=\"space-y-6\">\n          {/* Statistics */}\n          <ExamSlotStatistics statistics={slotDetail.statistics} />\n          \n          {/* Subjects List */}\n          <ExamSubjectsList subjects={slotDetail.subjects.map(subject => ({\n            ...subject,\n            participantCount: slotDetail.students.filter(student => student.subjectCode === subject.code).length\n          }))} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default SupervisorSlotDetailContainer;"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-reports-container.tsx",
      "relative_path": "components/supervisor/reports/slot-reports-container.tsx",
      "filename": "slot-reports-container.tsx",
      "size_bytes": 3205,
      "lines": 100,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useQueries } from \"@tanstack/react-query\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\nimport { useGetSlots } from \"@/hooks/api/useSlots\";\nimport { useGetSemesters } from \"@/hooks/api/useSemesters\";\nimport api from \"@/lib/api-axios\";\n\nimport { SlotSemesterFilter } from \"./slot-semester-filter\";\nimport { SlotAccordionList } from \"./slot-accordion-list\";\nimport { MultiSlotExportDialog } from \"./multi-slot-export-dialog\";\n\n/**\n * Supervisor Slot Reports Container\n *\n * Main container for exam supervision reports and analytics.\n * Provides semester filtering and accordion-based slot reports with lazy loading.\n */\nexport function SupervisorSlotReportsContainer() {\n  const { user } = useCurrentUser();\n\n  // State\n  const [selectedSemester, setSelectedSemester] = useState<number | undefined>();\n  const [expandedSlots, setExpandedSlots] = useState<Set<number>>(new Set());\n  const [exportDialogOpen, setExportDialogOpen] = useState(false);\n\n  // Fetch semesters (get all semesters, not just active ones)\n  // Use large pageSize to get all semesters for dropdown\n  const { data: semestersData, isLoading: semestersLoading } = useGetSemesters({\n    pageSize: 100,\n  });\n\n  // Fetch slots (filtered by semester + FINAL_EXAM)\n  const { data: slotsResponse, isLoading: slotsLoading } = useGetSlots({\n    staffUserId: user?.userId,\n    slotCategories: [\"FINAL_EXAM\"],\n    semesterId: selectedSemester,\n    sortBy: \"startTime\",\n    sort: \"desc\",\n    page: 1,\n    pageSize: 100,\n  });\n\n  const slots = slotsResponse?.items || [];\n  const semesters = semestersData?.items || [];\n\n  // Lazy load attendance for expanded slots\n  const attendanceQueries = useQueries({\n    queries: Array.from(expandedSlots).map((slotId) => ({\n      queryKey: [\"exam-attendance\", slotId],\n      queryFn: async () => {\n        const response = await api.get(`/exam-slots/${slotId}/attendance-report`);\n        return response;\n      },\n      enabled: expandedSlots.has(slotId),\n      staleTime: 1000 * 60 * 5, // 5 minutes\n    })),\n  });\n\n  const handleSlotExpand = (slotId: number, isExpanded: boolean) => {\n    setExpandedSlots((prev) => {\n      const next = new Set(prev);\n      if (isExpanded) {\n        next.add(slotId);\n      } else {\n        next.delete(slotId);\n      }\n      return next;\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Simple semester filter */}\n      <SlotSemesterFilter\n        semesters={semesters}\n        selectedSemester={selectedSemester}\n        onSemesterChange={setSelectedSemester}\n        onExportClick={() => setExportDialogOpen(true)}\n        isLoading={semestersLoading}\n      />\n\n      {/* Accordion list of slots */}\n      <SlotAccordionList\n        slots={slots}\n        expandedSlots={expandedSlots}\n        attendanceData={attendanceQueries}\n        onSlotExpand={handleSlotExpand}\n        isLoading={slotsLoading}\n      />\n\n      {/* Multi-Slot Export Dialog */}\n      <MultiSlotExportDialog\n        open={exportDialogOpen}\n        onOpenChange={setExportDialogOpen}\n      />\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-semester-filter.tsx",
      "relative_path": "components/supervisor/reports/slot-semester-filter.tsx",
      "filename": "slot-semester-filter.tsx",
      "size_bytes": 3742,
      "lines": 118,
      "last_modified": "2025-11-28T09:21:56.257984",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useMemo, useEffect, useRef } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar, Download } from \"lucide-react\";\nimport { parseVietnamTime, getVietnamNow } from \"@/lib/timezone-utils\";\nimport { useTranslations } from \"next-intl\";\n\ninterface Semester {\n  id: number;\n  name: string;\n  code: string;\n  startDate: string;\n  endDate: string;\n  isActive: boolean;\n}\n\ninterface SlotSemesterFilterProps {\n  semesters: Semester[];\n  selectedSemester?: number;\n  onSemesterChange: (semesterId: number | undefined) => void;\n  onExportClick?: () => void;\n  isLoading?: boolean;\n}\n\nexport function SlotSemesterFilter({\n  semesters,\n  selectedSemester,\n  onSemesterChange,\n  onExportClick,\n  isLoading = false,\n}: SlotSemesterFilterProps) {\n  const t = useTranslations('export_dialog');\n  const tFilter = useTranslations('supervisor.reports_slots.semester_filter');\n  const hasAutoSelected = useRef(false);\n\n  // Calculate current semester (start_date <= now <= end_date)\n  const currentSemester = useMemo(() => {\n    if (!semesters || semesters.length === 0) return null;\n\n    const now = getVietnamNow();\n    return semesters.find((s) => {\n      // Parse dates as Vietnam time (startDate/endDate are date-only strings like \"2024-01-15\")\n      const start = parseVietnamTime(s.startDate + \"T00:00:00\");\n      const end = parseVietnamTime(s.endDate + \"T23:59:59\");\n      return now >= start && now <= end;\n    });\n  }, [semesters]);\n\n  // Auto-select current semester ONLY ONCE on initial load\n  useEffect(() => {\n    if (\n      !selectedSemester &&\n      currentSemester &&\n      semesters.length > 0 &&\n      !hasAutoSelected.current\n    ) {\n      hasAutoSelected.current = true;\n      onSemesterChange(currentSemester.id);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentSemester, semesters]);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5\" />\n            {tFilter(\"title\")}\n          </CardTitle>\n          {onExportClick && (\n            <Button\n              onClick={onExportClick}\n              size=\"sm\"\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              <Download className=\"h-4 w-4 mr-2\" />\n              {t('export_multiple_slots')}\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-medium\">{tFilter(\"label\")}</label>\n          <Select\n            value={selectedSemester?.toString() || \"all\"}\n            onValueChange={(value) =>\n              onSemesterChange(value === \"all\" ? undefined : parseInt(value))\n            }\n            disabled={isLoading}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder={tFilter(\"placeholder\")} />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">{tFilter(\"all_semesters\")}</SelectItem>\n              {semesters.map((semester) => (\n                <SelectItem key={semester.id} value={semester.id.toString()}>\n                  {semester.name} ({semester.code})\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\reports\\slot-stats-summary.tsx",
      "relative_path": "components/supervisor/reports/slot-stats-summary.tsx",
      "filename": "slot-stats-summary.tsx",
      "size_bytes": 1588,
      "lines": 59,
      "last_modified": "2025-11-28T09:21:56.259489",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface SlotStatsSummaryProps {\n  statistics: {\n    totalStudents: number;\n    presentCount: number;\n    absentCount: number;\n  };\n}\n\nexport function SlotStatsSummary({ statistics }: SlotStatsSummaryProps) {\n  const t = useTranslations('supervisor.reports_slots.stats');\n  const notYetCount = statistics.totalStudents - statistics.presentCount - statistics.absentCount;\n\n  const statItems = [\n    {\n      title: t(\"total_students\"),\n      value: statistics.totalStudents,\n      color: \"text-blue-600\",\n    },\n    {\n      title: t(\"present\"),\n      value: statistics.presentCount,\n      color: \"text-green-600\",\n    },\n    {\n      title: t(\"absent\"),\n      value: statistics.absentCount,\n      color: \"text-red-600\",\n    },\n    {\n      title: t(\"not_yet\"),\n      value: notYetCount,\n      color: \"text-gray-600\",\n    },\n  ];\n\n  return (\n    <div className=\"space-y-3\">\n      <h4 className=\"text-sm font-semibold\">{t(\"title\")}</h4>\n\n      <div className=\"grid grid-cols-4 gap-3\">\n        {statItems.map((item) => (\n          <Card key={item.title}>\n            <CardContent className=\"p-4\">\n              <div className=\"text-center\">\n                <p className=\"text-xs text-muted-foreground mb-1\">{item.title}</p>\n                <p className={`text-2xl font-bold ${item.color}`}>{item.value}</p>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\schedule\\calendar-week-container.tsx",
      "relative_path": "components/supervisor/schedule/calendar-week-container.tsx",
      "filename": "calendar-week-container.tsx",
      "size_bytes": 8973,
      "lines": 235,
      "last_modified": "2025-11-28T09:21:56.259489",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useMemo } from \"react\";\nimport { useTranslations } from \"next-intl\";\nimport { format, parseISO } from \"date-fns\";\nimport { formatDisplayTime } from \"@/lib/calendar-utils\";\nimport { Slot } from \"@/types\";\nimport { CalendarTimeGrid } from \"@/components/lecturer/calendar/calendar-time-grid\";\nimport { CalendarDayColumn } from \"@/components/lecturer/calendar/calendar-day-column\";\nimport { getWeekDays, getDayOfWeek, isToday } from \"@/lib/calendar-utils\";\nimport { CALENDAR_CONFIG } from \"@/lib/calendar-config\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { cn } from \"@/lib/utils\";\n\ninterface SupervisorCalendarWeekContainerProps {\n  mondayDate: Date;\n  slots: Slot[];\n  isLoading?: boolean;\n  onSlotClick: (slot: Slot) => void;\n}\n\n/**\n * Supervisor Calendar Week Container\n * Main container for exam supervision week view calendar\n * Layout: [Time Grid] [Mon] [Tue] [Wed] [Thu] [Fri] [Sat] [Sun]\n * Focuses on FINAL_EXAM slots only\n */\nexport function SupervisorCalendarWeekContainer({\n  mondayDate,\n  slots,\n  isLoading,\n  onSlotClick,\n}: SupervisorCalendarWeekContainerProps) {\n  const t = useTranslations(\"supervisor.schedule\");\n  const tSupervisor = useTranslations(\"supervisor\");\n  const weekDays = getWeekDays(mondayDate);\n\n  // Group slots by day (0=Monday, 6=Sunday) and sort by time\n  const slotsByDay = useMemo(() => {\n    const grouped: Record<number, Slot[]> = {};\n\n    // Initialize all days\n    for (let i = 0; i < 7; i++) {\n      grouped[i] = [];\n    }\n\n    // Group slots by day\n    slots.forEach((slot) => {\n      // Parse as UTC to avoid timezone issues\n      const slotDate = parseISO(slot.startTime);\n      const dayIndex = getDayOfWeek(slotDate);\n      if (dayIndex >= 0 && dayIndex <= 6) {\n        grouped[dayIndex].push(slot);\n      }\n    });\n\n    // Sort slots within each day by start time\n    Object.keys(grouped).forEach(dayKey => {\n      const dayIndex = parseInt(dayKey);\n      grouped[dayIndex].sort((a, b) => \n        new Date(a.startTime).getTime() - new Date(b.startTime).getTime()\n      );\n    });\n\n    return grouped;\n  }, [slots]);\n\n  // Loading skeleton\n  if (isLoading) {\n    return (\n      <div className=\"rounded-lg border overflow-hidden\">\n        <div className=\"p-8 space-y-4\">\n          <Skeleton className=\"h-8 w-full\" />\n          <Skeleton className=\"h-64 w-full\" />\n          <Skeleton className=\"h-64 w-full\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Desktop View */}\n      <div className=\"hidden lg:block rounded-lg border overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <div className=\"min-w-[900px]\">\n            {/* Header Row - Day Names */}\n            <div className=\"flex bg-muted/50 border-b sticky top-0 z-20\">\n              {/* Time column spacer */}\n              <div\n                className=\"flex-shrink-0 border-r p-3 font-medium text-sm\"\n                style={{ width: `${CALENDAR_CONFIG.TIME_COLUMN_WIDTH}px` }}\n              >\n                {t(\"time\")}\n              </div>\n\n              {/* Day headers */}\n              {weekDays.map((day, index) => {\n                const dayIsToday = isToday(day);\n\n                return (\n                  <div\n                    key={index}\n                    className={cn(\n                      \"flex-1 p-3 text-center border-l\",\n                      dayIsToday && \"bg-emerald-500/10 dark:bg-emerald-500/20 border-emerald-500 dark:border-emerald-400 border-l-2\"\n                    )}\n                  >\n                    <div className=\"font-semibold text-sm\">{format(day, \"EEE\")}</div>\n                    <div\n                      className={cn(\n                        \"text-xs text-muted-foreground\",\n                        dayIsToday && \"text-emerald-700 dark:text-emerald-400 font-semibold\"\n                      )}\n                    >\n                      {format(day, \"MMM d\")}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Body - Time Grid + Day Columns */}\n            <div className=\"flex\">\n              {/* Time Grid */}\n              <CalendarTimeGrid />\n\n              {/* Day Columns */}\n              {weekDays.map((day, index) => {\n                const daySlots = slotsByDay[index] || [];\n                const dayIsToday = isToday(day);\n                const isWeekend = index >= 5;\n\n                return (\n                  <CalendarDayColumn\n                    key={index}\n                    slots={daySlots}\n                    isToday={dayIsToday}\n                    isWeekend={isWeekend}\n                    onSlotClick={onSlotClick}\n                  />\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile/Tablet View - Vertical List */}\n      <div className=\"lg:hidden space-y-4\">\n        {weekDays.map((day, dayIndex) => {\n          const daySlots = slotsByDay[dayIndex] || [];\n          const dayIsToday = isToday(day);\n\n          return (\n            <div\n              key={dayIndex}\n              className={cn(\n                \"rounded-lg border p-4 space-y-3\",\n                dayIsToday && \"border-emerald-500 dark:border-emerald-400 bg-emerald-500/5 dark:bg-emerald-500/10\"\n              )}\n            >\n              {/* Day Header */}\n              <div className={cn(\"flex items-center justify-between\", dayIsToday && \"text-emerald-700 dark:text-emerald-400\")}>\n                <div className=\"font-semibold\">\n                  {format(day, \"EEEE, MMMM d\")}\n                  {dayIsToday && <span className=\"ml-2 text-xs font-normal\">{t(\"today_label\")}</span>}\n                </div>\n                {daySlots.length > 0 && (\n                  <span className=\"text-xs bg-red-500/10 dark:bg-red-500/20 text-red-700 dark:text-red-400 px-2 py-1 rounded-full\">\n                    {daySlots.length === 1\n                      ? t(\"exam_count_singular\", { count: daySlots.length })\n                      : t(\"exam_count_plural\", { count: daySlots.length })}\n                  </span>\n                )}\n              </div>\n\n              {/* Slots for this day */}\n              {daySlots.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {daySlots\n                    .sort((a, b) => new Date(a.startTime).getTime() - new Date(b.startTime).getTime())\n                    .map((slot) => (\n                    <div\n                      key={slot.id}\n                      className=\"cursor-pointer\"\n                      onClick={() => onSlotClick(slot)}\n                    >\n                      <div className=\"rounded-md border-l-4 border-l-red-500 p-3 bg-red-500/10 dark:bg-red-500/20 hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"font-semibold text-sm\">{slot.class?.code || \"EXAM\"}</div>\n                            <div className=\"text-xs text-muted-foreground truncate\">\n                              {slot.class?.subject.name || slot.subjects?.[0]?.name || tSupervisor(\"final_exam\")}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"mt-2 flex items-center justify-between text-xs text-muted-foreground\">\n                          <span className=\"font-medium\">\n                            {formatDisplayTime(slot.startTime)} - {formatDisplayTime(slot.endTime)}\n                          </span>\n                          <span>{slot.room?.name || t(\"slot_detail.tba\")}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-sm text-muted-foreground text-center py-4\">\n                  {t(\"no_exams_scheduled\")}\n                </p>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Summary and Legend */}\n      <div className=\"flex flex-wrap items-center justify-between gap-4 text-sm text-muted-foreground\">\n        <div className=\"flex items-center gap-4\">\n          <span className=\"font-medium\">\n            {t(\"total_slots_week\", { count: slots.length })}\n          </span>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-4 h-4 rounded border-l-4 border-l-red-500 bg-red-500/10 dark:bg-red-500/20\" />\n            <span>{t(\"legend_final_exam\")}</span>\n          </div>\n        </div>\n        <div className=\"text-xs\">\n          {t(\"sorted_hint\")}\n        </div>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\schedule\\schedule-container.tsx",
      "relative_path": "components/supervisor/schedule/schedule-container.tsx",
      "filename": "schedule-container.tsx",
      "size_bytes": 3453,
      "lines": 114,
      "last_modified": "2025-11-28T09:21:56.259489",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\nimport { useGetSlots } from \"@/hooks/api/useSlots\";\n\nimport { SupervisorScheduleHeader } from \"./schedule-header\";\nimport { SupervisorCalendarWeekContainer } from \"./calendar-week-container\";\nimport { SupervisorSlotDetailDialog } from \"./slot-detail-dialog\";\nimport { getWeekRange } from \"@/lib/calendar-utils\";\nimport { format, startOfWeek } from \"date-fns\";\nimport { Slot } from \"@/types\";\nimport { getVietnamNow } from \"@/lib/timezone-utils\";\n\n/**\n * Supervisor Schedule Container\n *\n * Main container component that manages state and data for supervisor schedule view.\n * Handles week navigation, filtering, and slot management.\n */\nexport function SupervisorScheduleContainer() {\n  const { user } = useCurrentUser();\n  const [currentWeekStart, setCurrentWeekStart] = useState(() => {\n    const today = getVietnamNow();\n    return startOfWeek(today, { weekStartsOn: 1 });\n  });\n\n  // Selected slot for detail dialog\n  const [selectedSlot, setSelectedSlot] = useState<Slot | null>(null);\n\n  // Calculate week range\n  const { mondayDate, sundayDate } = useMemo(() =>\n    getWeekRange(currentWeekStart), [currentWeekStart]\n  );\n\n  // Fetch ALL slots for current week\n  const { data: slotsResponse, isLoading: slotsLoading } = useGetSlots({\n    staffUserId: user?.userId,\n    slotCategories: [\"FINAL_EXAM\"], // Only show exam slots for supervisor reports\n    startTimeFrom: format(mondayDate, \"yyyy-MM-dd\"), // Filter by current week\n    startTimeTo: format(sundayDate, \"yyyy-MM-dd\"),\n    isActive: true,\n    page: 1,\n    pageSize: 1000,\n  });\n\n  // Sort slots by start time\n  const slots = useMemo(() => {\n    const items = slotsResponse?.items || [];\n    return [...items].sort((a, b) =>\n      new Date(a.startTime).getTime() - new Date(b.startTime).getTime()\n    );\n  }, [slotsResponse?.items]);\n\n  // Navigation handlers\n  const handlePreviousWeek = () => {\n    setCurrentWeekStart(prev => {\n      const newDate = new Date(prev);\n      newDate.setDate(prev.getDate() - 7);\n      return newDate;\n    });\n  };\n\n  const handleNextWeek = () => {\n    setCurrentWeekStart(prev => {\n      const newDate = new Date(prev);\n      newDate.setDate(prev.getDate() + 7);\n      return newDate;\n    });\n  };\n\n  const handleToday = () => {\n    const today = getVietnamNow();\n    setCurrentWeekStart(startOfWeek(today, { weekStartsOn: 1 }));\n  };\n\n  // Slot handlers\n  const handleSlotClick = (slot: Slot) => {\n    setSelectedSlot(slot);\n  };\n\n  const handleCloseSlotDialog = () => {\n    setSelectedSlot(null);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Schedule Header with Navigation */}\n      <SupervisorScheduleHeader\n        dateRange={{ mondayDate, sundayDate }}\n        onPrevious={handlePreviousWeek}\n        onNext={handleNextWeek}\n        onToday={handleToday}\n      />\n\n      {/* Calendar Container */}\n      <SupervisorCalendarWeekContainer\n        mondayDate={mondayDate}\n        slots={slots}\n        isLoading={slotsLoading}\n        onSlotClick={handleSlotClick}\n      />\n\n      {/* Slot Detail Dialog */}\n      {selectedSlot && (\n        <SupervisorSlotDetailDialog\n          slot={selectedSlot}\n          open={!!selectedSlot}\n          onClose={handleCloseSlotDialog}\n        />\n      )}\n    </div>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\schedule\\schedule-filters.tsx",
      "relative_path": "components/supervisor/schedule/schedule-filters.tsx",
      "filename": "schedule-filters.tsx",
      "size_bytes": 4361,
      "lines": 135,
      "last_modified": "2025-11-28T09:21:56.259489",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { SlidersHorizontal } from \"lucide-react\";\n\ninterface FilterOption {\n  id: number;\n  name: string;\n  code: string;\n}\n\ninterface SupervisorScheduleFiltersProps {\n  selectedSubject?: number;\n  selectedRoom?: number;\n  onSubjectChange: (value: number | undefined) => void;\n  onRoomChange: (value: number | undefined) => void;\n  onClearAll: () => void;\n  subjects: FilterOption[];\n  rooms: FilterOption[];\n  isLoading?: boolean;\n}\n\nexport function SupervisorScheduleFilters({\n  selectedSubject,\n  selectedRoom,\n  onSubjectChange,\n  onRoomChange,\n  onClearAll,\n  subjects,\n  rooms,\n  isLoading = false,\n}: SupervisorScheduleFiltersProps) {\n  const t = useTranslations(\"supervisor.schedule.filters\");\n  const [filtersOpen, setFiltersOpen] = useState(false);\n\n  const hasActiveFilters = !!(selectedSubject || selectedRoom);\n  const activeFilterCount = [selectedSubject, selectedRoom].filter(Boolean).length;\n\n  return (\n    <Popover open={filtersOpen} onOpenChange={setFiltersOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"relative\">\n          <SlidersHorizontal className=\"mr-2 h-4 w-4\" />\n          {t(\"button\")}\n          {hasActiveFilters && (\n            <span className=\"ml-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-primary-foreground text-xs\">\n              {activeFilterCount}\n            </span>\n          )}\n        </Button>\n      </PopoverTrigger>\n\n      <PopoverContent className=\"w-[400px] p-4\" align=\"start\">\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"font-semibold\">{t(\"title\")}</h4>\n            {hasActiveFilters && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClearAll}\n                className=\"h-auto p-0 text-xs\"\n              >\n                {t(\"clear_all\")}\n              </Button>\n            )}\n          </div>\n\n          {/* Subject filter */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">{t(\"subject\")}</label>\n            <Select\n              value={selectedSubject?.toString() || \"all\"}\n              onValueChange={(value) =>\n                onSubjectChange(value === \"all\" ? undefined : parseInt(value))\n              }\n              disabled={isLoading}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t(\"all_subjects\")} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{t(\"all_subjects\")}</SelectItem>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Room filter */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">{t(\"room\")}</label>\n            <Select\n              value={selectedRoom?.toString() || \"all\"}\n              onValueChange={(value) =>\n                onRoomChange(value === \"all\" ? undefined : parseInt(value))\n              }\n              disabled={isLoading}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t(\"all_rooms\")} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{t(\"all_rooms\")}</SelectItem>\n                {rooms.map((room) => (\n                  <SelectItem key={room.id} value={room.id.toString()}>\n                    {room.code} - {room.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\schedule\\schedule-header.tsx",
      "relative_path": "components/supervisor/schedule/schedule-header.tsx",
      "filename": "schedule-header.tsx",
      "size_bytes": 1466,
      "lines": 48,
      "last_modified": "2025-11-28T09:21:56.260495",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { formatWeekRange } from \"@/lib/calendar-utils\";\n\ninterface SupervisorScheduleHeaderProps {\n  dateRange: { mondayDate: Date; sundayDate: Date };\n  onPrevious: () => void;\n  onNext: () => void;\n  onToday: () => void;\n}\n\nexport function SupervisorScheduleHeader({\n  dateRange,\n  onPrevious,\n  onNext,\n  onToday,\n}: SupervisorScheduleHeaderProps) {\n  const t = useTranslations(\"supervisor.schedule\");\n  const { mondayDate, sundayDate } = dateRange;\n  const weekRangeText = formatWeekRange(mondayDate, sundayDate);\n\n  return (\n    <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n      {/* Week range display */}\n      <div className=\"text-xl font-semibold\">{weekRangeText}</div>\n\n      {/* Navigation buttons */}\n      <div className=\"flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={onPrevious}>\n          <ChevronLeft className=\"h-4 w-4 mr-1\" />\n          {t(\"previous\")}\n        </Button>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={onToday}>\n          {t(\"today\")}\n        </Button>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={onNext}>\n          {t(\"next\")}\n          <ChevronRight className=\"h-4 w-4 ml-1\" />\n        </Button>\n      </div>\n    </div>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\schedule\\slot-detail-dialog.tsx",
      "relative_path": "components/supervisor/schedule/slot-detail-dialog.tsx",
      "filename": "slot-detail-dialog.tsx",
      "size_bytes": 7518,
      "lines": 204,
      "last_modified": "2025-11-28T09:21:56.260495",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Calendar,\n  Clock,\n  MapPin,\n  Users,\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\nimport { formatDisplayTime } from \"@/lib/calendar-utils\";\nimport { Slot } from \"@/types\";\nimport Link from \"next/link\";\n\ninterface SupervisorSlotDetailDialogProps {\n  slot: Slot;\n  open: boolean;\n  onClose: () => void;\n}\n\n/**\n * Supervisor Slot Detail Dialog\n *\n * Shows detailed information about an exam slot with:\n * - Exam information (subject, class, time, location)\n * - Attendance statistics (if available)\n * - Quick actions for slot management\n * - Navigation to detailed reports\n */\nexport function SupervisorSlotDetailDialog({\n  slot,\n  open,\n  onClose,\n}: SupervisorSlotDetailDialogProps) {\n  const t = useTranslations(\"supervisor.schedule.slot_detail\");\n  const tSupervisor = useTranslations(\"supervisor\");\n  const startTime = parseISO(slot.startTime);\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">\n            {slot.class?.code || tSupervisor(\"final_exam\")}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Subject info */}\n          <div>\n            <h3 className=\"font-semibold text-lg\">\n              {slot.subjects?.[0]?.name || slot.class?.subject?.name || tSupervisor(\"final_exam\")}\n            </h3>\n            <p className=\"text-sm text-muted-foreground\">\n              {slot.subjects?.[0]?.code || slot.class?.subject?.code || \"\"}\n            </p>\n          </div>\n\n          {/* Date & Time */}\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"flex items-start gap-3\">\n              <Calendar className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium\">{t(\"date\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {format(startTime, \"EEEE, MMMM d, yyyy\")}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3\">\n              <Clock className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium\">{t(\"time\")}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {formatDisplayTime(slot.startTime)} - {formatDisplayTime(slot.endTime)}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Room */}\n          <div className=\"flex items-start gap-3\">\n            <MapPin className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"room\")}</p>\n              <p className=\"text-sm text-muted-foreground\">\n                {slot.room?.name || t(\"tba\")}\n                {slot.room?.location && ` - ${slot.room.location}`}\n              </p>\n            </div>\n          </div>\n\n          {/* Category & Status */}\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\">\n              {slot.slotCategory === \"FINAL_EXAM\" ? tSupervisor(\"final_exam\") : slot.slotCategory}\n            </Badge>\n            {slot.semester && (\n              <Badge variant=\"outline\">{slot.semester.code}</Badge>\n            )}\n            {!slot.isActive && <Badge variant=\"destructive\">{t(\"inactive\")}</Badge>}\n          </div>\n\n          {/* Title & Description */}\n          {slot.title && (\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"title\")}</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">{slot.title}</p>\n            </div>\n          )}\n\n          {slot.description && (\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"description\")}</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {slot.description}\n              </p>\n            </div>\n          )}\n\n          {/* Attendance stats */}\n          {slot.totalStudent > 0 && (\n            <div className=\"border-t pt-4\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Users className=\"h-5 w-5 text-muted-foreground\" />\n                <p className=\"text-sm font-medium\">{t(\"attendance\")}</p>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"text-center p-3 rounded-lg bg-green-50 dark:bg-green-950\">\n                  <p className=\"text-2xl font-bold text-green-700 dark:text-green-400\">\n                    {slot.totalPresentStudent}\n                  </p>\n                  <p className=\"text-xs text-green-600 dark:text-green-500 mt-1\">{t(\"present\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalPresentStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n\n                <div className=\"text-center p-3 rounded-lg bg-red-50 dark:bg-red-950\">\n                  <p className=\"text-2xl font-bold text-red-700 dark:text-red-400\">\n                    {slot.totalAbsentStudent}\n                  </p>\n                  <p className=\"text-xs text-red-600 dark:text-red-500 mt-1\">{t(\"absent\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalAbsentStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n\n                <div className=\"text-center p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950\">\n                  <p className=\"text-2xl font-bold text-yellow-700 dark:text-yellow-400\">\n                    {slot.totalNotYetStudent}\n                  </p>\n                  <p className=\"text-xs text-yellow-600 dark:text-yellow-500 mt-1\">{t(\"pending\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalNotYetStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"mt-3 text-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  {t(\"total_students\")}:{\" \"}\n                  <span className=\"font-semibold\">{slot.totalStudent}</span>\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-2 pt-4 border-t\">\n            <Button variant=\"outline\" onClick={onClose}>\n              {t(\"close\")}\n            </Button>\n            <Button variant=\"secondary\" asChild>\n              <Link href={`/supervisor/slots/${slot.id}/attendance`}>\n                <Users className=\"h-4 w-4 mr-2\" />\n                {t(\"manage_attendance\")}\n              </Link>\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\slots\\supervisor-exam-detail-dialog.tsx",
      "relative_path": "components/supervisor/slots/supervisor-exam-detail-dialog.tsx",
      "filename": "supervisor-exam-detail-dialog.tsx",
      "size_bytes": 6426,
      "lines": 184,
      "last_modified": "2025-11-28T09:21:56.260495",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Calendar,\n  Clock,\n  MapPin,\n  Users,\n  BookOpen,\n  ClipboardCheck,\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\nimport { formatDisplayTime } from \"@/lib/calendar-utils\";\nimport { Slot } from \"@/types\";\n\ninterface SupervisorExamDetailDialogProps {\n  slot: Slot;\n  open: boolean;\n  onClose: () => void;\n}\n\n/**\n * Supervisor Exam Detail Dialog\n *\n * Shows detailed information about an exam slot with:\n * - Exam information (subjects, time, location, students)\n * - Quick actions for exam management\n * - Navigation to detailed exam management\n */\nexport function SupervisorExamDetailDialog({\n  slot,\n  open,\n  onClose,\n}: SupervisorExamDetailDialogProps) {\n  const t = useTranslations(\"supervisor.slots_page.dialog\");\n  const startTime = parseISO(slot.startTime);\n  const endTime = parseISO(slot.endTime);\n\n  // Get unique subjects from the array\n  const uniqueSubjects = Array.from(\n    new Map(slot.subjects?.map(s => [s.id, s]) || []).values()\n  );\n\n  const getExamStatus = () => {\n    const now = new Date();\n    // Keep original English labels for status (backend data format)\n    if (endTime <= now) {\n      return { status: \"completed\", label: \"Completed\", color: \"text-green-700 bg-green-100\" };\n    } else if (startTime <= now && endTime > now) {\n      return { status: \"ongoing\", label: \"Ongoing\", color: \"text-blue-700 bg-blue-100\" };\n    } else {\n      return { status: \"upcoming\", label: \"Upcoming\", color: \"text-orange-700 bg-orange-100\" };\n    }\n  };\n\n  const examStatus = getExamStatus();\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-5 w-5\" />\n            {t(\"title\")}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* Status and Category */}\n          <div className=\"flex justify-center gap-2\">\n            <Badge variant=\"secondary\" className=\"bg-red-100 text-red-700\">\n              {slot.slotCategory}\n            </Badge>\n            <Badge variant=\"secondary\" className={examStatus.color}>\n              {examStatus.label}\n            </Badge>\n          </div>\n\n          {/* Exam Title */}\n          <div className=\"text-center space-y-1\">\n            <h3 className=\"font-semibold text-lg\">\n              {slot.title || \"Final Examination\"}\n            </h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Semester: {slot.semester?.name} ({slot.semester?.code})\n            </p>\n          </div>\n\n          <Separator />\n\n          {/* Subjects */}\n          {uniqueSubjects.length > 0 && (\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-sm flex items-center gap-2\">\n                <BookOpen className=\"h-4 w-4\" />\n                {uniqueSubjects.length > 1 ? t(\"subjects\") : t(\"subject\")}\n              </h4>\n              <div className=\"space-y-1\">\n                {uniqueSubjects.map((subject) => (\n                  <div key={subject.id} className=\"flex items-center justify-between p-2 bg-muted/30 rounded\">\n                    <div>\n                      <div className=\"font-medium\">{subject.name}</div>\n                      <div className=\"text-sm text-muted-foreground\">{subject.code}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <Separator />\n\n          {/* Exam Details */}\n          <div className=\"space-y-3\">\n            {/* Date and Time */}\n            <div className=\"flex items-center gap-3\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <div>\n                <div className=\"font-medium\">\n                  {format(startTime, \"EEEE, MMMM d, yyyy\")}\n                </div>\n                <div className=\"text-sm text-muted-foreground flex items-center gap-1\">\n                  <Clock className=\"h-3 w-3\" />\n                  {formatDisplayTime(slot.startTime)} - {formatDisplayTime(slot.endTime)}\n                </div>\n              </div>\n            </div>\n\n            {/* Location */}\n            <div className=\"flex items-center gap-3\">\n              <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n              <div>\n                <div className=\"font-medium\">{slot.room?.name || t(\"location_tba\")}</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {slot.room?.location || t(\"location_pending\")}\n                </div>\n              </div>\n            </div>\n\n            {/* Student Count */}\n            <div className=\"flex items-center gap-3\">\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n              <div>\n                <div className=\"font-medium\">\n                  {slot.totalStudent || 0} Student{(slot.totalStudent || 0) !== 1 ? \"s\" : \"\"}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  Present: {slot.totalPresentStudent || 0} â€¢ Absent: {slot.totalAbsentStudent || 0} â€¢ Pending: {slot.totalNotYetStudent || 0}\n                </div>\n              </div>\n            </div>\n\n            {/* Supervisor */}\n            <div className=\"flex items-center gap-3\">\n              <ClipboardCheck className=\"h-4 w-4 text-muted-foreground\" />\n              <div>\n                <div className=\"font-medium\">{t(\"supervisor\")}</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {slot.staffUser?.fullName} ({slot.staffUser?.username})\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Action Button */}\n          <Button variant=\"outline\" onClick={onClose} className=\"w-full\">\n            {t(\"close\")}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\slots\\supervisor-slot-columns.tsx",
      "relative_path": "components/supervisor/slots/supervisor-slot-columns.tsx",
      "filename": "supervisor-slot-columns.tsx",
      "size_bytes": 9254,
      "lines": 261,
      "last_modified": "2025-11-28T09:21:56.261496",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { MoreHorizontal, Eye, ClipboardCheck } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { Slot } from \"@/types\";\nimport Link from \"next/link\";\n\nconst formatSlotTime = (startTime: string, endTime: string) => {\n  const start = new Date(startTime);\n  const end = new Date(endTime);\n  return `${format(start, \"MMM d, h:mm a\")} - ${format(end, \"h:mm a\")}`;\n};\n\ntype TranslationFunction = (key: string, values?: Record<string, string | number>) => string;\n\nexport function createSupervisorSlotColumns(\n  onViewExam: (slot: Slot) => void,\n  t: TranslationFunction\n): ColumnDef<Slot>[] {\n  return [\n    {\n      id: \"room\",\n      header: () => <div className=\"text-center\">{t(\"column.room\")}</div>,\n      cell: ({ row }) => {\n        const room = row.original.room;\n\n        return (\n          <div className=\"flex justify-center\">\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge\n                    variant=\"outline\"\n                    className=\"text-xs cursor-help min-w-[100px] justify-center\"\n                  >\n                    <span className=\"truncate\">{room?.name || t(\"tba\")}</span>\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent side=\"right\">\n                  <div className=\"space-y-1\">\n                    <p className=\"font-medium\">{room?.name || t(\"tba\")}</p>\n                    {room?.location && (\n                      <p className=\"text-xs text-muted-foreground\">\n                        {room.location}\n                      </p>\n                    )}\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        );\n      },\n    },\n    {\n      id: \"semester\",\n      header: () => <div className=\"text-center\">{t(\"column.semester\")}</div>,\n      cell: ({ row }) => {\n        const semester = row.original.semester || row.original.class?.semester;\n\n        if (!semester) {\n          return (\n            <div className=\"flex justify-center\">\n              <Badge variant=\"outline\" className=\"text-xs\">\n                {t(\"na\")}\n              </Badge>\n            </div>\n          );\n        }\n\n        return (\n          <div className=\"flex justify-center\">\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge variant=\"outline\" className=\"text-xs cursor-help\">\n                    {semester.code}\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent side=\"right\">\n                  <p>{semester.name}</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        );\n      },\n    },\n    {\n      id: \"subjects\",\n      header: () => <div className=\"text-center\">{t(\"column.subjects\")}</div>,\n      cell: ({ row }) => {\n        const slot = row.original;\n        const uniqueSubjects = Array.from(\n          new Map(slot.subjects?.map((s) => [s.id, s]) || []).values()\n        );\n        const subjectCount = uniqueSubjects.length;\n\n        return (\n          <div className=\"flex justify-center\">\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"text-xs cursor-help w-[80px] justify-center\"\n                  >\n                    {subjectCount === 1 ? t(\"subject_singular\", { count: subjectCount }) : t(\"subject_plural\", { count: subjectCount })}\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent side=\"right\" className=\"max-w-xs\">\n                  <div className=\"space-y-1\">\n                    {uniqueSubjects.map((subject) => (\n                      <div\n                        key={subject.id}\n                        className=\"text-sm flex items-center gap-2\"\n                      >\n                        <Badge variant=\"default\" className=\"text-xs\">\n                          {subject.code}\n                        </Badge>\n                        <span>{subject.name}</span>\n                      </div>\n                    ))}\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        );\n      },\n    },\n    {\n      accessorKey: \"slotCategory\",\n      header: () => <div className=\"text-center\">{t(\"column.category\")}</div>,\n      cell: ({ row }) => {\n        const category = row.getValue(\"slotCategory\") as string;\n        // Keep original backend data, just format for display\n        const displayText =\n          category === \"FINAL_EXAM\"\n            ? \"Final Exam\"\n            : category.replace(/_/g, \" \");\n        return (\n          <div className=\"flex justify-center\">\n            <Badge variant=\"outline\" className=\"text-xs whitespace-nowrap\">\n              {displayText}\n            </Badge>\n          </div>\n        );\n      },\n    },\n    {\n      id: \"time\",\n      header: () => <div className=\"text-center\">{t(\"column.time\")}</div>,\n      cell: ({ row }) => {\n        const { startTime, endTime } = row.original;\n        return (\n          <div className=\"text-center text-sm text-muted-foreground whitespace-nowrap\">\n            {formatSlotTime(startTime, endTime)}\n          </div>\n        );\n      },\n    },\n    {\n      id: \"stats\",\n      header: () => <div className=\"text-center\">{t(\"column.attendance\")}</div>,\n      cell: ({ row }) => {\n        const slot = row.original;\n        const present = slot.totalPresentStudent || 0;\n        const total = slot.totalStudent || 0;\n        const absent = slot.totalAbsentStudent || 0;\n        const pending = slot.totalNotYetStudent || 0;\n\n        return (\n          <div className=\"flex justify-center\">\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <div className=\"text-center text-sm cursor-help\">\n                    <span className=\"text-green-600 font-medium\">\n                      {present}\n                    </span>\n                    <span className=\"text-muted-foreground mx-1\">/</span>\n                    <span className=\"text-red-600 font-medium\">{absent}</span>\n                    <span className=\"text-muted-foreground mx-1\">/</span>\n                    <span className=\"text-yellow-600 font-medium\">\n                      {pending}\n                    </span>\n                  </div>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-xs\">\n                      <span className=\"text-green-600\">â—</span> Present:{\" \"}\n                      {present}\n                    </p>\n                    <p className=\"text-xs\">\n                      <span className=\"text-red-600\">â—</span> Absent: {absent}\n                    </p>\n                    <p className=\"text-xs\">\n                      <span className=\"text-yellow-600\">â—</span> Not Yet:{\" \"}\n                      {pending}\n                    </p>\n                    <p className=\"text-xs font-semibold border-t pt-1\">\n                      Total: {total}\n                    </p>\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        );\n      },\n    },\n    {\n      id: \"action\",\n      header: () => <div className=\"text-center\">{t(\"column.action\")}</div>,\n      cell: ({ row }) => {\n        const slot = row.original;\n\n        return (\n          <div className=\"flex justify-center\">\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                  <MoreHorizontal className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem onClick={() => onViewExam(slot)}>\n                  <Eye className=\"mr-2 h-4 w-4\" />\n                  {t(\"action.view_detail\")}\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild>\n                  <Link href={`/supervisor/slots/${slot.id}/attendance`}>\n                    <ClipboardCheck className=\"mr-2 h-4 w-4\" />\n                    {t(\"action.manage_attendance\")}\n                  </Link>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        );\n      },\n    },\n  ];\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\supervisor\\slots\\supervisor-slot-table.tsx",
      "relative_path": "components/supervisor/slots/supervisor-slot-table.tsx",
      "filename": "supervisor-slot-table.tsx",
      "size_bytes": 6372,
      "lines": 200,
      "last_modified": "2025-11-28T09:21:56.261496",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useTranslations } from \"next-intl\";\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  ChevronLeft,\n  ChevronRight,\n  ChevronsLeft,\n  ChevronsRight,\n} from \"lucide-react\";\n\ninterface SupervisorSlotTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[];\n  data: TData[];\n  isLoading?: boolean;\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  pageSize: number;\n  onPageChange: (page: number) => void;\n}\n\nexport function SupervisorSlotTable<TData, TValue>({\n  columns,\n  data,\n  isLoading = false,\n  currentPage,\n  totalPages,\n  totalItems,\n  pageSize,\n  onPageChange,\n}: SupervisorSlotTableProps<TData, TValue>) {\n  const t = useTranslations(\"supervisor.slots_page\");\n  const table = useReactTable({\n    data,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    manualPagination: true,\n    pageCount: totalPages,\n  });\n\n  const startItem = (currentPage - 1) * pageSize + 1;\n  const endItem = Math.min(currentPage * pageSize, totalItems);\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"rounded-md border\">\n          <Table>\n            <TableHeader>\n              {table.getHeaderGroups().map((headerGroup) => (\n                <TableRow key={headerGroup.id}>\n                  {headerGroup.headers.map((header) => (\n                    <TableHead key={header.id}>\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext()\n                          )}\n                    </TableHead>\n                  ))}\n                </TableRow>\n              ))}\n            </TableHeader>\n            <TableBody>\n              {Array.from({ length: 5 }).map((_, index) => (\n                <TableRow key={index}>\n                  {columns.map((_, colIndex) => (\n                    <TableCell key={colIndex}>\n                      <Skeleton className=\"h-4 w-full\" />\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"rounded-md border\">\n        <Table>\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? null\n                      : flexRender(\n                          header.column.columnDef.header,\n                          header.getContext()\n                        )}\n                  </TableHead>\n                ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {table.getRowModel().rows?.length ? (\n              table.getRowModel().rows.map((row) => (\n                <TableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && \"selected\"}\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell key={cell.id}>\n                      {flexRender(\n                        cell.column.columnDef.cell,\n                        cell.getContext()\n                      )}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell\n                  colSpan={columns.length}\n                  className=\"h-24 text-center\"\n                >\n                  {t(\"no_slots_found\")}\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Pagination */}\n      <div className=\"flex items-center justify-between px-2\">\n        <div className=\"flex-1 text-sm text-muted-foreground\">\n          {t(\"showing_pagination\", { startItem, endItem, totalItems })}\n        </div>\n        <div className=\"flex items-center space-x-6 lg:space-x-8\">\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => onPageChange(1)}\n              disabled={currentPage === 1}\n            >\n              <span className=\"sr-only\">{t(\"go_to_first_page\")}</span>\n              <ChevronsLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => onPageChange(currentPage - 1)}\n              disabled={currentPage === 1}\n            >\n              <span className=\"sr-only\">{t(\"go_to_previous_page\")}</span>\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex w-[100px] items-center justify-center text-sm font-medium\">\n              {t(\"page_info\", { currentPage, totalPages })}\n            </div>\n            <Button\n              variant=\"outline\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => onPageChange(currentPage + 1)}\n              disabled={currentPage === totalPages}\n            >\n              <span className=\"sr-only\">{t(\"go_to_next_page\")}</span>\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"hidden h-8 w-8 p-0 lg:flex\"\n              onClick={() => onPageChange(totalPages)}\n              disabled={currentPage === totalPages}\n            >\n              <span className=\"sr-only\">{t(\"go_to_last_page\")}</span>\n              <ChevronsRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"
    }
  ]
}