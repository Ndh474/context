{
  "metadata": {
    "codebase": "frontend-web",
    "category": "component_lecturer",
    "generated_at": "2025-12-03T21:12:52.240634",
    "total_files": 22,
    "total_lines": 4083,
    "total_bytes": 141197
  },
  "files": [
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\attendance-radio.tsx",
      "relative_path": "components/lecturer/attendance-radio.tsx",
      "filename": "attendance-radio.tsx",
      "size_bytes": 1744,
      "lines": 49,
      "last_modified": "2025-11-28T09:21:56.244963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Label } from \"@/components/ui/label\";\n\n// Legacy attendance status values for this component\ntype LegacyAttendanceStatus = \"not_yet\" | \"present\" | \"absent\";\n\ninterface AttendanceRadioProps {\n  studentId: string;\n  value: LegacyAttendanceStatus;\n  onChange: (status: LegacyAttendanceStatus) => void;\n  compact?: boolean;\n}\n\nconst ATTENDANCE_OPTIONS: { value: LegacyAttendanceStatus; label: string; color: string }[] = [\n  { value: \"absent\", label: \"Absent\", color: \"text-red-600\" },\n  { value: \"present\", label: \"Present\", color: \"text-green-600\" },\n  { value: \"not_yet\", label: \"Not Yet\", color: \"text-yellow-600\" },\n];\n\nexport function AttendanceRadio({ studentId, value, onChange, compact = false }: AttendanceRadioProps) {\n  const wrapperSpace = compact ? \"space-y-1\" : \"space-y-2\";\n  const radioSize = compact ? \"h-3 w-3\" : \"h-4 w-4\";\n  const labelSize = compact ? \"text-xs\" : \"\";\n\n  return (\n    <div className={wrapperSpace}>\n      {ATTENDANCE_OPTIONS.map((option) => (\n        <div key={option.value} className=\"flex items-center space-x-2\">\n          <input\n            type=\"radio\"\n            id={`${studentId}-${option.value}`}\n            name={`attendance-${studentId}`}\n            value={option.value}\n            checked={value === option.value}\n            onChange={() => onChange(option.value)}\n            className={`${radioSize} cursor-pointer`}\n          />\n          <Label\n            htmlFor={`${studentId}-${option.value}`}\n            className={`cursor-pointer ${labelSize} ${option.color} ${value === option.value ? \"font-semibold\" : \"\"}`}\n          >\n            {option.label}\n          </Label>\n        </div>\n      ))}\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\calendar\\calendar-day-column.tsx",
      "relative_path": "components/lecturer/calendar/calendar-day-column.tsx",
      "filename": "calendar-day-column.tsx",
      "size_bytes": 2912,
      "lines": 95,
      "last_modified": "2025-11-28T09:21:56.244963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useMemo } from \"react\";\nimport { Slot } from \"@/types\";\nimport { CalendarSlotCard } from \"./calendar-slot-card\";\nimport { calculateSlotPositions, PositionedSlot } from \"@/lib/calendar-utils\";\nimport { CALENDAR_CONFIG, HOUR_ARRAY, PIXELS_PER_HOUR, TOTAL_HEIGHT } from \"@/lib/calendar-config\";\nimport { cn } from \"@/lib/utils\";\n\ninterface CalendarDayColumnProps {\n  slots: Slot[]; // All slots for this day\n  isToday?: boolean;\n  isWeekend?: boolean;\n  onSlotClick: (slot: Slot) => void;\n}\n\n/**\n * Calendar Day Column\n * Displays a single day column with:\n * - Grid lines for each hour\n * - Absolute positioned slot cards\n * - Overlap handling (side-by-side)\n */\nexport function CalendarDayColumn({\n  slots,\n  isToday = false,\n  isWeekend = false,\n  onSlotClick,\n}: CalendarDayColumnProps) {\n  // Calculate positions for all slots (including overlap handling)\n  const positionedSlots = useMemo(() => {\n    return calculateSlotPositions(slots);\n  }, [slots]);\n\n  return (\n    <div\n      className={cn(\n        \"flex-1 relative border-l\",\n        isWeekend && \"bg-muted/30\",\n        isToday && \"bg-emerald-500/5 dark:bg-emerald-500/10\"\n      )}\n      style={{ height: `${TOTAL_HEIGHT}px` }}\n    >\n      {/* Hour grid lines */}\n      {HOUR_ARRAY.map((hour, index) => (\n        <div\n          key={hour}\n          className=\"absolute w-full border-b\"\n          style={{\n            top: `${index * PIXELS_PER_HOUR}px`,\n            borderColor: CALENDAR_CONFIG.GRID_LINE_COLOR,\n          }}\n        />\n      ))}\n\n      {/* Slots (Absolute positioned) */}\n      {positionedSlots.map((positioned: PositionedSlot) => {\n        const { slot, top, height, column, totalColumns } = positioned;\n\n        // Calculate width and left position for overlapping slots\n        const widthPercent = 100 / totalColumns;\n        const leftPercent = (column / totalColumns) * 100;\n\n        return (\n          <div\n            key={slot.id}\n            className=\"absolute px-0.5\"\n            style={{\n              top: `${top}px`,\n              height: `${height}px`,\n              left: `${leftPercent}%`,\n              width: `${widthPercent}%`,\n              zIndex: 10,\n            }}\n          >\n            <CalendarSlotCard\n              slot={slot}\n              height={height}\n              onClick={() => onSlotClick(slot)}\n              className=\"h-full\"\n            />\n          </div>\n        );\n      })}\n\n      {/* Today indicator line */}\n      {isToday && (\n        <div className=\"absolute left-0 right-0 flex items-center z-20 pointer-events-none\">\n          <div className=\"h-0.5 w-full bg-red-500 dark:bg-red-400 shadow-sm\" />\n          <div className=\"absolute -left-1.5 h-3 w-3 rounded-full bg-red-500 dark:bg-red-400 border-2 border-background\" />\n        </div>\n      )}\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\calendar\\calendar-slot-card.tsx",
      "relative_path": "components/lecturer/calendar/calendar-slot-card.tsx",
      "filename": "calendar-slot-card.tsx",
      "size_bytes": 4813,
      "lines": 136,
      "last_modified": "2025-11-28T09:21:56.245964",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Slot } from \"@/types\";\nimport { CALENDAR_CONFIG } from \"@/lib/calendar-config\";\nimport { cn } from \"@/lib/utils\";\nimport { formatDisplayTime } from \"@/lib/calendar-utils\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CheckCircle2, XCircle, Clock } from \"lucide-react\";\n\ninterface CalendarSlotCardProps {\n  slot: Slot;\n  height: number; // Height in pixels for responsive content\n  onClick?: () => void;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport function CalendarSlotCard({\n  slot,\n  height,\n  onClick,\n  className,\n  style,\n}: CalendarSlotCardProps) {\n  const category = slot.slotCategory;\n  const colors = CALENDAR_CONFIG.CATEGORY_COLORS[category];\n\n  // Format time (e.g., \"08:00\") - use UTC to match server time\n  const startTime = formatDisplayTime(slot.startTime);\n  const endTime = formatDisplayTime(slot.endTime);\n\n  // Get display info\n  const classCode = slot.class?.code || \"EXAM\";\n  const subjectName = slot.class?.subject.name || slot.subjects?.[0]?.name || \"Final Exam\";\n  const roomName = slot.room.name;\n\n  // Category label (short)\n  const categoryLabels = {\n    LECTURE: \"LEC\",\n    LECTURE_WITH_PT: \"PT\",\n    FINAL_EXAM: \"EXAM\",\n  };\n  const categoryLabel = categoryLabels[category];\n\n  // Compact mode for short slots (< 60px height for more threshold)\n  const isCompact = height < 60;\n  // Very compact mode (< 35px) - only show essential info\n  const isVeryCompact = height < 35;\n\n  return (\n    <div\n      className={cn(\n        \"h-full w-full rounded-md border-l-4 transition-all hover:shadow-lg cursor-pointer overflow-hidden\",\n        colors.bg,\n        colors.border,\n        !slot.isActive && \"opacity-50\",\n        className\n      )}\n      style={style}\n      onClick={onClick}\n    >\n      <div className=\"p-1.5 h-full flex flex-col text-xs\">\n        {/* Student Attendance Status - HIGHEST PRIORITY (show even in compact mode) */}\n        {slot.studentAttendanceStatus && (\n          <div\n            className={cn(\n              \"flex items-center gap-1 mb-1 px-1.5 py-0.5 rounded-md font-semibold\",\n              slot.studentAttendanceStatus === \"present\" && \"text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/50 border border-green-300 dark:border-green-700\",\n              slot.studentAttendanceStatus === \"absent\" && \"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700\",\n              slot.studentAttendanceStatus === \"not_yet\" && \"text-amber-700 dark:text-amber-300 bg-amber-100 dark:bg-amber-900/50 border border-amber-300 dark:border-amber-700\"\n            )}\n          >\n            {slot.studentAttendanceStatus === \"present\" && (\n              <>\n                <CheckCircle2 className=\"h-3 w-3 flex-shrink-0\" />\n                <span className=\"text-[10px] truncate\">Present</span>\n              </>\n            )}\n            {slot.studentAttendanceStatus === \"absent\" && (\n              <>\n                <XCircle className=\"h-3 w-3 flex-shrink-0\" />\n                <span className=\"text-[10px] truncate\">Absent</span>\n              </>\n            )}\n            {slot.studentAttendanceStatus === \"not_yet\" && (\n              <>\n                <Clock className=\"h-3 w-3 flex-shrink-0\" />\n                <span className=\"text-[10px] truncate\">Not Yet</span>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Header: Class code + Category badge (hide category in very compact) */}\n        <div className=\"flex items-start justify-between gap-1 mb-0.5\">\n          <span className={cn(\"font-semibold truncate\", colors.text)}>\n            {classCode}\n          </span>\n          {!isVeryCompact && (\n            <Badge\n              variant=\"outline\"\n              className={cn(\n                \"text-[9px] px-1 py-0 h-4 border-0 flex-shrink-0\",\n                colors.bg,\n                colors.text\n              )}\n            >\n              {categoryLabel}\n            </Badge>\n          )}\n        </div>\n\n        {/* Time range (always show unless very compact) */}\n        {!isVeryCompact && (\n          <div className=\"text-[10px] text-muted-foreground mb-1\">\n            {startTime} - {endTime}\n          </div>\n        )}\n\n        {/* Subject name (only if not compact) */}\n        {!isCompact && (\n          <div className={cn(\"text-[11px] font-medium truncate mb-0.5\", colors.text)}>\n            {subjectName}\n          </div>\n        )}\n\n        {/* Room (only if not compact) */}\n        {!isCompact && (\n          <div className=\"text-[10px] text-muted-foreground truncate mt-auto\">\n            üìç {roomName}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\calendar\\calendar-time-grid.tsx",
      "relative_path": "components/lecturer/calendar/calendar-time-grid.tsx",
      "filename": "calendar-time-grid.tsx",
      "size_bytes": 727,
      "lines": 26,
      "last_modified": "2025-11-28T09:21:56.245964",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { CALENDAR_CONFIG, HOUR_ARRAY, PIXELS_PER_HOUR } from \"@/lib/calendar-config\";\n\n/**\n * Calendar Time Grid\n * Displays time labels column (7:00, 8:00, ..., 22:00)\n */\nexport function CalendarTimeGrid() {\n  return (\n    <div\n      className=\"flex-shrink-0 border-r bg-muted/30\"\n      style={{ width: `${CALENDAR_CONFIG.TIME_COLUMN_WIDTH}px` }}\n    >\n      {HOUR_ARRAY.map((hour) => (\n        <div\n          key={hour}\n          className=\"flex items-start justify-end pr-2 pt-1 text-xs text-muted-foreground font-medium border-b\"\n          style={{ height: `${PIXELS_PER_HOUR}px` }}\n        >\n          {String(hour).padStart(2, \"0\")}:00\n        </div>\n      ))}\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\calendar\\calendar-week-container.tsx",
      "relative_path": "components/lecturer/calendar/calendar-week-container.tsx",
      "filename": "calendar-week-container.tsx",
      "size_bytes": 7664,
      "lines": 211,
      "last_modified": "2025-11-28T09:21:56.245964",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useMemo } from \"react\";\nimport { format, parseISO } from \"date-fns\";\nimport { formatDisplayTime } from \"@/lib/calendar-utils\";\nimport { Slot } from \"@/types\";\nimport { CalendarTimeGrid } from \"./calendar-time-grid\";\nimport { CalendarDayColumn } from \"./calendar-day-column\";\nimport { getWeekDays, getDayOfWeek, isToday } from \"@/lib/calendar-utils\";\nimport { CALENDAR_CONFIG } from \"@/lib/calendar-config\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { cn } from \"@/lib/utils\";\n\ninterface CalendarWeekContainerProps {\n  mondayDate: Date;\n  slots: Slot[];\n  isLoading?: boolean;\n  onSlotClick: (slot: Slot) => void;\n}\n\n/**\n * Calendar Week Container\n * Main container for week view calendar\n * Layout: [Time Grid] [Mon] [Tue] [Wed] [Thu] [Fri] [Sat] [Sun]\n */\nexport function CalendarWeekContainer({\n  mondayDate,\n  slots,\n  isLoading,\n  onSlotClick,\n}: CalendarWeekContainerProps) {\n  const weekDays = getWeekDays(mondayDate);\n\n  // Group slots by day (0=Monday, 6=Sunday)\n  const slotsByDay = useMemo(() => {\n    const grouped: Record<number, Slot[]> = {};\n\n    // Initialize all days\n    for (let i = 0; i < 7; i++) {\n      grouped[i] = [];\n    }\n\n    // Group slots by day\n    slots.forEach((slot) => {\n      // Parse as UTC to avoid timezone issues\n      const slotDate = parseISO(slot.startTime);\n      const dayIndex = getDayOfWeek(slotDate);\n      if (dayIndex >= 0 && dayIndex <= 6) {\n        grouped[dayIndex].push(slot);\n      }\n    });\n\n    return grouped;\n  }, [slots]);\n\n  // Loading skeleton\n  if (isLoading) {\n    return (\n      <div className=\"rounded-lg border overflow-hidden\">\n        <div className=\"p-8 space-y-4\">\n          <Skeleton className=\"h-8 w-full\" />\n          <Skeleton className=\"h-64 w-full\" />\n          <Skeleton className=\"h-64 w-full\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Desktop View */}\n      <div className=\"hidden lg:block rounded-lg border overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <div className=\"min-w-[900px]\">\n            {/* Header Row - Day Names */}\n            <div className=\"flex bg-muted/50 border-b sticky top-0 z-20\">\n              {/* Time column spacer */}\n              <div\n                className=\"flex-shrink-0 border-r p-3 font-medium text-sm\"\n                style={{ width: `${CALENDAR_CONFIG.TIME_COLUMN_WIDTH}px` }}\n              >\n                Time\n              </div>\n\n              {/* Day headers */}\n              {weekDays.map((day, index) => {\n                const dayIsToday = isToday(day);\n\n                return (\n                  <div\n                    key={index}\n                    className={cn(\n                      \"flex-1 p-3 text-center border-l\",\n                      dayIsToday && \"bg-emerald-500/10 dark:bg-emerald-500/20 border-emerald-500 dark:border-emerald-400 border-l-2\"\n                    )}\n                  >\n                    <div className=\"font-semibold text-sm\">{format(day, \"EEE\")}</div>\n                    <div\n                      className={cn(\n                        \"text-xs text-muted-foreground\",\n                        dayIsToday && \"text-emerald-700 dark:text-emerald-400 font-semibold\"\n                      )}\n                    >\n                      {format(day, \"MMM d\")}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Body - Time Grid + Day Columns */}\n            <div className=\"flex\">\n              {/* Time Grid */}\n              <CalendarTimeGrid />\n\n              {/* Day Columns */}\n              {weekDays.map((day, index) => {\n                const daySlots = slotsByDay[index] || [];\n                const dayIsToday = isToday(day);\n                const isWeekend = index >= 5;\n\n                return (\n                  <CalendarDayColumn\n                    key={index}\n                    slots={daySlots}\n                    isToday={dayIsToday}\n                    isWeekend={isWeekend}\n                    onSlotClick={onSlotClick}\n                  />\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile/Tablet View - Vertical List */}\n      <div className=\"lg:hidden space-y-4\">\n        {weekDays.map((day, dayIndex) => {\n          const daySlots = slotsByDay[dayIndex] || [];\n          const dayIsToday = isToday(day);\n\n          return (\n            <div\n              key={dayIndex}\n              className={cn(\n                \"rounded-lg border p-4 space-y-3\",\n                dayIsToday && \"border-emerald-500 dark:border-emerald-400 bg-emerald-500/5 dark:bg-emerald-500/10\"\n              )}\n            >\n              {/* Day Header */}\n              <div className={cn(\"font-semibold\", dayIsToday && \"text-emerald-700 dark:text-emerald-400\")}>\n                {format(day, \"EEEE, MMMM d\")}\n                {dayIsToday && <span className=\"ml-2 text-xs font-normal\">(Today)</span>}\n              </div>\n\n              {/* Slots for this day */}\n              {daySlots.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {daySlots.map((slot) => (\n                    <div\n                      key={slot.id}\n                      className=\"cursor-pointer\"\n                      onClick={() => onSlotClick(slot)}\n                    >\n                      <div className=\"rounded-md border-l-4 p-3 bg-card hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"font-semibold text-sm\">{slot.class?.code || \"EXAM\"}</div>\n                            <div className=\"text-xs text-muted-foreground truncate\">\n                              {slot.class?.subject.name || slot.subjects?.[0]?.name || \"Final Exam\"}\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"mt-2 text-xs text-muted-foreground\">\n                          {formatDisplayTime(slot.startTime)} -{\" \"}\n                          {formatDisplayTime(slot.endTime)} ‚Ä¢ {slot.room.name}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-sm text-muted-foreground text-center py-4\">\n                  No classes scheduled\n                </p>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground\">\n        <span className=\"font-medium\">Legend:</span>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded border-l-4 border-l-blue-500 bg-blue-500/10 dark:bg-blue-500/20\" />\n          <span>Lecture</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded border-l-4 border-l-purple-500 bg-purple-500/10 dark:bg-purple-500/20\" />\n          <span>Lecture with PT</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded border-l-4 border-l-red-500 bg-red-500/10 dark:bg-red-500/20\" />\n          <span>Final Exam</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\dashboard\\my-classes-widget.tsx",
      "relative_path": "components/lecturer/dashboard/my-classes-widget.tsx",
      "filename": "my-classes-widget.tsx",
      "size_bytes": 5035,
      "lines": 164,
      "last_modified": "2025-11-28T09:21:56.246962",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { BookOpen, Users, ArrowRight } from \"lucide-react\";\nimport Link from \"next/link\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { cn } from \"@/lib/utils\";\n\n// Types\ninterface MyClass {\n  id: number;\n  code: string;\n  name: string;\n  subjectCode: string;\n  totalStudents: number;\n  totalEnrolledStudents?: number;\n  attendanceRate: number;\n  totalSlots: number;\n}\n\ninterface MyClassesWidgetProps {\n  className?: string;\n}\n\ninterface ClassCardProps {\n  classData: MyClass;\n}\n\n// Helper function\nfunction getAttendanceRateColor(rate: number): string {\n  if (rate >= 90) return \"text-green-600\";\n  if (rate >= 75) return \"text-blue-600\";\n  if (rate >= 60) return \"text-yellow-600\";\n  return \"text-red-600\";\n}\n\n// Mock data (temporary)\nconst mockMyClasses: MyClass[] = [];\n\nfunction ClassCard({ classData }: ClassCardProps) {\n  return (\n    <Card className=\"group hover:shadow-md transition-shadow\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <CardTitle className=\"text-base truncate\">\n              {classData.code}\n            </CardTitle>\n            <CardDescription className=\"truncate\">\n              {classData.name}\n            </CardDescription>\n          </div>\n          <Badge variant=\"secondary\" className=\"shrink-0\">\n            {classData.subjectCode}\n          </Badge>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-3\">\n        {/* Student Count */}\n        <div className=\"flex items-center gap-2 text-sm\">\n          <Users className=\"size-4 text-muted-foreground\" />\n          <span className=\"text-muted-foreground\">\n            {classData.totalEnrolledStudents ?? classData.totalStudents} students\n          </span>\n        </div>\n\n        {/* Attendance Rate */}\n        <div>\n          <div className=\"flex items-center justify-between mb-1\">\n            <span className=\"text-sm font-medium\">Attendance Rate</span>\n            <span\n              className={cn(\n                \"text-sm font-bold\",\n                getAttendanceRateColor(classData.attendanceRate)\n              )}\n            >\n              {classData.attendanceRate}%\n            </span>\n          </div>\n          <Progress value={classData.attendanceRate} className=\"h-2\" />\n        </div>\n\n        {/* Total Slots */}\n        <div className=\"text-xs text-muted-foreground\">\n          <span className=\"font-medium\">{classData.totalSlots}</span> total\n          slots\n        </div>\n      </CardContent>\n\n      <CardFooter className=\"pt-3\">\n        <Button\n          asChild\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"w-full gap-2 group-hover:bg-accent\"\n        >\n          <Link href={`/lecturer/reports/classes/${classData.id}`}>\n            View Report\n            <ArrowRight className=\"size-4\" />\n          </Link>\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n\n/**\n * My Classes Widget\n *\n * Displays all classes the lecturer teaches in the current semester.\n * Provides quick access to class reports and key metrics.\n */\nexport function MyClassesWidget({ className }: MyClassesWidgetProps) {\n  const classes = mockMyClasses;\n  const hasClasses = classes.length > 0;\n\n  return (\n    <Card className={cn(\"\", className)}>\n      <CardHeader className=\"flex flex-row items-center justify-between pb-4\">\n        <div className=\"flex items-center gap-2\">\n          <BookOpen className=\"size-5 text-muted-foreground\" />\n          <div>\n            <CardTitle>My Classes</CardTitle>\n            <CardDescription>\n              {hasClasses\n                ? `${classes.length} ${\n                    classes.length === 1 ? \"class\" : \"classes\"\n                  } this semester`\n                : \"No classes assigned\"}\n            </CardDescription>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        {hasClasses ? (\n          <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n            {classes.map((classData) => (\n              <ClassCard key={classData.id} classData={classData} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"flex flex-col items-center justify-center rounded-lg border border-dashed py-12 text-center\">\n            <BookOpen className=\"size-12 text-muted-foreground/50 mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-1\">No Classes</h3>\n            <p className=\"text-sm text-muted-foreground max-w-sm\">\n              You have no classes assigned for this semester.\n            </p>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\monthly-calendar.tsx",
      "relative_path": "components/lecturer/monthly-calendar.tsx",
      "filename": "monthly-calendar.tsx",
      "size_bytes": 5206,
      "lines": 162,
      "last_modified": "2025-11-28T09:21:56.246962",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  startOfMonth,\n  endOfMonth,\n  eachDayOfInterval,\n  format,\n  isToday,\n  isSameMonth,\n  addMonths,\n  subMonths,\n} from \"date-fns\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { useLecturerScheduleMock } from \"@/hooks/api/useLecturerSchedule\";\nimport { ScheduleItem } from \"@/types\";\n\nconst WEEKDAYS = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\ninterface MonthlyCalendarProps {\n  className?: string;\n}\n\nexport function MonthlyCalendar({ className }: MonthlyCalendarProps) {\n  const router = useRouter();\n  const [currentDate, setCurrentDate] = useState(new Date());\n\n  const year = currentDate.getFullYear();\n  const month = currentDate.getMonth() + 1;\n\n  const { data: scheduleData, isLoading } = useLecturerScheduleMock(\n    year,\n    month\n  );\n\n  const monthStart = startOfMonth(currentDate);\n  const monthEnd = endOfMonth(currentDate);\n  const startDate = new Date(monthStart);\n  startDate.setDate(startDate.getDate() - monthStart.getDay());\n\n  const endDate = new Date(monthEnd);\n  endDate.setDate(endDate.getDate() + (6 - monthEnd.getDay()));\n\n  const calendarDays = eachDayOfInterval({ start: startDate, end: endDate });\n\n  const getSchedulesForDate = (date: Date): ScheduleItem[] => {\n    if (!scheduleData) return [];\n    const dateStr = format(date, \"yyyy-MM-dd\");\n    const daySchedule = scheduleData.days.find((d) => d.date === dateStr);\n    return daySchedule?.schedules || [];\n  };\n\n  const handlePreviousMonth = () => {\n    setCurrentDate((prev) => subMonths(prev, 1));\n  };\n\n  const handleNextMonth = () => {\n    setCurrentDate((prev) => addMonths(prev, 1));\n  };\n\n  const handleScheduleClick = (schedule: ScheduleItem, date: Date) => {\n    const dateStr = format(date, \"yyyy-MM-dd\");\n    router.push(\n      `/lecturer/roster/${schedule.classId}?date=${dateStr}&scheduleId=${schedule.id}`\n    );\n  };\n\n  return (\n    <div className={className}>\n      {/* Header */}\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h2 className=\"text-2xl font-bold\">\n          {format(currentDate, \"MMMM yyyy\")}\n        </h2>\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={handlePreviousMonth}\n            aria-label=\"Previous month\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={handleNextMonth}\n            aria-label=\"Next month\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Calendar Grid */}\n      <div className=\"grid grid-cols-7 gap-2\">\n        {/* Weekday headers */}\n        {WEEKDAYS.map((day) => (\n          <div\n            key={day}\n            className=\"p-2 text-center text-sm font-semibold text-muted-foreground\"\n          >\n            {day}\n          </div>\n        ))}\n\n        {/* Calendar days */}\n        {calendarDays.map((day, index) => {\n          const schedules = getSchedulesForDate(day);\n          const isCurrentMonth = isSameMonth(day, currentDate);\n          const isTodayDate = isToday(day);\n\n          return (\n            <Card\n              key={index}\n              className={`min-h-[120px] p-2 transition-colors ${\n                !isCurrentMonth ? \"opacity-40\" : \"\"\n              } ${isTodayDate ? \"border-primary border-2 bg-primary/5\" : \"\"}`}\n            >\n              <div\n                className={`mb-1 text-sm font-medium ${\n                  isTodayDate ? \"text-primary\" : \"\"\n                }`}\n              >\n                {format(day, \"d\")}\n              </div>\n\n              <div className=\"space-y-1\">\n                {isLoading ? (\n                  <div className=\"text-xs text-muted-foreground\">\n                    Loading...\n                  </div>\n                ) : (\n                  schedules.map((schedule) => (\n                    <button\n                      key={schedule.id}\n                      onClick={() => handleScheduleClick(schedule, day)}\n                      className=\"w-full rounded-md bg-primary/10 px-2 py-1 text-left text-xs hover:bg-primary/20 transition-colors\"\n                    >\n                      <div className=\"font-medium text-primary truncate\">\n                        {schedule.courseCode}\n                      </div>\n                      <div className=\"text-muted-foreground truncate\">\n                        {schedule.className}\n                      </div>\n                      <div className=\"text-muted-foreground text-[10px]\">\n                        {schedule.startTime} - {schedule.endTime}\n                      </div>\n                    </button>\n                  ))\n                )}\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\MonthlyCalendar.tsx",
      "relative_path": "components/lecturer/MonthlyCalendar.tsx",
      "filename": "MonthlyCalendar.tsx",
      "size_bytes": 4741,
      "lines": 116,
      "last_modified": "2025-11-28T09:21:56.244963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { format, startOfMonth, endOfMonth, startOfWeek, endOfWeek, addDays, addMonths, subMonths, isSameMonth, isToday } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useBackendMonthlySchedule } from \"@/hooks/api/useLecturerSchedule\";\nimport { useRouter } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport { useTranslations } from 'next-intl';\n\nexport type MonthlyCalendarProps = {\n  year: number;\n  month: number; // 1-12\n  onChange?: (year: number, month: number) => void;\n};\n\nexport function MonthlyCalendar({ year, month, onChange }: MonthlyCalendarProps) {\n  const t = useTranslations('calendar');\n  const { data, isLoading, error } = useBackendMonthlySchedule(year, month);\n  const router = useRouter();\n\n  const current = new Date(year, month - 1, 1);\n  const monthLabel = format(current, \"MMMM yyyy\");\n\n  const prev = () => {\n    const d = subMonths(current, 1);\n    onChange?.(d.getFullYear(), d.getMonth() + 1);\n  };\n\n  const next = () => {\n    const d = addMonths(current, 1);\n    onChange?.(d.getFullYear(), d.getMonth() + 1);\n  };\n\n\n  const monthStart = startOfMonth(current);\n  const monthEnd = endOfMonth(current);\n  const gridStart = startOfWeek(monthStart, { weekStartsOn: 1 }); // Monday start\n  const gridEnd = endOfWeek(monthEnd, { weekStartsOn: 1 });\n\n  const days: Date[] = [];\n  for (let day = gridStart; day <= gridEnd; day = addDays(day, 1)) {\n    days.push(day);\n  }\n\n  return (\n    <div className=\"w-full space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-xl font-semibold\">{monthLabel}</div>\n        <div className=\"space-x-2\">\n          <Button variant=\"outline\" onClick={prev}>{t('previous')}</Button>\n          <Button variant=\"outline\" onClick={next}>{t('next')}</Button>\n        </div>\n      </div>\n\n      <Separator />\n\n      <div className=\"grid grid-cols-7 text-sm font-medium text-muted-foreground\">\n        {[t('mon'), t('tue'), t('wed'), t('thu'), t('fri'), t('sat'), t('sun')].map((d) => (\n          <div key={d} className=\"px-2 py-2\">{d}</div>\n        ))}\n      </div>\n\n      {isLoading && <div className=\"text-sm text-muted-foreground\">{t('loading_schedule')}</div>}\n      {error && (\n        <div className=\"text-sm text-destructive\">{t('failed_to_load')}: {error.message}</div>\n      )}\n\n      <div className=\"grid grid-cols-7 gap-px rounded-md border border-border bg-border\">\n        {days.map((day) => {\n          const key = format(day, \"yyyy-MM-dd\");\n          const items = data?.grouped[key] ?? [];\n          const isDim = !isSameMonth(day, current);\n          const today = isToday(day);\n\n          return (\n            <div key={key} className={cn(\"min-h-28 bg-background p-2\", isDim && \"bg-muted/40\", today && \"ring-2 ring-primary/60\")}> \n              <div className=\"mb-1 flex items-center justify-between\">\n                <div className={cn(\"text-xs font-medium\", isDim && \"text-muted-foreground\")}>{format(day, \"d\")}</div>\n                {items.length > 0 && (\n                  <div className=\"rounded-full bg-primary/10 px-2 text-[10px] text-primary\">\n                    {items.length} {items.length > 1 ? t('classes') : t('class')}\n                  </div>\n                )}\n              </div>\n              <div className=\"space-y-1\">\n                {items.slice(0, 3).map((it, idx) => (\n                  <div\n                    key={idx}\n                    className=\"cursor-pointer rounded-md border border-border/60 bg-card px-2 py-1 text-xs hover:bg-accent\"\n                    onClick={() => {\n                      const id = (it as { slotId?: number }).slotId;\n                      if (id) {\n                        router.push(`/lecturer/roster/${id}`);\n                      } else {\n                        toast.info(t('no_slot_id'));\n                      }\n                    }}\n                  >\n                    <div className=\"truncate font-medium\">{(it as any).courseName || ''}</div>\n                    <div className=\"truncate text-muted-foreground\">{(it as any).className || ''}</div>\n                    <div className=\"text-[10px] text-muted-foreground\">{(it as any).startTime || ''} - {(it as any).endTime || ''}</div>\n                  </div>\n                ))}\n                {items.length > 3 && (\n                  <div className=\"text-[11px] text-muted-foreground\">+{items.length - 3} {t('more')}‚Ä¶</div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\reports\\attendance-matrix-table.tsx",
      "relative_path": "components/lecturer/reports/attendance-matrix-table.tsx",
      "filename": "attendance-matrix-table.tsx",
      "size_bytes": 10198,
      "lines": 249,
      "last_modified": "2025-12-01T19:04:00.325800",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { Table, Users, ExternalLink } from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\n\ninterface SlotSummaryDTO {\n  slotId: number;\n  title: string;\n  description?: string;\n  startTime: string;\n  endTime: string;\n  slotCategory: \"LECTURE\" | \"LECTURE_WITH_PT\" | \"FINAL_EXAM\";\n}\n\ninterface StudentAttendanceSummaryDTO {\n  userId: number;\n  fullName: string;\n  rollNumber: string;\n  email: string;\n  major: {\n    name: string;\n    code: string;\n  };\n  attendanceSummary: {\n    totalSlots: number;\n    presentCount: number;\n    absentCount: number;\n    notYetCount: number;\n  };\n  attendanceRecords: Record<number, \"PRESENT\" | \"ABSENT\" | \"present\" | \"absent\" | null>;\n}\n\ninterface AttendanceMatrixTableProps {\n  slots: SlotSummaryDTO[];\n  students: StudentAttendanceSummaryDTO[];\n  onSlotClick?: (slotId: number) => void;\n}\n\nexport function AttendanceMatrixTable({ slots, students, onSlotClick }: AttendanceMatrixTableProps) {\n  const getStatusBadge = (status: \"PRESENT\" | \"ABSENT\" | \"present\" | \"absent\" | null) => {\n    // Normalize to uppercase for comparison\n    const normalizedStatus = status?.toUpperCase();\n\n    if (normalizedStatus === \"PRESENT\") {\n      return (\n        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20 hover:bg-green-500/10 text-xs px-2 py-0\">\n          P\n        </Badge>\n      );\n    } else if (normalizedStatus === \"ABSENT\") {\n      return (\n        <Badge variant=\"outline\" className=\"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20 hover:bg-red-500/10 text-xs px-2 py-0\">\n          A\n        </Badge>\n      );\n    } else {\n      // null = NOT_YET\n      return (\n        <Badge variant=\"outline\" className=\"bg-muted text-muted-foreground hover:bg-muted text-xs px-2 py-0\">\n          -\n        </Badge>\n      );\n    }\n  };\n\n  const getStatusText = (status: \"PRESENT\" | \"ABSENT\" | \"present\" | \"absent\" | null) => {\n    const normalizedStatus = status?.toUpperCase();\n\n    if (normalizedStatus === \"PRESENT\") {\n      return { text: \"Present\", color: \"text-green-600 dark:text-green-400\" };\n    } else if (normalizedStatus === \"ABSENT\") {\n      return { text: \"Absent\", color: \"text-red-600 dark:text-red-400\" };\n    } else {\n      return { text: \"Not Yet Recorded\", color: \"text-muted-foreground\" };\n    }\n  };\n\n  if (slots.length === 0 || students.length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Table className=\"h-5 w-5\" />\n            Attendance Matrix\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>No attendance data available</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Table className=\"h-5 w-5\" />\n          Attendance\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <div className=\"inline-block min-w-full align-middle\">\n            <div className=\"overflow-hidden border rounded-lg\">\n              <TooltipProvider delayDuration={500}>\n                <table className=\"min-w-full divide-y divide-border\">\n                {/* Header Row - Sticky */}\n                <thead className=\"bg-muted sticky top-0 z-10\">\n                  <tr>\n                    {/* Sticky first column header */}\n                    <th\n                      scope=\"col\"\n                      className=\"sticky left-0 z-20 bg-muted px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider border-r\"\n                    >\n                      Student\n                    </th>\n                    {/* Slot columns */}\n                    {slots.map((slot, index) => (\n                      <th\n                        key={slot.slotId}\n                        scope=\"col\"\n                        className=\"px-3 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider min-w-[100px]\"\n                      >\n                        <div className=\"flex flex-col gap-1\">\n                          <div className=\"flex items-center justify-center gap-1\">\n                            <span className=\"font-semibold text-foreground truncate\">\n                              Slot {index + 1}\n                            </span>\n                            {onSlotClick && (\n                              <button\n                                type=\"button\"\n                                onClick={() => onSlotClick(slot.slotId)}\n                                className=\"p-0.5 hover:bg-muted rounded transition-colors\"\n                                title=\"Open slot roster\"\n                              >\n                                <ExternalLink className=\"h-3 w-3 text-muted-foreground hover:text-foreground\" />\n                              </button>\n                            )}\n                          </div>\n                          <span className=\"text-[10px] text-muted-foreground font-normal\">\n                            {format(parseISO(slot.startTime), 'dd/MM/yyyy')}\n                          </span>\n                          <span className=\"text-[10px] text-muted-foreground font-normal\">\n                            {format(parseISO(slot.startTime), 'HH:mm')} - {format(parseISO(slot.endTime), 'HH:mm')}\n                          </span>\n                        </div>\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n\n                {/* Body Rows */}\n                <tbody className=\"bg-background divide-y divide-border\">\n                  {students.map((student, studentIdx) => (\n                    <tr\n                      key={student.userId}\n                      className={studentIdx % 2 === 0 ? 'bg-background' : 'bg-muted/50'}\n                    >\n                      {/* Sticky first column - Student info */}\n                      <td className=\"sticky left-0 z-10 bg-inherit px-4 py-3 border-r\">\n                        <div className=\"flex flex-col\">\n                          <span className=\"text-sm font-medium text-foreground truncate\">\n                            {student.rollNumber}\n                          </span>\n                          <span className=\"text-xs text-muted-foreground truncate max-w-[150px]\">\n                            {student.fullName}\n                          </span>\n                        </div>\n                      </td>\n\n                      {/* Attendance status cells */}\n                      {slots.map((slot) => {\n                        const status = student.attendanceRecords[slot.slotId] ?? null;\n                        const statusInfo = getStatusText(status);\n                        return (\n                          <td\n                            key={`${student.userId}-${slot.slotId}`}\n                            className=\"px-3 py-3 text-center\"\n                          >\n                            <Tooltip>\n                              <TooltipTrigger asChild>\n                                <div className=\"inline-block cursor-pointer\">\n                                  {getStatusBadge(status)}\n                                </div>\n                              </TooltipTrigger>\n                              <TooltipContent>\n                                <div className=\"text-xs space-y-1\">\n                                  <p className=\"font-semibold\">{student.fullName}</p>\n                                  <p className=\"text-muted-foreground\">{student.rollNumber}</p>\n                                  <div className=\"pt-1 border-t\">\n                                    <p className={`font-medium ${statusInfo.color}`}>\n                                      {statusInfo.text}\n                                    </p>\n                                  </div>\n                                </div>\n                              </TooltipContent>\n                            </Tooltip>\n                          </td>\n                        );\n                      })}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              </TooltipProvider>\n            </div>\n          </div>\n        </div>\n\n        {/* Legend */}\n        <div className=\"mt-4 pt-4 border-t\">\n          <h4 className=\"font-medium mb-2 text-sm\">Legend</h4>\n          <div className=\"flex flex-wrap gap-4 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20 hover:bg-green-500/10 text-xs px-2 py-0\">\n                P\n              </Badge>\n              <span className=\"text-muted-foreground\">Present</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\" className=\"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20 hover:bg-red-500/10 text-xs px-2 py-0\">\n                A\n              </Badge>\n              <span className=\"text-muted-foreground\">Absent</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\" className=\"bg-muted text-muted-foreground hover:bg-muted text-xs px-2 py-0\">\n                -\n              </Badge>\n              <span className=\"text-muted-foreground\">Not Yet Recorded</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\reports\\multi-class-export-dialog.tsx",
      "relative_path": "components/lecturer/reports/multi-class-export-dialog.tsx",
      "filename": "multi-class-export-dialog.tsx",
      "size_bytes": 11273,
      "lines": 302,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2, Download } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useTranslations } from \"next-intl\";\nimport api from \"@/lib/api-axios\";\nimport { API_ENDPOINTS } from \"@/lib/constants\";\nimport { exportMultiClassesToExcel } from \"@/lib/export-utils/multi-class-export\";\nimport { parseVietnamTime, getVietnamNow } from \"@/lib/timezone-utils\";\n\ninterface Semester {\n  id: number;\n  name: string;\n  code: string;\n  isActive: boolean;\n  isCurrent?: boolean;\n}\n\ninterface Class {\n  id: number;\n  code: string;\n  subject: {\n    id: number;\n    name: string;\n    code: string;\n  };\n  totalSlot?: number;\n  totalActiveSlot?: number;\n}\n\ninterface SemesterWithClasses extends Semester {\n  classes: Class[];\n}\n\ninterface MultiClassExportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function MultiClassExportDialog({ open, onOpenChange }: MultiClassExportDialogProps) {\n  const t = useTranslations('export_dialog');\n  const [selectedSemester, setSelectedSemester] = useState<string>(\"\");\n  const [selectedClasses, setSelectedClasses] = useState<number[]>([]);\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState({ current: 0, total: 0 });\n  const [semestersData, setSemestersData] = useState<SemesterWithClasses[]>([]);\n  const [isLoadingSemesters, setIsLoadingSemesters] = useState(false);\n\n  // Check if semester is current (based on date range)\n  const isCurrentSemester = (semester: any) => {\n    if (!semester.startDate || !semester.endDate) return false;\n    const now = getVietnamNow();\n    const start = parseVietnamTime(semester.startDate + \"T00:00:00\");\n    const end = parseVietnamTime(semester.endDate + \"T23:59:59\");\n    return now >= start && now <= end;\n  };\n\n  const fetchSemestersAndClasses = async () => {\n    setIsLoadingSemesters(true);\n    try {\n      const response = await api.get(API_ENDPOINTS.lecturer.semestersClasses);\n      const data = Array.isArray(response) ? response : [];\n      setSemestersData(data);\n\n      // Auto-select current semester based on date range\n      const currentSemester = data.find((s: SemesterWithClasses) => isCurrentSemester(s));\n      if (currentSemester) {\n        setSelectedSemester(currentSemester.id.toString());\n      }\n    } catch {\n      toast.error(t('error_fetch_semesters'));\n    } finally {\n      setIsLoadingSemesters(false);\n    }\n  };\n\n  // Fetch semesters and classes when dialog opens\n  useEffect(() => {\n    if (open) {\n      fetchSemestersAndClasses();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open]);\n\n  // Reset selected classes when semester changes\n  useEffect(() => {\n    setSelectedClasses([]);\n  }, [selectedSemester]);\n\n  // Get classes for selected semester\n  const classes = semestersData\n    .find(s => s.id.toString() === selectedSemester)\n    ?.classes || [];\n\n  // Handle checkbox toggle\n  const handleToggleClass = (classId: number) => {\n    setSelectedClasses(prev => {\n      if (prev.includes(classId)) {\n        return prev.filter(id => id !== classId);\n      } else {\n        return [...prev, classId];\n      }\n    });\n  };\n\n  // Handle export\n  const handleExport = async () => {\n    if (selectedClasses.length === 0) {\n      toast.error(t('error_no_selection'));\n      return;\n    }\n\n    setIsExporting(true);\n    setExportProgress({ current: 0, total: selectedClasses.length });\n\n    try {\n      // Fetch data for all selected classes\n      const results = await Promise.allSettled(\n        selectedClasses.map(async (classId) => {\n          try {\n            const data = await api.get(\n              `${API_ENDPOINTS.classes.byId(classId)}/summary?semester=${selectedSemester}`\n            );\n            setExportProgress(prev => ({ ...prev, current: prev.current + 1 }));\n            return data;\n          } catch (err) {\n            setExportProgress(prev => ({ ...prev, current: prev.current + 1 }));\n            throw err;\n          }\n        })\n      );\n\n      // Filter successful results\n      const successfulData = results\n        .filter((r): r is PromiseFulfilledResult<any> => r.status === 'fulfilled')\n        .map(r => r.value);\n\n      const failures = results.filter(r => r.status === 'rejected');\n\n      if (failures.length > 0 && successfulData.length > 0) {\n        toast.warning(t('warning_partial_failure', { count: failures.length, success: successfulData.length }));\n      }\n\n      if (successfulData.length > 0) {\n        try {\n          exportMultiClassesToExcel(successfulData);\n          toast.success(t('success_export', { count: successfulData.length }));\n          onOpenChange(false);\n          setSelectedClasses([]);\n        } catch (exportError: any) {\n          toast.error(`Export error: ${exportError.message || 'Failed to generate Excel file'}`);\n        }\n      } else {\n        toast.error(t('error_export_failed') + ' No data available from API.');\n      }\n    } catch (error: any) {\n      toast.error(t('error_export_failed') + ` ${error.message || ''}`);\n    } finally {\n      setIsExporting(false);\n      setExportProgress({ current: 0, total: 0 });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-5xl max-h-[85vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{t('title_multi_class')}</DialogTitle>\n          <DialogDescription>\n            {t('description_class')}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          {/* Semester Select */}\n          <div className=\"space-y-2\">\n            <Label>{t('semester')}</Label>\n            <Select\n              value={selectedSemester}\n              onValueChange={setSelectedSemester}\n              disabled={isLoadingSemesters}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t('select_semester')} />\n              </SelectTrigger>\n              <SelectContent>\n                {semestersData.map(semester => (\n                  <SelectItem key={semester.id} value={semester.id.toString()}>\n                    {semester.name} {isCurrentSemester(semester) && \"(Current)\"}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Class List */}\n          {selectedSemester && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <Label>{t('class_list', { count: classes.length })}</Label>\n                <span className=\"text-sm text-muted-foreground\">\n                  Selected: {selectedClasses.length}\n                </span>\n              </div>\n\n              {classes.length === 0 ? (\n                <Card>\n                  <CardHeader className=\"py-8 text-center text-muted-foreground\">\n                    {t('no_classes')}\n                  </CardHeader>\n                </Card>\n              ) : (\n                <div className=\"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto p-1\">\n                  {classes.map(cls => (\n                    <Card\n                      key={cls.id}\n                      className={`cursor-pointer transition-colors ${\n                        selectedClasses.includes(cls.id) ? 'border-primary bg-primary/5' : 'hover:border-primary/50'\n                      }`}\n                      onClick={() => handleToggleClass(cls.id)}\n                    >\n                      <CardHeader className=\"p-3\">\n                        <div className=\"flex items-center space-x-3\">\n                          <Checkbox\n                            checked={selectedClasses.includes(cls.id)}\n                            onCheckedChange={() => handleToggleClass(cls.id)}\n                            onClick={(e) => e.stopPropagation()}\n                          />\n                          <div className=\"flex-1 min-w-0\">\n                            <CardTitle className=\"text-sm font-semibold mb-1\">\n                              {cls.code}\n                            </CardTitle>\n                            <div className=\"text-xs text-muted-foreground space-y-0.5\">\n                              <div>\n                                <span className=\"font-medium\">Subject Name:</span> {cls.subject.name}\n                              </div>\n                              <div>\n                                <span className=\"font-medium\">Subject Code:</span> {cls.subject.code}\n                              </div>\n                              {cls.totalSlot !== undefined && (\n                                <div>\n                                  <span className=\"font-medium\">Total Slots:</span> {cls.totalSlot}\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </CardHeader>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Export Progress */}\n          {isExporting && (\n            <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-md\">\n              <div className=\"flex items-center space-x-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin text-blue-600\" />\n                <span className=\"text-sm text-blue-800\">\n                  {t('loading_data', { current: exportProgress.current, total: exportProgress.total })}\n                </span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isExporting}>\n            {t('cancel')}\n          </Button>\n          <Button\n            onClick={handleExport}\n            disabled={selectedClasses.length === 0 || isExporting}\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n          >\n            {isExporting ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                {t('exporting')}\n              </>\n            ) : (\n              <>\n                <Download className=\"mr-2 h-4 w-4\" />\n                {selectedClasses.length > 0 ? t('export_with_count', { count: selectedClasses.length }) : t('export_button')}\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\reports\\regular-slot-detail-modal.tsx",
      "relative_path": "components/lecturer/reports/regular-slot-detail-modal.tsx",
      "filename": "regular-slot-detail-modal.tsx",
      "size_bytes": 17162,
      "lines": 482,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Users, \n  Clock, \n  CheckCircle, \n  XCircle, \n  AlertCircle,\n  Download,\n  User\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\n\ninterface RegularSlotDetail {\n  slotId: number;\n  slotTitle: string;\n  startTime: string;\n  endTime: string;\n  room: string;\n  status: \"completed\" | \"upcoming\" | \"ongoing\";\n  students: Array<{\n    userId: number;\n    fullName: string;\n    rollNumber: string;\n    email: string;\n    major: {\n      name: string;\n      code: string;\n    };\n    attendanceStatus: \"PRESENT\" | \"ABSENT\" | \"NOT_YET\";\n    updatedAt?: string;\n  }>;\n  statistics: {\n    totalStudents: number;\n    presentCount: number;\n    absentCount: number;\n    notYetCount: number;\n    attendanceRate: number;\n  };\n}\n\ninterface RegularSlotDetailModalProps {\n  slotId: number;\n  isOpen: boolean;\n  onClose: () => void;\n  classSummary?: {\n    classInfo: {\n      id: number;\n      code: string;\n      subject: {\n        id: number;\n        name: string;\n        code: string;\n      };\n      semester: {\n        id: number;\n        name: string;\n      };\n    };\n    enrollmentSummary: {\n      totalStudents: number;\n    };\n    attendanceStatistics: {\n      totalSlots: number;\n      completedSlots: number;\n      upcomingSlots: number;\n    };\n    slots: Array<{\n      slotId: number;\n      title: string;\n      description?: string;\n      startTime: string;\n      endTime: string;\n      slotCategory: \"LECTURE\" | \"LECTURE_WITH_PT\" | \"FINAL_EXAM\";\n    }>;\n    students: Array<{\n      userId: number;\n      fullName: string;\n      rollNumber: string;\n      email: string;\n      major: {\n        name: string;\n        code: string;\n      };\n      attendanceRecords: Record<number, \"PRESENT\" | \"ABSENT\" | \"present\" | \"absent\" | null>;\n    }>;\n  } | null;\n}\n\nexport function RegularSlotDetailModal({ slotId, isOpen, onClose, classSummary }: RegularSlotDetailModalProps) {\n  const [slotDetail, setSlotDetail] = useState<RegularSlotDetail | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const generateSlotDetailFromClassSummary = useCallback(() => {\n    if (!classSummary || !classSummary.students || !classSummary.slots) {\n      setSlotDetail(null);\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Find slot info from slots array\n      const slot = classSummary.slots.find(s => s.slotId === slotId);\n      if (!slot) {\n        setSlotDetail(null);\n        setLoading(false);\n        return;\n      }\n\n      // Build student list with attendance status from Map\n      const slotStudents: RegularSlotDetail['students'] = [];\n\n      classSummary.students.forEach(student => {\n        const status = student.attendanceRecords[slotId];\n\n        // Convert status: null = NOT_YET, normalize to uppercase\n        const attendanceStatus: \"PRESENT\" | \"ABSENT\" | \"NOT_YET\" =\n          status === null\n            ? \"NOT_YET\"\n            : (status.toUpperCase() as \"PRESENT\" | \"ABSENT\");\n\n        slotStudents.push({\n          userId: student.userId,\n          fullName: student.fullName,\n          rollNumber: student.rollNumber,\n          email: student.email,\n          major: student.major,\n          attendanceStatus,\n          updatedAt: undefined // Not available in Map format\n        });\n      });\n\n      if (slotStudents.length === 0) {\n        setSlotDetail(null);\n        setLoading(false);\n        return;\n      }\n\n      // Calculate statistics\n      const totalStudents = slotStudents.length;\n      const presentCount = slotStudents.filter(s => s.attendanceStatus === \"PRESENT\").length;\n      const absentCount = slotStudents.filter(s => s.attendanceStatus === \"ABSENT\").length;\n      const notYetCount = slotStudents.filter(s => s.attendanceStatus === \"NOT_YET\").length;\n      const attendanceRate = totalStudents > 0 ? (presentCount / totalStudents) * 100 : 0;\n\n      // Determine slot status based on current time and start time\n      const now = new Date();\n      const slotStart = new Date(slot.startTime);\n      const slotEnd = new Date(slot.endTime);\n\n      let status: \"completed\" | \"upcoming\" | \"ongoing\" = \"upcoming\";\n      if (now > slotEnd) {\n        status = \"completed\";\n      } else if (now >= slotStart && now <= slotEnd) {\n        status = \"ongoing\";\n      }\n\n      const slotDetail: RegularSlotDetail = {\n        slotId,\n        slotTitle: slot.title || `Slot ${slotId}`,\n        startTime: slot.startTime,\n        endTime: slot.endTime,\n        room: \"Room TBD\", // This info is not available in current data structure\n        status,\n        students: slotStudents,\n        statistics: {\n          totalStudents,\n          presentCount,\n          absentCount,\n          notYetCount,\n          attendanceRate: Math.round(attendanceRate * 10) / 10\n        }\n      };\n\n      setSlotDetail(slotDetail);\n    } catch (error) {\n      console.error(\"Error generating slot detail:\", error);\n      setSlotDetail(null);\n    } finally {\n      setLoading(false);\n    }\n  }, [slotId, classSummary]);\n\n  useEffect(() => {\n    if (isOpen && slotId && classSummary) {\n      generateSlotDetailFromClassSummary();\n    }\n  }, [isOpen, slotId, classSummary, generateSlotDetailFromClassSummary]);\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"PRESENT\":\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case \"ABSENT\":\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case \"NOT_YET\":\n        return <AlertCircle className=\"h-4 w-4 text-yellow-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"PRESENT\":\n        return <Badge className=\"bg-green-100 text-green-800 hover:bg-green-100\">Present</Badge>;\n      case \"ABSENT\":\n        return <Badge className=\"bg-red-100 text-red-800 hover:bg-red-100\">Absent</Badge>;\n      case \"NOT_YET\":\n        return <Badge className=\"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\">Not Yet</Badge>;\n      default:\n        return null;\n    }\n  };\n\n  const exportToCSV = () => {\n    if (!slotDetail) return;\n\n    // Class and slot information section\n    const classInfoSection = classSummary ? [\n      \"CLASS INFORMATION\",\n      \"\",\n      `Class Code,${classSummary.classInfo.code}`,\n      `Subject,${classSummary.classInfo.subject.name} (${classSummary.classInfo.subject.code})`,\n      `Semester,${classSummary.classInfo.semester.name}`,\n      `Total Students in Class,${classSummary.enrollmentSummary.totalStudents}`,\n      \"\",\n      \"SLOT INFORMATION\",\n      \"\",\n      `Slot ID,${slotDetail.slotId}`,\n      `Slot Title,${slotDetail.slotTitle}`,\n      `Date & Time,${format(parseISO(slotDetail.startTime), 'yyyy-MM-dd HH:mm')} - ${format(parseISO(slotDetail.endTime), 'HH:mm')}`,\n      `Room,${slotDetail.room}`,\n      `Status,${slotDetail.status}`,\n      \"\",\n      \"SLOT ATTENDANCE STATISTICS\",\n      \"\",\n      `Total Students in Slot,${slotDetail.statistics.totalStudents}`,\n      `Present,${slotDetail.statistics.presentCount}`,\n      `Absent,${slotDetail.statistics.absentCount}`,\n      `Not Yet,${slotDetail.statistics.notYetCount}`,\n      `Slot Attendance Rate,${slotDetail.statistics.attendanceRate.toFixed(1)}%`,\n      \"\",\n      \"INDIVIDUAL STUDENT ATTENDANCE\",\n      \"\"\n    ] : [];\n\n    // Student data headers\n    const headers = [\n      \"Roll Number\", \n      \"Full Name\", \n      \"Email\", \n      \"Major\", \n      \"Attendance Status\", \n      \"Updated At\"\n    ];\n    \n    // Student data rows\n    const studentRows = slotDetail.students.map(student => {\n      return [\n        student.rollNumber,\n        `\"${student.fullName}\"`,\n        student.email,\n        student.major.code,\n        student.attendanceStatus,\n        student.updatedAt ? format(parseISO(student.updatedAt), 'yyyy-MM-dd HH:mm:ss') : \"Not recorded\"\n      ].join(\",\");\n    });\n\n    const csvContent = [\n      ...classInfoSection,\n      headers.join(\",\"),\n      ...studentRows,\n      \"\",\n      `Export Date,${new Date().toLocaleString()}`,\n      `Generated by,Class Attendance Management System`\n    ].join(\"\\n\");\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement(\"a\");\n    const url = URL.createObjectURL(blob);\n    link.setAttribute(\"href\", url);\n    \n    // Generate filename with class and slot info\n    const filename = classSummary \n      ? `${classSummary.classInfo.code}_Slot${slotId}_${format(parseISO(slotDetail.startTime), 'yyyy-MM-dd')}_attendance.csv`\n      : `slot-${slotId}-attendance.csv`;\n    \n    link.setAttribute(\"download\", filename.replace(/\\s+/g, '_'));\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent \n        className=\"max-h-[90vh] overflow-y-auto\"\n        style={{ maxWidth: '85vw', width: '85vw' }}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5\" />\n            Class Attendance Detail\n          </DialogTitle>\n        </DialogHeader>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\n              <span>Loading slot details...</span>\n            </div>\n          </div>\n        ) : slotDetail ? (\n          <div className=\"space-y-6\">\n            {/* Slot Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">{slotDetail.slotTitle}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Time</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {format(parseISO(slotDetail.startTime), 'MMM dd, yyyy HH:mm')} - \n                        {format(parseISO(slotDetail.endTime), 'HH:mm')}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Room</p>\n                      <p className=\"text-sm text-muted-foreground\">{slotDetail.room}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Status</p>\n                      <Badge variant={slotDetail.status === 'completed' ? 'secondary' : 'outline'}>\n                        {slotDetail.status}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Statistics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Total Students</p>\n                      <p className=\"text-2xl font-bold\">{slotDetail.statistics.totalStudents}</p>\n                    </div>\n                    <Users className=\"h-6 w-6 text-blue-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Present</p>\n                      <p className=\"text-2xl font-bold text-green-600\">{slotDetail.statistics.presentCount}</p>\n                    </div>\n                    <CheckCircle className=\"h-6 w-6 text-green-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Absent</p>\n                      <p className=\"text-2xl font-bold text-red-600\">{slotDetail.statistics.absentCount}</p>\n                    </div>\n                    <XCircle className=\"h-6 w-6 text-red-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Not Yet</p>\n                      <p className=\"text-2xl font-bold text-yellow-600\">{slotDetail.statistics.notYetCount}</p>\n                    </div>\n                    <AlertCircle className=\"h-6 w-6 text-yellow-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Student List */}\n            <Card>\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Users className=\"h-5 w-5\" />\n                    Student Attendance List\n                  </CardTitle>\n                  <Button onClick={exportToCSV} variant=\"outline\" size=\"sm\">\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Export CSV\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {slotDetail.students.map((student) => (\n                    <div\n                      key={student.userId}\n                      className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"flex items-center gap-2\">\n                          {getStatusIcon(student.attendanceStatus)}\n                          <User className=\"h-4 w-4 text-muted-foreground\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{student.fullName}</p>\n                          <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                            <span>{student.rollNumber}</span>\n                            <span>‚Ä¢</span>\n                            <span>{student.major.code}</span>\n                            <span>‚Ä¢</span>\n                            <span>{student.email}</span>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-3\">\n                        {student.updatedAt ? (\n                          <span className=\"text-xs text-muted-foreground\">\n                            Updated: {format(parseISO(student.updatedAt), 'HH:mm')}\n                          </span>\n                        ) : (\n                          <span className=\"text-xs text-muted-foreground\">\n                            No update time\n                          </span>\n                        )}\n                        {getStatusBadge(student.attendanceStatus)}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        ) : (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>No attendance data available for this slot</p>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\reports\\slot-detail-modal.tsx",
      "relative_path": "components/lecturer/reports/slot-detail-modal.tsx",
      "filename": "slot-detail-modal.tsx",
      "size_bytes": 18257,
      "lines": 528,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Users,\n  Clock,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  Download,\n  User,\n} from \"lucide-react\";\nimport { format, parseISO } from \"date-fns\";\nimport { exportExamSlotToExcel } from \"@/lib/excel-utils\";\n\ninterface ExamSlotDetail {\n  slotId: number;\n  title: string;\n  description: string;\n  startTime: string;\n  endTime: string;\n  room: {\n    id: number;\n    name: string;\n    location: string;\n  };\n  staff: {\n    id: number;\n    username: string;\n    email: string;\n    fullName: string;\n  };\n  sessionStatus: \"COMPLETED\" | \"UPCOMING\" | \"ONGOING\";\n  subjects: Array<{\n    id: number;\n    name: string;\n    code: string;\n  }>;\n  students: Array<{\n    studentId: number;\n    rollNumber: string;\n    fullName: string;\n    subjectCode: string;\n    subjectName: string;\n    attendanceId: number;\n    status: \"present\" | \"absent\" | \"late\";\n    method: string;\n    recordedAt: string;\n    checkInTime?: string;\n    remark?: string;\n  }>;\n  statistics: {\n    totalStudents: number;\n    presentCount: number;\n    absentCount: number;\n    lateCount: number;\n  };\n}\n\ninterface SlotDetailModalProps {\n  slotId: number;\n  isOpen: boolean;\n  onClose: () => void;\n  examData?: ExamSlotDetail | null;\n  slotType?: \"exam\" | \"regular\";\n}\n\nexport function SlotDetailModal({\n  slotId,\n  isOpen,\n  onClose,\n  examData,\n  slotType = \"regular\",\n}: SlotDetailModalProps) {\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && slotId && !examData) {\n      // If no examData is provided, we could fetch it here\n      // For now, we'll just show loading or empty state\n      setLoading(false);\n    }\n  }, [isOpen, slotId, examData]);\n\n  const getStatusIcon = (status: string) => {\n    switch (status.toLowerCase()) {\n      case \"present\":\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case \"absent\":\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case \"late\":\n        return <AlertCircle className=\"h-4 w-4 text-yellow-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status.toLowerCase()) {\n      case \"present\":\n        return (\n          <Badge className=\"bg-green-100 text-green-800 hover:bg-green-100\">\n            Present\n          </Badge>\n        );\n      case \"absent\":\n        return (\n          <Badge className=\"bg-red-100 text-red-800 hover:bg-red-100\">\n            Absent\n          </Badge>\n        );\n      case \"late\":\n        return (\n          <Badge className=\"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\">\n            Late\n          </Badge>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const exportToCSV = () => {\n    if (!examData) return;\n\n    // Exam slot information section\n    const examInfoSection = [\n      \"EXAM SLOT INFORMATION\",\n      \"\",\n      `Slot ID,${examData.slotId}`,\n      `Title,${examData.title}`,\n      `Description,${examData.description}`,\n      `Date & Time,${format(\n        parseISO(examData.startTime),\n        \"yyyy-MM-dd HH:mm\"\n      )} - ${format(parseISO(examData.endTime), \"HH:mm\")}`,\n      `Room,${examData.room.name}`,\n      `Room Location,${examData.room.location}`,\n      `Supervisor,${examData.staff?.fullName || \"N/A\"} (${examData.staff?.email || \"N/A\"})`,\n      `Session Status,${examData.sessionStatus}`,\n      \"\",\n      \"SUBJECTS\",\n      \"\",\n      ...examData.subjects.map((subject) => `${subject.code},${subject.name}`),\n      \"\",\n      \"ATTENDANCE STATISTICS\",\n      \"\",\n      `Total Students,${examData.statistics.totalStudents}`,\n      `Present,${examData.statistics.presentCount}`,\n      `Absent,${examData.statistics.absentCount}`,\n      `Late,${examData.statistics.lateCount}`,\n      `Attendance Rate,${(\n        (examData.statistics.presentCount / examData.statistics.totalStudents) *\n        100\n      ).toFixed(1)}%`,\n      \"\",\n      \"INDIVIDUAL STUDENT ATTENDANCE\",\n      \"\",\n    ];\n\n    // Student data headers\n    const headers = [\n      \"Roll Number\",\n      \"Full Name\",\n      \"Subject Code\",\n      \"Subject Name\",\n      \"Attendance Status\",\n      \"Method\",\n      \"Recorded At\",\n      \"Check In Time\",\n      \"Remark\",\n    ];\n\n    // Student data rows\n    const studentRows = examData.students.map((student) => {\n      return [\n        student.rollNumber,\n        `\"${student.fullName}\"`,\n        student.subjectCode,\n        `\"${student.subjectName}\"`,\n        student.status,\n        student.method,\n        format(parseISO(student.recordedAt), \"yyyy-MM-dd HH:mm:ss\"),\n        student.checkInTime\n          ? format(parseISO(student.checkInTime), \"yyyy-MM-dd HH:mm:ss\")\n          : \"Not recorded\",\n        `\"${student.remark || \"\"}\"`,\n      ].join(\",\");\n    });\n\n    // Summary statistics by subject\n    const subjectStats = examData.subjects\n      .map((subject) => {\n        const subjectStudents = examData.students.filter(\n          (s) => s.subjectCode === subject.code\n        );\n        const presentCount = subjectStudents.filter(\n          (s) => s.status === \"present\"\n        ).length;\n        const absentCount = subjectStudents.filter(\n          (s) => s.status === \"absent\"\n        ).length;\n        const lateCount = subjectStudents.filter(\n          (s) => s.status === \"late\"\n        ).length;\n        const total = subjectStudents.length;\n\n        return [\n          \"\",\n          `SUBJECT: ${subject.code} - ${subject.name}`,\n          `Total Students,${total}`,\n          `Present,${presentCount} (${\n            total > 0 ? ((presentCount / total) * 100).toFixed(1) : 0\n          }%)`,\n          `Absent,${absentCount} (${\n            total > 0 ? ((absentCount / total) * 100).toFixed(1) : 0\n          }%)`,\n          `Late,${lateCount} (${\n            total > 0 ? ((lateCount / total) * 100).toFixed(1) : 0\n          }%)`,\n        ];\n      })\n      .flat();\n\n    const summarySection = [\n      \"\",\n      \"SUMMARY BY SUBJECT\",\n      ...subjectStats,\n      \"\",\n      `Export Date,${new Date().toLocaleString()}`,\n      `Generated by,Exam Attendance Management System`,\n    ];\n\n    const csvContent = [\n      ...examInfoSection,\n      headers.join(\",\"),\n      ...studentRows,\n      ...summarySection,\n    ].join(\"\\n\");\n\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    const link = document.createElement(\"a\");\n    const url = URL.createObjectURL(blob);\n    link.setAttribute(\"href\", url);\n\n    // Generate filename with exam slot info\n    const filename = `ExamSlot${examData.slotId}_${format(\n      parseISO(examData.startTime),\n      \"yyyy-MM-dd\"\n    )}_attendance.csv`;\n\n    link.setAttribute(\"download\", filename.replace(/\\s+/g, \"_\"));\n    link.style.visibility = \"hidden\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const exportToExcel = () => {\n    if (!examData) return;\n    exportExamSlotToExcel(examData);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent\n        className=\"max-h-[90vh] overflow-y-auto\"\n        style={{ maxWidth: \"85vw\", width: \"85vw\" }}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5\" />\n            {slotType === \"exam\"\n              ? \"Exam Attendance Detail\"\n              : \"Class Attendance Detail\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\n              <span>Loading exam details...</span>\n            </div>\n          </div>\n        ) : examData ? (\n          <div className=\"space-y-6\">\n            {/* Exam Slot Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">{examData.title}</CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                  {examData.description}\n                </p>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Time</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {format(\n                          parseISO(examData.startTime),\n                          \"MMM dd, yyyy HH:mm\"\n                        )}{\" \"}\n                        -{format(parseISO(examData.endTime), \"HH:mm\")}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Room</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {examData.room.name}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {examData.room.location}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <User className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Supervisor</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {examData.staff?.fullName || \"N/A\"}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {examData.staff?.email || \"N/A\"}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">Status</p>\n                      <Badge\n                        variant={\n                          examData.sessionStatus === \"COMPLETED\"\n                            ? \"secondary\"\n                            : \"outline\"\n                        }\n                      >\n                        {examData.sessionStatus}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Subjects */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Exam Subjects</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-wrap gap-2\">\n                  {examData.subjects.map((subject) => (\n                    <Badge\n                      key={subject.id}\n                      variant=\"outline\"\n                      className=\"px-3 py-1\"\n                    >\n                      {subject.code} - {subject.name}\n                    </Badge>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Statistics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">\n                        Total Students\n                      </p>\n                      <p className=\"text-2xl font-bold\">\n                        {examData.statistics.totalStudents}\n                      </p>\n                    </div>\n                    <Users className=\"h-6 w-6 text-blue-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">\n                        Present\n                      </p>\n                      <p className=\"text-2xl font-bold text-green-600\">\n                        {examData.statistics.presentCount}\n                      </p>\n                    </div>\n                    <CheckCircle className=\"h-6 w-6 text-green-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">\n                        Absent\n                      </p>\n                      <p className=\"text-2xl font-bold text-red-600\">\n                        {examData.statistics.absentCount}\n                      </p>\n                    </div>\n                    <XCircle className=\"h-6 w-6 text-red-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">\n                        Late\n                      </p>\n                      <p className=\"text-2xl font-bold text-yellow-600\">\n                        {examData.statistics.lateCount}\n                      </p>\n                    </div>\n                    <AlertCircle className=\"h-6 w-6 text-yellow-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Student List */}\n            <Card>\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Users className=\"h-5 w-5\" />\n                    Student Attendance List ({examData.students.length}{\" \"}\n                    students)\n                  </CardTitle>\n                  <div className=\"flex gap-2\">\n                    <Button onClick={exportToCSV} variant=\"outline\" size=\"sm\">\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Export CSV\n                    </Button>\n                    <Button onClick={exportToExcel} variant=\"outline\" size=\"sm\">\n                      <Download className=\"h-4 w-4 mr-2\" />\n                      Export Excel\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {examData.students.map((student) => (\n                    <div\n                      key={student.studentId}\n                      className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"flex items-center gap-2\">\n                          {getStatusIcon(student.status)}\n                          <User className=\"h-4 w-4 text-muted-foreground\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{student.fullName}</p>\n                          <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                            <span>{student.rollNumber}</span>\n                            <span>‚Ä¢</span>\n                            <span>{student.subjectCode}</span>\n                            <span>‚Ä¢</span>\n                            <span>{student.subjectName}</span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"text-right\">\n                          <p className=\"text-xs text-muted-foreground\">\n                            Recorded:{\" \"}\n                            {format(parseISO(student.recordedAt), \"HH:mm\")}\n                          </p>\n                          {student.checkInTime && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              Check-in:{\" \"}\n                              {format(parseISO(student.checkInTime), \"HH:mm\")}\n                            </p>\n                          )}\n                          <p className=\"text-xs text-muted-foreground\">\n                            Method: {student.method}\n                          </p>\n                        </div>\n                        {getStatusBadge(student.status)}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        ) : (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n            <p>No exam data available</p>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\reports\\student-attendance-table.tsx",
      "relative_path": "components/lecturer/reports/student-attendance-table.tsx",
      "filename": "student-attendance-table.tsx",
      "size_bytes": 7155,
      "lines": 207,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Users,\n  Search,\n  Mail,\n  User,\n  TrendingUp,\n  TrendingDown\n} from \"lucide-react\";\n\ninterface Student {\n  userId: number;\n  fullName: string;\n  rollNumber: string;\n  email: string;\n  major: {\n    name: string;\n    code: string;\n  };\n  attendanceSummary: {\n    totalSlots: number;\n    presentCount: number;\n    absentCount: number;\n    notYetCount: number;\n  };\n  attendanceRecords: Record<number, \"PRESENT\" | \"ABSENT\" | \"present\" | \"absent\" | null>;\n}\n\ninterface StudentAttendanceTableProps {\n  students: Student[];\n}\n\nexport function StudentAttendanceTable({ students }: StudentAttendanceTableProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [sortBy, setSortBy] = useState<\"name\" | \"rollNumber\">(\"name\");\n  const [sortOrder, setSortOrder] = useState<\"asc\" | \"desc\">(\"asc\");\n\n  // Filter and sort students\n  const filteredAndSortedStudents = students\n    .filter(student => {\n      // Search filter only\n      const matchesSearch =\n        student.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        student.rollNumber.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        student.email.toLowerCase().includes(searchTerm.toLowerCase());\n\n      return matchesSearch;\n    })\n    .sort((a, b) => {\n      let aValue: string;\n      let bValue: string;\n\n      switch (sortBy) {\n        case \"name\":\n          aValue = a.fullName;\n          bValue = b.fullName;\n          break;\n        case \"rollNumber\":\n          aValue = a.rollNumber;\n          bValue = b.rollNumber;\n          break;\n        default:\n          aValue = a.fullName;\n          bValue = b.fullName;\n      }\n\n      return sortOrder === \"asc\"\n        ? aValue.localeCompare(bValue)\n        : bValue.localeCompare(aValue);\n    });\n\n  const handleSort = (column: \"name\" | \"rollNumber\") => {\n    if (sortBy === column) {\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortBy(column);\n      setSortOrder(\"asc\");\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Users className=\"h-5 w-5\" />\n          Student Attendance Summary ({filteredAndSortedStudents.length} students)\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Search Filter */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search by name, roll number, or email...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n\n        {/* Table */}\n        <div className=\"border rounded-lg\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/50\"\n                  onClick={() => handleSort(\"rollNumber\")}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Roll Number\n                    {sortBy === \"rollNumber\" && (\n                      sortOrder === \"asc\" ? <TrendingUp className=\"h-4 w-4\" /> : <TrendingDown className=\"h-4 w-4\" />\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead \n                  className=\"cursor-pointer hover:bg-muted/50\"\n                  onClick={() => handleSort(\"name\")}\n                >\n                  <div className=\"flex items-center gap-2\">\n                    Student Name\n                    {sortBy === \"name\" && (\n                      sortOrder === \"asc\" ? <TrendingUp className=\"h-4 w-4\" /> : <TrendingDown className=\"h-4 w-4\" />\n                    )}\n                  </div>\n                </TableHead>\n                <TableHead>Major</TableHead>\n                <TableHead className=\"text-center\">Present</TableHead>\n                <TableHead className=\"text-center\">Absent</TableHead>\n                <TableHead className=\"text-center\">Not Yet</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredAndSortedStudents.map((student) => (\n                <TableRow key={student.userId} className=\"hover:bg-muted/50\">\n                  <TableCell className=\"font-medium\">\n                    {student.rollNumber}\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"space-y-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <User className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"font-medium\">{student.fullName}</span>\n                      </div>\n                      <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                        <Mail className=\"h-3 w-3\" />\n                        {student.email}\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">\n                      {student.major.code}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"text-center\">\n                    <span className=\"font-medium text-green-600\">\n                      {student.attendanceSummary.presentCount}\n                    </span>\n                  </TableCell>\n                  <TableCell className=\"text-center\">\n                    <span className=\"font-medium text-red-600\">\n                      {student.attendanceSummary.absentCount}\n                    </span>\n                  </TableCell>\n                  <TableCell className=\"text-center\">\n                    <span className=\"font-medium text-yellow-600\">\n                      {student.attendanceSummary.notYetCount}\n                    </span>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          \n          {filteredAndSortedStudents.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n              <p>No students found matching your criteria</p>\n            </div>\n          )}\n        </div>\n\n        {/* Summary */}\n        {filteredAndSortedStudents.length > 0 && (\n          <div className=\"text-sm text-muted-foreground\">\n            Showing {filteredAndSortedStudents.length} of {students.length} students\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\roster-actions.tsx",
      "relative_path": "components/lecturer/roster-actions.tsx",
      "filename": "roster-actions.tsx",
      "size_bytes": 1501,
      "lines": 63,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Camera, Send, FileText, Bell } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface RosterActionsProps {\n  onCameraView: () => void;\n  onSubmit: () => void;\n  onFormRoster: () => void;\n  onNotifications: () => void;\n  isSubmitting?: boolean;\n  isStartDisabled?: boolean;\n}\n\nexport function RosterActions({\n  onCameraView,\n  onSubmit,\n  onFormRoster,\n  onNotifications,\n  isSubmitting = false,\n  isStartDisabled = false,\n}: RosterActionsProps) {\n  return (\n    <div className=\"space-y-3\">\n      <Button\n        onClick={onCameraView}\n        variant=\"outline\"\n        className=\"w-full justify-start\"\n        disabled={isStartDisabled}\n      >\n        <Camera className=\"mr-2 h-4 w-4\" />\n        Start Attendance\n      </Button>\n\n      <Button\n        onClick={onSubmit}\n        className=\"w-full justify-start\"\n        disabled={isSubmitting}\n      >\n        <Send className=\"mr-2 h-4 w-4\" />\n        {isSubmitting ? \"Submitting...\" : \"Submit\"}\n      </Button>\n\n      <Button\n        onClick={onFormRoster}\n        variant=\"outline\"\n        className=\"w-full justify-start\"\n      >\n        <FileText className=\"mr-2 h-4 w-4\" />\n        Form Roster\n      </Button>\n\n      <Button\n        onClick={onNotifications}\n        variant=\"outline\"\n        className=\"w-full justify-start\"\n      >\n        <Bell className=\"mr-2 h-4 w-4\" />\n        Notifications\n      </Button>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\schedule\\schedule-filters.tsx",
      "relative_path": "components/lecturer/schedule/schedule-filters.tsx",
      "filename": "schedule-filters.tsx",
      "size_bytes": 4461,
      "lines": 135,
      "last_modified": "2025-11-28T09:21:56.247963",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { SlidersHorizontal } from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\n\ninterface FilterOption {\n  id: number;\n  name: string;\n  code: string;\n}\n\ninterface ScheduleFiltersProps {\n  selectedClass?: number;\n  selectedSubject?: number;\n  onClassChange: (value: number | undefined) => void;\n  onSubjectChange: (value: number | undefined) => void;\n  onClearAll: () => void;\n  classes: { id: number; code: string; subject: { name: string } }[];\n  subjects: FilterOption[];\n  isLoading?: boolean;\n}\n\nexport function ScheduleFilters({\n  selectedClass,\n  selectedSubject,\n  onClassChange,\n  onSubjectChange,\n  onClearAll,\n  classes,\n  subjects,\n  isLoading = false,\n}: ScheduleFiltersProps) {\n  const t = useTranslations(\"schedule\");\n  const [filtersOpen, setFiltersOpen] = useState(false);\n\n  const hasActiveFilters = !!(selectedClass || selectedSubject);\n  const activeFilterCount = [selectedClass, selectedSubject].filter(Boolean).length;\n\n  return (\n    <Popover open={filtersOpen} onOpenChange={setFiltersOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"relative\">\n          <SlidersHorizontal className=\"mr-2 h-4 w-4\" />\n          {t(\"filters.title\")}\n          {hasActiveFilters && (\n            <span className=\"ml-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-primary-foreground text-xs\">\n              {activeFilterCount}\n            </span>\n          )}\n        </Button>\n      </PopoverTrigger>\n\n      <PopoverContent className=\"w-[400px] p-4\" align=\"start\">\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"font-semibold\">{t(\"filters.filter_schedule\")}</h4>\n            {hasActiveFilters && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClearAll}\n                className=\"h-auto p-0 text-xs\"\n              >\n                {t(\"filters.clear_all\")}\n              </Button>\n            )}\n          </div>\n\n          {/* Class filter */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">{t(\"filters.class\")}</label>\n            <Select\n              value={selectedClass?.toString() || \"all\"}\n              onValueChange={(value) =>\n                onClassChange(value === \"all\" ? undefined : parseInt(value))\n              }\n              disabled={isLoading}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t(\"filters.all_classes\")} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{t(\"filters.all_classes\")}</SelectItem>\n                {classes.map((cls) => (\n                  <SelectItem key={cls.id} value={cls.id.toString()}>\n                    {cls.code} - {cls.subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Subject filter */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">{t(\"filters.subject\")}</label>\n            <Select\n              value={selectedSubject?.toString() || \"all\"}\n              onValueChange={(value) =>\n                onSubjectChange(value === \"all\" ? undefined : parseInt(value))\n              }\n              disabled={isLoading}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder={t(\"filters.all_subjects\")} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{t(\"filters.all_subjects\")}</SelectItem>\n                {subjects.map((subject) => (\n                  <SelectItem key={subject.id} value={subject.id.toString()}>\n                    {subject.code} - {subject.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\schedule\\schedule-header.tsx",
      "relative_path": "components/lecturer/schedule/schedule-header.tsx",
      "filename": "schedule-header.tsx",
      "size_bytes": 1427,
      "lines": 48,
      "last_modified": "2025-11-28T09:21:56.249467",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { formatWeekRange } from \"@/lib/calendar-utils\";\nimport { useTranslations } from \"next-intl\";\n\ninterface ScheduleHeaderProps {\n  dateRange: { mondayDate: Date; sundayDate: Date };\n  onPrevious: () => void;\n  onNext: () => void;\n  onToday: () => void;\n}\n\nexport function ScheduleHeader({\n  dateRange,\n  onPrevious,\n  onNext,\n  onToday,\n}: ScheduleHeaderProps) {\n  const t = useTranslations(\"schedule\");\n  const { mondayDate, sundayDate } = dateRange;\n  const weekRangeText = formatWeekRange(mondayDate, sundayDate);\n\n  return (\n    <div className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n      {/* Week range display */}\n      <div className=\"text-xl font-semibold\">{weekRangeText}</div>\n\n      {/* Navigation buttons */}\n      <div className=\"flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={onPrevious}>\n          <ChevronLeft className=\"h-4 w-4 mr-1\" />\n          {t(\"previous\")}\n        </Button>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={onToday}>\n          {t(\"today\")}\n        </Button>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={onNext}>\n          {t(\"next\")}\n          <ChevronRight className=\"h-4 w-4 ml-1\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\schedule\\schedule-slot-detail-dialog.tsx",
      "relative_path": "components/lecturer/schedule/schedule-slot-detail-dialog.tsx",
      "filename": "schedule-slot-detail-dialog.tsx",
      "size_bytes": 7518,
      "lines": 204,
      "last_modified": "2025-11-28T09:21:56.249467",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { Slot } from \"@/types\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { formatTimeRange, formatFullDate } from \"@/lib/calendar-utils\";\nimport { parseISO } from \"date-fns\";\nimport {\n  Clock,\n  MapPin,\n  Users,\n  Calendar,\n  BookOpen,\n} from \"lucide-react\";\nimport { useTranslations } from \"next-intl\";\n\ninterface ScheduleSlotDetailDialogProps {\n  slot: Slot | null;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function ScheduleSlotDetailDialog({\n  slot,\n  open,\n  onOpenChange,\n}: ScheduleSlotDetailDialogProps) {\n  const t = useTranslations(\"schedule\");\n  const router = useRouter();\n\n  if (!slot) return null;\n\n  const classCode = slot.class?.code || \"EXAM\";\n  const subjectName =\n    slot.class?.subject.name || slot.subjects?.[0]?.name || \"Final Exam\";\n  const subjectCode =\n    slot.class?.subject.code || slot.subjects?.[0]?.code || \"\";\n  const timeRange = formatTimeRange(slot.startTime, slot.endTime);\n  const fullDate = formatFullDate(parseISO(slot.startTime));\n\n  const handleManageAttendance = () => {\n    router.push(`/lecturer/slots/${slot.id}/roster`);\n    onOpenChange(false);\n  };\n\n  const categoryLabels = {\n    LECTURE: \"Lecture\",\n    LECTURE_WITH_PT: \"Lecture with Progress Test\",\n    FINAL_EXAM: \"Final Exam\",\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">{classCode}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Subject info */}\n          <div>\n            <h3 className=\"font-semibold text-lg\">{subjectName}</h3>\n            <p className=\"text-sm text-muted-foreground\">{subjectCode}</p>\n          </div>\n\n          {/* Date & Time */}\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"flex items-start gap-3\">\n              <Calendar className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium\">{t(\"detail_dialog.date\")}</p>\n                <p className=\"text-sm text-muted-foreground\">{fullDate}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start gap-3\">\n              <Clock className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium\">{t(\"detail_dialog.time\")}</p>\n                <p className=\"text-sm text-muted-foreground\">{timeRange}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Room */}\n          <div className=\"flex items-start gap-3\">\n            <MapPin className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"detail_dialog.room\")}</p>\n              <p className=\"text-sm text-muted-foreground\">\n                {slot.room.name}\n                {slot.room.location && ` - ${slot.room.location}`}\n              </p>\n            </div>\n          </div>\n\n          {/* Category & Status */}\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\">\n              {categoryLabels[slot.slotCategory]}\n            </Badge>\n            {slot.semester && (\n              <Badge variant=\"outline\">{slot.semester.code}</Badge>\n            )}\n            {!slot.isActive && <Badge variant=\"destructive\">{t(\"detail_dialog.inactive\")}</Badge>}\n          </div>\n\n          {/* Title & Description */}\n          {slot.title && (\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"detail_dialog.title\")}</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">{slot.title}</p>\n            </div>\n          )}\n\n          {slot.description && (\n            <div>\n              <p className=\"text-sm font-medium\">{t(\"detail_dialog.description\")}</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {slot.description}\n              </p>\n            </div>\n          )}\n\n          {/* Attendance stats */}\n          {slot.totalStudent > 0 && (\n            <div className=\"border-t pt-4\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Users className=\"h-5 w-5 text-muted-foreground\" />\n                <p className=\"text-sm font-medium\">{t(\"detail_dialog.attendance\")}</p>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"text-center p-3 rounded-lg bg-green-50 dark:bg-green-950\">\n                  <p className=\"text-2xl font-bold text-green-700 dark:text-green-400\">\n                    {slot.totalPresentStudent}\n                  </p>\n                  <p className=\"text-xs text-green-600 dark:text-green-500 mt-1\">{t(\"detail_dialog.present\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalPresentStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n\n                <div className=\"text-center p-3 rounded-lg bg-red-50 dark:bg-red-950\">\n                  <p className=\"text-2xl font-bold text-red-700 dark:text-red-400\">\n                    {slot.totalAbsentStudent}\n                  </p>\n                  <p className=\"text-xs text-red-600 dark:text-red-500 mt-1\">{t(\"detail_dialog.absent\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalAbsentStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n\n                <div className=\"text-center p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950\">\n                  <p className=\"text-2xl font-bold text-yellow-700 dark:text-yellow-400\">\n                    {slot.totalNotYetStudent}\n                  </p>\n                  <p className=\"text-xs text-yellow-600 dark:text-yellow-500 mt-1\">{t(\"detail_dialog.pending\")}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {Math.round(\n                      (slot.totalNotYetStudent / slot.totalStudent) * 100\n                    )}\n                    %\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"mt-3 text-center\">\n                <p className=\"text-sm text-muted-foreground\">\n                  {t(\"detail_dialog.total_students\")}:{\" \"}\n                  <span className=\"font-semibold\">{slot.totalStudent}</span>\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-2 pt-4 border-t\">\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n              {t(\"detail_dialog.close\")}\n            </Button>\n            <Button onClick={handleManageAttendance}>\n              <BookOpen className=\"h-4 w-4 mr-2\" />\n              {t(\"detail_dialog.manage_attendance\")}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\slots\\lecturer-slot-columns.tsx",
      "relative_path": "components/lecturer/slots/lecturer-slot-columns.tsx",
      "filename": "lecturer-slot-columns.tsx",
      "size_bytes": 9979,
      "lines": 301,
      "last_modified": "2025-11-28T09:21:56.249467",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { Eye, MoreHorizontal, Pencil } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { Slot } from \"@/types\";\nimport { format } from \"date-fns\";\n\ntype TranslationFunction = (key: string) => string;\n\nconst formatSlotTime = (startTime: string, endTime: string) => {\n  const start = new Date(startTime);\n  const end = new Date(endTime);\n  return `${format(start, \"MMM d, h:mm a\")} - ${format(end, \"h:mm a\")}`;\n};\n\nexport const createLecturerSlotColumns = (\n  onEdit: (slot: Slot) => void,\n  onViewRoster: (slot: Slot) => void,\n  t: TranslationFunction\n): ColumnDef<Slot>[] => [\n  {\n    id: \"semester\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.semester\")}</div>,\n    cell: ({ row }) => {\n      // Uu tien class.semester (LECTURE/LECTURE_WITH_PT - case chinh cua lecturer)\n      // Fallback ve semester (cho FINAL_EXAM - khong co trong lecturer nhung de safe)\n      const semester = row.original.class?.semester || row.original.semester;\n\n      if (!semester) {\n        return (\n          <div className=\"flex justify-center\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {t(\"slots.columns.na\")}\n            </Badge>\n          </div>\n        );\n      }\n\n      return (\n        <div className=\"flex justify-center\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"outline\"\n                  className=\"text-xs cursor-help\"\n                >\n                  {semester.code}\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\">\n                <p>{semester.name}</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      );\n    },\n  },\n  {\n    id: \"class\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.class\")}</div>,\n    cell: ({ row }) => {\n      const classData = row.original.class;\n      if (!classData) {\n        return (\n          <div className=\"flex justify-center\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {t(\"slots.columns.independent_exam\")}\n            </Badge>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex justify-center\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"outline\"\n                  className=\"text-xs\"\n                >\n                  {classData.code}\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent>\n                <p className=\"font-semibold\">{classData.subject.name}</p>\n                <p className=\"text-xs text-muted-foreground\">\n                  {classData.subject.code} - {classData.semester.name}\n                </p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      );\n    },\n  },\n  {\n    id: \"subject\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.subject\")}</div>,\n    cell: ({ row }) => {\n      const classData = row.original.class;\n\n      // For slots without class (e.g., FINAL_EXAM), show \"N/A\"\n      if (!classData) {\n        return (\n          <div className=\"flex justify-center\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {t(\"slots.columns.na\")}\n            </Badge>\n          </div>\n        );\n      }\n\n      const subject = classData.subject;\n      return (\n        <div className=\"flex justify-center\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"outline\"\n                  className=\"text-xs cursor-help\"\n                >\n                  {subject.code}\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\">\n                <p>{subject.name}</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      );\n    },\n  },\n  {\n    accessorKey: \"slotCategory\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.category\")}</div>,\n    cell: ({ row }) => {\n      const category = row.getValue(\"slotCategory\") as string;\n      const displayText = category.replace(/_/g, \" \");\n      return (\n        <div className=\"flex justify-center\">\n          <Badge variant=\"outline\" className=\"text-xs whitespace-nowrap\">\n            {displayText}\n          </Badge>\n        </div>\n      );\n    },\n  },\n  {\n    id: \"room\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.room\")}</div>,\n    cell: ({ row }) => {\n      const room = row.original.room;\n      return (\n        <div className=\"flex justify-center\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"outline\"\n                  className=\"text-xs cursor-help min-w-[100px] justify-center\"\n                >\n                  <span className=\"truncate\">{room.name}</span>\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\">\n                <div className=\"space-y-1\">\n                  <p className=\"font-medium\">{room.name}</p>\n                  {room.location && (\n                    <p className=\"text-xs text-muted-foreground\">\n                      {room.location}\n                    </p>\n                  )}\n                </div>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      );\n    },\n  },\n  {\n    id: \"time\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.time\")}</div>,\n    cell: ({ row }) => {\n      const { startTime, endTime } = row.original;\n      return (\n        <div className=\"text-center text-sm text-muted-foreground whitespace-nowrap\">\n          {formatSlotTime(startTime, endTime)}\n        </div>\n      );\n    },\n  },\n  {\n    id: \"stats\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.attendance\")}</div>,\n    cell: ({ row }) => {\n      const {\n        totalStudent,\n        totalPresentStudent,\n        totalAbsentStudent,\n        totalNotYetStudent,\n      } = row.original;\n      const displayTotal = totalStudent;\n      return (\n        <div className=\"flex justify-center\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <div className=\"text-center text-sm cursor-help\">\n                  <span className=\"text-green-600 font-medium\">\n                    {totalPresentStudent}\n                  </span>\n                  <span className=\"text-muted-foreground mx-1\">/</span>\n                  <span className=\"text-red-600 font-medium\">\n                    {totalAbsentStudent}\n                  </span>\n                  <span className=\"text-muted-foreground mx-1\">/</span>\n                  <span className=\"text-yellow-600 font-medium\">\n                    {totalNotYetStudent}\n                  </span>\n                </div>\n              </TooltipTrigger>\n              <TooltipContent>\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs\">\n                    <span className=\"text-green-600\">‚óè</span> {t(\"slots.columns.present\")}:{\" \"}\n                    {totalPresentStudent}\n                  </p>\n                  <p className=\"text-xs\">\n                    <span className=\"text-red-600\">‚óè</span> {t(\"slots.columns.absent\")}:{\" \"}\n                    {totalAbsentStudent}\n                  </p>\n                  <p className=\"text-xs\">\n                    <span className=\"text-yellow-600\">‚óè</span> {t(\"slots.columns.not_yet\")}:{\" \"}\n                    {totalNotYetStudent}\n                  </p>\n                  <p className=\"text-xs font-semibold border-t pt-1\">\n                    {t(\"slots.columns.total\")}: {displayTotal}\n                  </p>\n                </div>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      );\n    },\n  },\n  {\n    id: \"action\",\n    header: () => <div className=\"text-center\">{t(\"slots.columns.action\")}</div>,\n    cell: ({ row }) => {\n      const slot = row.original;\n\n      return (\n        <div className=\"flex justify-center\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                <MoreHorizontal className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              <DropdownMenuLabel>\n                {slot.title || \"Slot\"} {t(\"slots.columns.actions_label\")}\n              </DropdownMenuLabel>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={() => onEdit(slot)}>\n                <Pencil className=\"mr-2 h-4 w-4\" />\n                {t(\"slots.columns.edit\")}\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => onViewRoster(slot)}>\n                <Eye className=\"mr-2 h-4 w-4\" />\n                {t(\"slots.columns.view_roster\")}\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      );\n    },\n  },\n];\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\slots\\lecturer-slot-form-dialog.tsx",
      "relative_path": "components/lecturer/slots/lecturer-slot-form-dialog.tsx",
      "filename": "lecturer-slot-form-dialog.tsx",
      "size_bytes": 9758,
      "lines": 287,
      "last_modified": "2025-11-28T09:21:56.250474",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { useEffect, useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { format } from \"date-fns\";\nimport { useTranslations } from \"next-intl\";\nimport { getVietnamNow, parseVietnamTime } from \"@/lib/timezone-utils\";\nimport { formatApiError } from \"@/lib/constants\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Slot } from \"@/types\";\nimport { toast } from \"sonner\";\n\n// Lecturer can ONLY update slot category (BR-33, SLOT_UPDATE_CATEGORY permission)\nconst lecturerSlotFormSchema = z.object({\n  slotCategory: z.enum([\"LECTURE\", \"LECTURE_WITH_PT\"], {\n    message: \"Slot category is required\",\n  }),\n});\n\ntype LecturerSlotFormValues = z.infer<typeof lecturerSlotFormSchema>;\n\ninterface LecturerSlotFormDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  slot?: Slot;\n  onSubmit: (data: LecturerSlotFormData) => Promise<void>;\n  isSubmitting?: boolean;\n}\n\nexport interface LecturerSlotFormData {\n  slotCategory: \"LECTURE\" | \"LECTURE_WITH_PT\";\n}\n\n// Helper to normalize category (exclude FINAL_EXAM)\nconst normalizeCategory = (\n  category: string | undefined\n): \"LECTURE\" | \"LECTURE_WITH_PT\" => {\n  if (category === \"LECTURE_WITH_PT\") return \"LECTURE_WITH_PT\";\n  return \"LECTURE\"; // Default to LECTURE for FINAL_EXAM or undefined\n};\n\n// Helper to format time range\nconst formatTimeRange = (startTime: string, endTime: string): string => {\n  const start = new Date(startTime);\n  const end = new Date(endTime);\n  return `${format(start, \"MMM d, yyyy HH:mm\")} - ${format(end, \"HH:mm\")}`;\n};\n\nexport function LecturerSlotFormDialog({\n  open,\n  onOpenChange,\n  slot,\n  onSubmit,\n  isSubmitting = false,\n}: LecturerSlotFormDialogProps) {\n  const t = useTranslations(\"lecturer\");\n  // Only edit mode is supported for lecturers\n  const isEditMode = !!slot;\n\n  const form = useForm<LecturerSlotFormValues>({\n    resolver: zodResolver(lecturerSlotFormSchema),\n    defaultValues: {\n      slotCategory: normalizeCategory(slot?.slotCategory),\n    },\n  });\n\n  // Calculate if slot has expired (now > endTime)\n  const slotEndTime = useMemo(() => {\n    if (!slot?.endTime) return null;\n    return parseVietnamTime(slot.endTime);\n  }, [slot?.endTime]);\n\n  const isExpired = useMemo(() => {\n    if (!slotEndTime) return false;\n    const now = getVietnamNow();\n    return now > slotEndTime;\n  }, [slotEndTime]);\n\n  useEffect(() => {\n    if (open && slot) {\n      form.reset({\n        slotCategory: normalizeCategory(slot.slotCategory),\n      });\n    }\n  }, [slot, open, form]);\n\n  const handleSubmit = async (values: LecturerSlotFormValues) => {\n    form.clearErrors();\n    try {\n      await onSubmit({\n        slotCategory: values.slotCategory,\n      });\n    } catch (error) {\n      const errorMessage = formatApiError(error);\n      toast.error(`Failed to update slot category: ${errorMessage}`);\n    }\n  };\n\n  const handleOpenChange = (newOpen: boolean) => {\n    if (!newOpen) {\n      form.reset();\n    }\n    onOpenChange(newOpen);\n  };\n\n  // Don't render if not in edit mode\n  if (!isEditMode) {\n    return null;\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={handleOpenChange}>\n      <DialogContent className=\"sm:max-w-[500px] max-h-[90vh] overflow-hidden flex flex-col gap-0 p-0\">\n        <Form {...form}>\n          <form\n            onSubmit={form.handleSubmit(handleSubmit)}\n            className=\"flex flex-col h-full max-h-[90vh] overflow-hidden\"\n          >\n            <DialogHeader className=\"px-6 pt-6 pb-2 shrink-0\">\n              <DialogTitle>{t(\"slots.form_dialog.title\")}</DialogTitle>\n            </DialogHeader>\n\n            <div className=\"grid gap-4 py-4 px-6 overflow-y-auto flex-1\">\n              {/* Slot Category - ONLY editable field for lecturer */}\n              <FormField\n                control={form.control}\n                name=\"slotCategory\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>\n                      {t(\"slots.form_dialog.category\")} <span className=\"text-destructive\">*</span>\n                    </FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      defaultValue={field.value}\n                      disabled={isExpired}\n                    >\n                      <FormControl>\n                        <SelectTrigger className=\"w-full\">\n                          <SelectValue placeholder={t(\"slots.form_dialog.select_category\")} />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent className=\"w-[300px]\">\n                        <SelectItem value=\"LECTURE\">LECTURE</SelectItem>\n                        <SelectItem value=\"LECTURE_WITH_PT\">LECTURE_WITH_PT</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                    {isExpired && (\n                      <p className=\"text-sm text-muted-foreground\">\n                        {t(\"slots.form_dialog.error_expired\")}\n                      </p>\n                    )}\n                  </FormItem>\n                )}\n              />\n\n              {/* Title (read-only) */}\n              {slot?.title && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.slot_title\")}\n                  </label>\n                  <Input\n                    value={slot.title}\n                    disabled\n                    className=\"cursor-not-allowed\"\n                  />\n                </div>\n              )}\n\n              {/* Description (read-only) */}\n              {slot?.description && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.description\")}\n                  </label>\n                  <Textarea\n                    value={slot.description}\n                    disabled\n                    rows={3}\n                    className=\"cursor-not-allowed resize-none\"\n                  />\n                </div>\n              )}\n\n              {/* Time (read-only) */}\n              {slot && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.time\")}\n                  </label>\n                  <Input\n                    value={formatTimeRange(slot.startTime, slot.endTime)}\n                    disabled\n                    className=\"cursor-not-allowed\"\n                  />\n                </div>\n              )}\n\n              {/* Class (read-only) */}\n              {slot && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.class\")}\n                  </label>\n                  <Input\n                    value={slot.class?.code || \"N/A\"}\n                    disabled\n                    className=\"cursor-not-allowed\"\n                  />\n                </div>\n              )}\n\n              {/* Room (read-only) */}\n              {slot && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.room\")}\n                  </label>\n                  <Input\n                    value={slot.room.name}\n                    disabled\n                    className=\"cursor-not-allowed\"\n                  />\n                </div>\n              )}\n\n              {/* Lecturer (read-only) */}\n              {slot && (\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium leading-none text-muted-foreground\">\n                    {t(\"slots.form_dialog.lecturer\")}\n                  </label>\n                  <Input\n                    value={slot.staffUser?.fullName || t(\"slots.form_dialog.unknown\")}\n                    disabled\n                    className=\"cursor-not-allowed\"\n                  />\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex gap-2 justify-end pt-4 px-6 pb-6 border-t mt-4 shrink-0 bg-background\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => handleOpenChange(false)}\n                disabled={isSubmitting}\n              >\n                {t(\"slots.form_dialog.cancel\")}\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting || isExpired}>\n                {isSubmitting ? t(\"slots.form_dialog.saving\") : t(\"slots.form_dialog.update\")}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\slots\\lecturer-slot-pagination.tsx",
      "relative_path": "components/lecturer/slots/lecturer-slot-pagination.tsx",
      "filename": "lecturer-slot-pagination.tsx",
      "size_bytes": 2958,
      "lines": 109,
      "last_modified": "2025-11-28T09:21:56.250474",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n} from \"@/components/ui/pagination\";\n\ninterface LecturerSlotPaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  disabled?: boolean;\n}\n\nexport function LecturerSlotPagination({\n  currentPage,\n  totalPages,\n  onPageChange,\n  disabled = false,\n}: LecturerSlotPaginationProps) {\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    const maxVisible = 5;\n\n    if (totalPages <= maxVisible) {\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      if (currentPage <= 3) {\n        for (let i = 1; i <= 4; i++) {\n          pages.push(i);\n        }\n        pages.push(\"ellipsis\");\n        pages.push(totalPages);\n      } else if (currentPage >= totalPages - 2) {\n        pages.push(1);\n        pages.push(\"ellipsis\");\n        for (let i = totalPages - 3; i <= totalPages; i++) {\n          pages.push(i);\n        }\n      } else {\n        pages.push(1);\n        pages.push(\"ellipsis\");\n        for (let i = currentPage - 1; i <= currentPage + 1; i++) {\n          pages.push(i);\n        }\n        pages.push(\"ellipsis\");\n        pages.push(totalPages);\n      }\n    }\n\n    return pages;\n  };\n\n  return (\n    <Pagination>\n      <PaginationContent>\n        <PaginationItem>\n          <PaginationPrevious\n            onClick={() => onPageChange(currentPage - 1)}\n            aria-disabled={disabled || currentPage === 1}\n            className={\n              disabled || currentPage === 1\n                ? \"pointer-events-none opacity-50\"\n                : \"cursor-pointer\"\n            }\n          />\n        </PaginationItem>\n\n        {getPageNumbers().map((page, index) => (\n          <PaginationItem key={index}>\n            {page === \"ellipsis\" ? (\n              <PaginationEllipsis />\n            ) : (\n              <PaginationLink\n                onClick={() => onPageChange(page as number)}\n                isActive={currentPage === page}\n                aria-disabled={disabled}\n                className={\n                  disabled ? \"pointer-events-none opacity-50\" : \"cursor-pointer\"\n                }\n              >\n                {page}\n              </PaginationLink>\n            )}\n          </PaginationItem>\n        ))}\n\n        <PaginationItem>\n          <PaginationNext\n            onClick={() => onPageChange(currentPage + 1)}\n            aria-disabled={disabled || currentPage === totalPages}\n            className={\n              disabled || currentPage === totalPages\n                ? \"pointer-events-none opacity-50\"\n                : \"cursor-pointer\"\n            }\n          />\n        </PaginationItem>\n      </PaginationContent>\n    </Pagination>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\slots\\lecturer-slot-table.tsx",
      "relative_path": "components/lecturer/slots/lecturer-slot-table.tsx",
      "filename": "lecturer-slot-table.tsx",
      "size_bytes": 4752,
      "lines": 155,
      "last_modified": "2025-11-28T09:21:56.250474",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport {\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  getSortedRowModel,\n  SortingState,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport { useState } from \"react\";\nimport { useTranslations } from \"next-intl\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Slot } from \"@/types\";\nimport { LecturerSlotPagination } from \"./lecturer-slot-pagination\";\n\ninterface LecturerSlotTableProps {\n  columns: ColumnDef<Slot>[];\n  data: Slot[];\n  isLoading?: boolean;\n  currentPage: number;\n  totalPages: number;\n  totalItems: number;\n  pageSize: number;\n  onPageChange: (page: number) => void;\n}\n\nexport function LecturerSlotTable({\n  columns,\n  data,\n  isLoading = false,\n  currentPage,\n  totalPages,\n  totalItems,\n  pageSize,\n  onPageChange,\n}: LecturerSlotTableProps) {\n  const t = useTranslations(\"lecturer\");\n  const [sorting, setSorting] = useState<SortingState>([]);\n\n  const fixedRowCount = 10;\n\n  const table = useReactTable({\n    data,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    onSortingChange: setSorting,\n    state: {\n      sorting,\n    },\n  });\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Scrollable table container for mobile */}\n      <div className=\"rounded-md border bg-background overflow-x-auto\">\n        <Table className=\"min-w-[1000px]\">\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => (\n                  <TableHead key={header.id} className=\"whitespace-nowrap\">\n                    {header.isPlaceholder\n                      ? null\n                      : flexRender(\n                          header.column.columnDef.header,\n                          header.getContext()\n                        )}\n                  </TableHead>\n                ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {data.length > 0 ? (\n              <>\n                {table.getRowModel().rows.map((row) => (\n                  <TableRow key={row.id}>\n                    {row.getVisibleCells().map((cell) => (\n                      <TableCell\n                        key={cell.id}\n                        className=\"h-[52px] whitespace-nowrap\"\n                      >\n                        {flexRender(\n                          cell.column.columnDef.cell,\n                          cell.getContext()\n                        )}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n                {Array.from({\n                  length: Math.max(0, fixedRowCount - data.length),\n                }).map((_, index) => (\n                  <TableRow key={`empty-${index}`}>\n                    <TableCell colSpan={columns.length} className=\"h-[52px]\" />\n                  </TableRow>\n                ))}\n              </>\n            ) : (\n              <>\n                <TableRow>\n                  <TableCell\n                    colSpan={columns.length}\n                    className=\"h-[52px] text-center\"\n                  >\n                    {t(\"slots.table.no_slots\")}\n                  </TableCell>\n                </TableRow>\n                {Array.from({ length: fixedRowCount - 1 }).map((_, index) => (\n                  <TableRow key={`empty-${index}`}>\n                    <TableCell colSpan={columns.length} className=\"h-[52px]\" />\n                  </TableRow>\n                ))}\n              </>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {/* Pagination - Stack on mobile */}\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div className=\"text-sm text-muted-foreground text-center sm:text-left min-w-[200px]\">\n          {totalItems > 0 ? (\n            <>\n              Showing {(currentPage - 1) * pageSize + 1} -{\" \"}\n              {Math.min(currentPage * pageSize, totalItems)} of {totalItems}{\" \"}\n              items\n            </>\n          ) : (\n            t(\"slots.table.no_items\")\n          )}\n        </div>\n        {totalItems > pageSize && (\n          <div className=\"flex justify-center sm:justify-end\">\n            <LecturerSlotPagination\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={onPageChange}\n              disabled={isLoading}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "D:\\Work\\do_an_fall25\\fuacs\\frontend-web\\components\\lecturer\\student-card.tsx",
      "relative_path": "components/lecturer/student-card.tsx",
      "filename": "student-card.tsx",
      "size_bytes": 1956,
      "lines": 54,
      "last_modified": "2025-11-28T09:21:56.250474",
      "encoding": "utf-8",
      "language": "typescript-react",
      "content": "\"use client\";\n\nimport { User } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Student } from \"@/types\";\n\ninterface StudentCardProps {\n  student: Student;\n  className?: string;\n  compact?: boolean;\n}\n\nexport function StudentCard({ student, className, compact = false }: StudentCardProps) {\n  const padding = compact ? \"p-3\" : \"p-4\";\n  const gap = compact ? \"gap-3\" : \"gap-4\";\n  const avatarSize = compact ? \"h-12 w-12\" : \"h-16 w-16\";\n  const iconSize = compact ? \"h-6 w-6\" : \"h-8 w-8\";\n  const nameSize = compact ? \"text-sm\" : \"text-lg\";\n  const idSize = compact ? \"text-xs\" : \"text-sm\";\n  const emailSize = compact ? \"text-[11px]\" : \"text-xs\";\n\n  return (\n    <Card className={className}>\n      <CardContent className={padding}>\n        <div className={`flex items-center ${gap}`}>\n          {/* Avatar */}\n          <div className=\"flex-shrink-0\">\n            {student.avatarUrl ? (\n              // eslint-disable-next-line @next/next/no-img-element\n              <img\n                src={student.avatarUrl}\n                alt={student.fullName}\n                className={`${avatarSize} rounded-full object-cover`}\n              />\n            ) : (\n              <div className={`flex ${avatarSize} items-center justify-center rounded-full bg-muted`}>\n                <User className={`${iconSize} text-muted-foreground`} />\n              </div>\n            )}\n          </div>\n\n          {/* Student Info */}\n          <div className=\"flex-1 min-w-0\">\n            <div className={`font-semibold truncate ${nameSize}`}>{student.fullName}</div>\n            <div className={`${idSize} text-muted-foreground`}>ID: {student.studentId}</div>\n            {student.email && (\n              <div className={`${emailSize} text-muted-foreground truncate`}>{student.email}</div>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"
    }
  ]
}