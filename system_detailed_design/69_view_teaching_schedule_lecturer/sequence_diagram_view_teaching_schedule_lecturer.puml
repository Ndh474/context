@startuml view_teaching_schedule_lecturer
!theme plain
hide footbox

actor "Lecturer" as Lecturer

participant "«user interaction»\n:LecturerDashboardPage" as UI
participant "«control»\n:DashboardController" as Controller
participant "«service»\n:LecturerDashboardService" as Service
participant "«database wrapper»\n:SemesterRepository" as SemesterRepo
participant "«database wrapper»\n:SlotRepository" as SlotRepo
participant "«database wrapper»\n:ClassRepository" as ClassRepo

' === MAIN FLOW ===
Lecturer -> UI: Navigate to Dashboard
activate UI

UI -> UI: Initialize semester filter

UI -> Controller: GET /api/v1/dashboard/lecturer?semesterId={id}
activate Controller

Controller -> Service: getDashboardData(lecturerId, semesterId)
activate Service

' === GET SEMESTERS WITH TEACHING DATA ===
Service -> SemesterRepo: findSemestersWithSlotsByLecturerId(lecturerId)
activate SemesterRepo
SemesterRepo -->> Service: List<Semester>
deactivate SemesterRepo

Service -> SemesterRepo: findIndependentSemestersWithSlotsByLecturerId(lecturerId)
activate SemesterRepo
SemesterRepo -->> Service: List<Semester>
deactivate SemesterRepo

' === GET CURRENT SEMESTER ===
Service -> SemesterRepo: findCurrentSemesters()
activate SemesterRepo
SemesterRepo -->> Service: List<Semester>
deactivate SemesterRepo

' === CALCULATE STATISTICS ===
Service -> SlotRepo: calculateLecturerStats(lecturerId, semesterId)
activate SlotRepo
SlotRepo -->> Service: DashboardStatsDTO
deactivate SlotRepo

' === GET UPCOMING SLOTS ===
Service -> SlotRepo: findUpcomingSlotsForNextDay(lecturerId, semesterId, start, end)
activate SlotRepo
SlotRepo -->> Service: List<TodaySlotDTO>
deactivate SlotRepo

' === GET CLASSES WITH STATS ===
Service -> ClassRepo: findClassesWithStatsByLecturerAndSemester(lecturerId, semesterId)
activate ClassRepo
ClassRepo -->> Service: List<MyClassDTO>
deactivate ClassRepo

Service -->> Controller: LecturerDashboardResponse
deactivate Service

Controller -->> UI: 200 OK
deactivate Controller

UI -->> Lecturer: Display dashboard\n(stats, upcoming slots, my classes)
deactivate UI

@enduml
