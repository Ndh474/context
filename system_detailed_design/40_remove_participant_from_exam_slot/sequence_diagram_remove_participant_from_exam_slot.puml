@startuml remove_participant_from_exam_slot
!theme plain
hide footbox

actor "Data Operator" as Admin

participant "«user interaction»\n:DeleteParticipantDialog" as UI
participant "«control»\n:ExamSlotController" as Controller
participant "«service»\n:ExamSlotService" as Service
participant "«database wrapper»\n:ExamSlotParticipantRepository" as Repository

' --- MAIN FLOW ---
Admin -> UI: Click "Remove" icon
activate UI

UI -> UI: Show confirmation dialog

Admin -> UI: Click "Confirm"
UI -> Controller: DELETE /api/v1/exam-slots/{slotId}/participants/{participantId}
activate Controller

Controller -> Service: removeParticipant(slotId, participantId)
activate Service

' Validation (Internal)
Service -> Service: validateRemovalAllowed(slotId, participantId)

alt Validation failed (e.g. Slot started)
    Service -->> Controller: <<throw>> ValidationException
    Controller -->> UI: 400 Bad Request
    UI -->> Admin: Show error message
end

' --- DELETE ---
Service -> Repository: deleteById(participantId)
activate Repository
deactivate Repository

Service -->> Controller: void
deactivate Service

Controller -->> UI: 200 OK
deactivate Controller

UI -->> Admin: Close dialog\nRemove row from list
deactivate UI

@enduml
