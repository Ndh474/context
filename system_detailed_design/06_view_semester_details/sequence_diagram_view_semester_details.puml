@startuml View Semester Details
!theme plain
hide footbox

actor Client
participant ":SemesterController" as Controller
participant ":SemesterService" as Service
participant ":SemesterRepository" as Repository
participant ":SemesterMapper" as Mapper
participant "Database" as DB

Client -> Controller: GET /api/v1/semesters/1
activate Controller

Controller -> Service: findById(id)
activate Service

Service -> Repository: findById(id)
activate Repository

Repository -> DB: SELECT * FROM semesters\nWHERE id = ?
activate DB
DB --> Repository: semesterRecord
deactivate DB

Repository --> Service: semesterOpt:Optional<Semester>
deactivate Repository

alt semesterOpt.isEmpty()
    Service -->> Controller: <<throw>> ResourceNotFoundException
    Controller --> Client: HTTP 404\n{status: 404,\nmessage: "Semester not found: 1",\ncode: "SEMESTER_NOT_FOUND"}
end

Service -> Mapper: toDTO(semester)
activate Mapper
Mapper --> Service: dto:SemesterDTO
deactivate Mapper

Service --> Controller: SemesterDTO
deactivate Service

Controller --> Client: HTTP 200 OK\n{status: 200,\ndata: {\n  id: 1,\n  name: "Fall 2024",\n  code: "FA2024",\n  startDate: "2024-09-01",\n  endDate: "2024-12-31",\n  totalClass: 5,\n  isActive: true\n}}
deactivate Controller

@enduml
